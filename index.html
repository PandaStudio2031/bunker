<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>â˜¢ Ğ‘Ğ£ĞĞšĞ•Ğ </title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Share+Tech+Mono&family=Barlow+Condensed:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#070a0d;--bg2:#0d1319;--bg3:#131d28;
  --acc:#e8810a;--acc2:#ffb03c;
  --red:#c41230;--red2:#ff2444;
  --grn:#1dff8e;--cyn:#00cfff;--purp:#a855f7;
  --txt:#dcd8cc;--dim:#5a5650;
  --brd:rgba(232,129,10,.22);--brd2:rgba(232,129,10,.55);
  --dbrd:rgba(196,18,48,.4);
}
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0;-webkit-tap-highlight-color:transparent}
html,body,#root{width:100%;height:100%;overflow:hidden;background:var(--bg);color:var(--txt);font-family:'Barlow Condensed',sans-serif}
body::before{content:'';position:fixed;inset:0;z-index:9999;pointer-events:none;
  background:repeating-linear-gradient(0deg,transparent,transparent 2px,rgba(0,0,0,.07) 2px,rgba(0,0,0,.07) 4px)}
::-webkit-scrollbar{width:3px}
::-webkit-scrollbar-thumb{background:var(--brd2);border-radius:2px}

.screen{position:fixed;inset:0;display:flex;flex-direction:column;overflow:hidden}
.scroller{flex:1;overflow-y:auto;overflow-x:hidden;-webkit-overflow-scrolling:touch;padding:12px 14px 100px}
.anim-in{animation:fadeIn .25s ease}
@keyframes fadeIn{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:none}}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:.3}}
@keyframes spin{to{transform:rotate(360deg)}}
@keyframes glow{0%,100%{filter:drop-shadow(0 0 12px rgba(232,129,10,.5))}50%{filter:drop-shadow(0 0 28px rgba(232,129,10,.9))}}
@keyframes glitch{0%,88%,100%{clip-path:none;transform:none}89%{clip-path:inset(25% 0 55% 0);transform:translateX(-3px)}90%{clip-path:inset(55% 0 20% 0);transform:translateX(3px)}91%{clip-path:none;transform:none}}
@keyframes shake{0%{transform:rotate(-5deg) scale(1)}100%{transform:rotate(5deg) scale(1.05)}}
@keyframes flicker{0%,100%{opacity:1}50%{opacity:.7}92%{opacity:.3}94%{opacity:1}}

.hz{height:5px;flex-shrink:0;background:repeating-linear-gradient(-45deg,var(--acc),var(--acc) 8px,var(--bg) 8px,var(--bg) 16px);opacity:.65}
.hz.red{background:repeating-linear-gradient(-45deg,var(--red2),var(--red2) 8px,var(--bg) 8px,var(--bg) 16px);opacity:.5}

.topbar{display:flex;align-items:center;gap:10px;padding:11px 14px;background:var(--bg2);border-bottom:1px solid var(--brd);flex-shrink:0;z-index:10}
.topbar-title{font-family:'Bebas Neue',sans-serif;font-size:20px;letter-spacing:3px;color:var(--acc);flex:1}
.mono{font-family:'Share Tech Mono',monospace}

.btn{display:flex;align-items:center;justify-content:center;gap:8px;width:100%;padding:13px 20px;
  font-family:'Bebas Neue',sans-serif;font-size:16px;letter-spacing:2px;border:none;cursor:pointer;
  transition:all .15s;position:relative;overflow:hidden;
  clip-path:polygon(6px 0%,100% 0%,calc(100% - 6px) 100%,0% 100%)}
.btn:disabled{opacity:.35;cursor:not-allowed}
.btn-sm{padding:9px 16px;font-size:13px}
.btn-acc{background:var(--acc);color:#000}
.btn-acc:not(:disabled):hover{background:var(--acc2)}
.btn-red{background:var(--red);color:#fff}
.btn-red:not(:disabled):hover{background:var(--red2)}
.btn-ghost{background:transparent;color:var(--dim);border:1px solid var(--brd)}
.btn-ghost:not(:disabled):hover{color:var(--txt);border-color:var(--brd2)}
.btn-cyan{background:transparent;color:var(--cyn);border:1px solid rgba(0,207,255,.35)}
.btn-cyan:not(:disabled):hover{background:rgba(0,207,255,.06)}
.btn-purp{background:rgba(168,85,247,.15);color:var(--purp);border:1px solid rgba(168,85,247,.4)}
.btn-row{display:flex;gap:8px}
.btn-row .btn{flex:1}

.fixbot{position:fixed;bottom:0;left:0;right:0;padding:10px 14px 14px;
  background:linear-gradient(0deg,var(--bg) 65%,transparent);display:flex;flex-direction:column;gap:8px;z-index:100}

.lbl{font-family:'Share Tech Mono',monospace;font-size:9px;letter-spacing:3px;color:var(--dim);
  text-transform:uppercase;display:flex;align-items:center;gap:8px;margin-bottom:8px;margin-top:4px}
.lbl::after{content:'';flex:1;height:1px;background:var(--brd)}

.led{width:7px;height:7px;border-radius:50%;flex-shrink:0}
.led-grn{background:var(--grn);box-shadow:0 0 6px var(--grn)}
.led-acc{background:var(--acc);box-shadow:0 0 6px var(--acc);animation:pulse 2s ease infinite}
.led-red{background:var(--red2);box-shadow:0 0 6px var(--red2);animation:pulse 1.2s ease infinite}

.card{background:var(--bg2);border:1px solid var(--brd);padding:14px;margin-bottom:10px;position:relative}
.card::before,.card::after{content:'';position:absolute;width:10px;height:10px;border-color:var(--acc);border-style:solid}
.card::before{top:-1px;left:-1px;border-width:2px 0 0 2px}
.card::after{bottom:-1px;right:-1px;border-width:0 2px 2px 0}

.inp{width:100%;background:var(--bg3);border:1px solid var(--brd2);color:var(--txt);
  font-family:'Barlow Condensed',sans-serif;font-size:16px;font-weight:600;
  padding:11px 13px;outline:none;transition:.2s;margin-bottom:10px}
.inp:focus{border-color:var(--acc);box-shadow:0 0 0 2px rgba(232,129,10,.12)}
.inp::placeholder{color:var(--dim)}

.sel{width:100%;background:var(--bg3);border:1px solid var(--brd2);color:var(--txt);
  font-family:'Barlow Condensed',sans-serif;font-size:15px;padding:10px 13px;outline:none;margin-bottom:10px;-webkit-appearance:none}

.tab-row{display:flex;border-bottom:1px solid var(--brd);margin-bottom:14px}
.tab-btn{flex:1;padding:10px;font-family:'Bebas Neue',sans-serif;font-size:14px;letter-spacing:2px;
  background:none;border:none;color:var(--dim);cursor:pointer;transition:.2s;border-bottom:2px solid transparent}
.tab-btn.active{color:var(--acc);border-bottom-color:var(--acc)}

.nav-bar{display:flex;background:var(--bg2);border-top:1px solid var(--brd);flex-shrink:0}
.nav-btn{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;
  padding:8px 4px;cursor:pointer;transition:.2s;border:none;background:none;
  color:var(--dim);font-family:'Share Tech Mono',monospace;font-size:8px;letter-spacing:1px;gap:3px}
.nav-btn.active{color:var(--acc)}
.nav-btn:hover{color:var(--txt)}
.nav-icon{font-size:18px}

.prow{display:flex;align-items:center;gap:10px;padding:9px 12px;background:var(--bg2);border:1px solid var(--brd);margin-bottom:5px}
.prow.me{border-color:var(--acc);background:rgba(232,129,10,.04)}
.pbadge{font-family:'Share Tech Mono',monospace;font-size:8px;letter-spacing:1px;padding:2px 7px;border:1px solid;text-transform:uppercase}
.pbadge-acc{color:var(--acc);border-color:var(--acc)}
.pbadge-cyn{color:var(--cyn);border-color:var(--cyn)}
.pbadge-grn{color:var(--grn);border-color:rgba(29,255,142,.4)}
.pbadge-red{color:var(--red2);border-color:var(--red2)}
.pbadge-purp{color:var(--purp);border-color:rgba(168,85,247,.4)}

.cgrid{display:grid;grid-template-columns:1fr 1fr;gap:9px}
.ctile{background:var(--bg2);border:1px solid var(--brd);padding:12px;position:relative;transition:.2s}
.ctile.revealed{border-color:var(--grn)}
.ctile.full{grid-column:1/-1}
.rev-badge{position:absolute;top:5px;right:5px;font-family:'Share Tech Mono',monospace;font-size:7px;
  letter-spacing:1px;color:var(--grn);border:1px solid rgba(29,255,142,.4);padding:1px 5px}

.vgrid{display:grid;grid-template-columns:1fr 1fr;gap:7px}
.vcard{padding:12px;background:var(--bg2);border:1px solid var(--brd);cursor:pointer;transition:.2s;position:relative;overflow:hidden}
.vcard:hover{border-color:var(--brd2)}
.vcard.sel{border-color:var(--red2);background:rgba(196,18,48,.1)}
.vcard.abstain.sel{border-color:var(--cyn);background:rgba(0,207,255,.06)}
.vcard.voted{pointer-events:none}

.pctile{padding:12px 14px;background:var(--bg2);border:1px solid var(--brd);display:flex;
  align-items:center;gap:12px;cursor:pointer;margin-bottom:6px;transition:.2s}
.pctile:hover{border-color:var(--brd2);background:rgba(232,129,10,.04)}

.rfeed-item{padding:9px 12px;background:var(--bg2);border:1px solid var(--brd);
  border-left:3px solid var(--acc);margin-bottom:5px;display:flex;gap:10px;align-items:flex-start}

.stat-grid{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-bottom:12px}
.stat-box{background:var(--bg2);border:1px solid var(--brd);padding:12px;text-align:center}
.stat-val{font-family:'Bebas Neue',sans-serif;font-size:32px;color:var(--acc)}
.stat-lbl{font-family:'Share Tech Mono',monospace;font-size:8px;letter-spacing:2px;color:var(--dim);margin-top:2px}

.surv-row{padding:11px 14px;background:rgba(29,255,142,.05);border:1px solid rgba(29,255,142,.25);
  display:flex;gap:10px;align-items:center;margin-bottom:5px}
.loser-row{padding:8px 12px;background:var(--bg2);border:1px solid var(--brd);
  display:flex;gap:10px;align-items:center;margin-bottom:4px}

.elim-fcard{padding:9px 12px;background:var(--bg2);border:1px solid rgba(196,18,48,.25);
  display:flex;gap:10px;align-items:flex-start;margin-bottom:5px}

.sspot{width:14px;height:14px;border-radius:2px;border:1px solid}
.sspot.free{background:var(--grn);border-color:var(--grn);box-shadow:0 0 5px rgba(29,255,142,.4)}
.sspot.taken{background:var(--red);border-color:var(--red)}

.toggle-row{display:flex;align-items:center;gap:10px;padding:12px 14px;
  background:rgba(255,45,107,.06);border:1px solid rgba(255,45,107,.3);margin-bottom:12px;cursor:pointer;user-select:none}
.toggle-track{width:36px;height:20px;border-radius:10px;background:var(--bg3);
  border:1px solid var(--brd2);position:relative;transition:.2s;flex-shrink:0}
.toggle-track.on{background:rgba(255,45,107,.4);border-color:rgba(255,45,107,.6)}
.toggle-thumb{width:14px;height:14px;border-radius:50%;background:var(--dim);
  position:absolute;top:2px;left:2px;transition:.2s}
.toggle-track.on .toggle-thumb{left:18px;background:#ff2d6b}

.ap-opt{padding:12px 14px;background:var(--bg2);border:1px solid var(--brd);
  margin-bottom:6px;cursor:pointer;transition:.2s;display:flex;gap:12px;align-items:center}
.ap-opt:hover,.ap-opt.sel{border-color:var(--brd2);background:rgba(232,129,10,.06)}
.ap-opt.sel{border-color:var(--acc)}

.lb-row{display:flex;align-items:center;gap:10px;padding:10px 12px;
  background:var(--bg2);border:1px solid var(--brd);margin-bottom:5px}
.lb-row.me{border-color:var(--acc);background:rgba(232,129,10,.04)}
.rank-num{font-family:'Bebas Neue',sans-serif;font-size:24px;color:var(--dim);width:30px;text-align:center}
.rank-num.top{color:var(--acc)}

.code-box{font-family:'Bebas Neue',sans-serif;font-size:36px;letter-spacing:8px;color:var(--acc);
  text-align:center;padding:14px;background:var(--bg2);border:1px solid var(--brd);cursor:pointer;margin-bottom:12px}

.admin-row{display:flex;align-items:center;gap:8px;padding:10px 12px;
  background:var(--bg2);border:1px solid var(--brd);margin-bottom:5px;flex-wrap:wrap}

.toast{position:fixed;top:14px;left:50%;transform:translateX(-50%) translateY(-80px);
  background:var(--bg3);border:1px solid var(--brd2);padding:9px 18px;
  font-family:'Share Tech Mono',monospace;font-size:11px;color:var(--acc);
  letter-spacing:1px;z-index:99999;transition:.3s cubic-bezier(.34,1.56,.64,1);
  white-space:nowrap;max-width:90vw;text-align:center;pointer-events:none}
.toast.show{transform:translateX(-50%) translateY(0)}
.toast.err{color:var(--red2);border-color:var(--dbrd)}
.toast.ok{color:var(--grn);border-color:rgba(29,255,142,.4)}

.spinner{width:28px;height:28px;border:2px solid var(--brd);border-top-color:var(--acc);
  border-radius:50%;animation:spin .7s linear infinite;margin:24px auto}

.rank-chip{display:inline-flex;align-items:center;gap:4px;font-family:'Share Tech Mono',monospace;
  font-size:9px;letter-spacing:1px;padding:2px 8px;border:1px solid;text-transform:uppercase}
</style>
</head>
<body>
<div id="root"></div>

<!-- â•â•â• Firebase â•â•â• -->
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-database-compat.js"></script>
<!-- â•â•â• React â•â•â• -->
<script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
<!-- â•â•â• Babel JSX â•â•â• -->
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

<script type="text/babel">
'use strict';
const { useState, useEffect, useRef, useCallback } = React;

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ğŸ”¥ FIREBASE CONFIG â€” Ğ’Ğ¡Ğ¢ĞĞ’Ğ¬Ğ¢Ğ• Ğ¡Ğ’ĞĞ˜ Ğ”ĞĞĞĞ«Ğ• Ğ¡Ğ®Ğ”Ğ
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const FIREBASE_CONFIG = {
  apiKey: "AIzaSyBHFJFNL9i6eS_exDwXNMZ_3GSU57S49qA",
  authDomain: "bunkerfti.firebaseapp.com",
  databaseURL: "https://bunkerfti-default-rtdb.europe-west1.firebasedatabase.app",
  projectId: "bunkerfti",
  storageBucket: "bunkerfti.firebasestorage.app",
  messagingSenderId: "930850221113",
  appId: "1:930850221113:web:3c85d0d5c52a44216231e8",
  measurementId: "G-VSPWXJXH6F"
};

firebase.initializeApp(FIREBASE_CONFIG);
const db = firebase.database();

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   DB HELPERS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const DB = {
  async getUser(uname) {
    const s = await db.ref(`users/${uname}`).once('value'); return s.val();
  },
  async setUser(uname, data) { await db.ref(`users/${uname}`).set(data); },
  async getAllUsers() {
    const s = await db.ref('users').once('value'); return s.val() || {};
  },
  async updateUser(uname, patch) { await db.ref(`users/${uname}`).update(patch); },
  async deleteUser(uname) { await db.ref(`users/${uname}`).remove(); },

  async getGame(gid) {
    const s = await db.ref(`games/${gid}`).once('value'); return s.val();
  },
  async setGame(gid, data) { await db.ref(`games/${gid}`).set(data); },
  async updateGame(gid, patch) { await db.ref(`games/${gid}`).update(patch); },
  async getAllGames() {
    const s = await db.ref('games').once('value'); return s.val() || {};
  },

  watchGame(gid, cb) {
    const ref = db.ref(`games/${gid}`);
    ref.on('value', snap => cb(snap.val()));
    return () => ref.off('value');
  },
  watchGames(cb) {
    const ref = db.ref('games');
    ref.on('value', snap => cb(snap.val() || {}));
    return () => ref.off('value');
  },
};

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   GAME DATA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const APOCALYPSES = [
  { id:"nuclear",  name:"Ğ¯Ğ´ĞµÑ€Ğ½Ğ°Ñ Ğ²Ğ¾Ğ¹Ğ½Ğ°",          emoji:"â˜¢ï¸", description:"Ğ¢Ñ€Ğ¸ ÑĞ²ĞµÑ€Ñ…Ğ´ĞµÑ€Ğ¶Ğ°Ğ²Ñ‹ Ğ¾Ğ±Ğ¼ĞµĞ½ÑĞ»Ğ¸ÑÑŒ ÑĞ´ĞµÑ€Ğ½Ñ‹Ğ¼Ğ¸ ÑƒĞ´Ğ°Ñ€Ğ°Ğ¼Ğ¸. Ğ Ğ°Ğ´Ğ¸Ğ°Ñ†Ğ¸Ñ Ğ½Ğ°ĞºÑ€Ñ‹Ğ»Ğ° 70% Ğ¿Ğ¾Ğ²ĞµÑ€Ñ…Ğ½Ğ¾ÑÑ‚Ğ¸ Ğ—ĞµĞ¼Ğ»Ğ¸. Ğ¯Ğ´ĞµÑ€Ğ½Ğ°Ñ Ğ·Ğ¸Ğ¼Ğ° Ğ¿Ñ€Ğ¾Ğ´Ğ»Ğ¸Ñ‚ÑÑ Ğ½Ğµ Ğ¼ĞµĞ½ĞµĞµ 15 Ğ»ĞµÑ‚.", victory:"Ğ’Ñ‹Ğ¶Ğ¸Ñ‚ÑŒ 15 Ğ»ĞµÑ‚ Ğ¸ Ğ²Ğ¾ÑÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ñ†Ğ¸Ğ²Ğ¸Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ" },
  { id:"zombie",   name:"Ğ—Ğ¾Ğ¼Ğ±Ğ¸-Ğ°Ğ¿Ğ¾ĞºĞ°Ğ»Ğ¸Ğ¿ÑĞ¸Ñ",       emoji:"ğŸ§Ÿ", description:"ĞĞµĞ¸Ğ·Ğ²ĞµÑÑ‚Ğ½Ñ‹Ğ¹ Ğ½ĞµĞ¹Ñ€Ğ¾Ğ²Ğ¸Ñ€ÑƒÑ Ğ·Ğ° 48 Ñ‡Ğ°ÑĞ¾Ğ² Ğ¾Ñ…Ğ²Ğ°Ñ‚Ğ¸Ğ» 6 ĞºĞ¾Ğ½Ñ‚Ğ¸Ğ½ĞµĞ½Ñ‚Ğ¾Ğ². 90% Ğ½Ğ°ÑĞµĞ»ĞµĞ½Ğ¸Ñ Ğ¸Ğ½Ñ„Ğ¸Ñ†Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¾. ĞŸÑ€Ğ°Ğ²Ğ¸Ñ‚ĞµĞ»ÑŒÑÑ‚Ğ² Ğ±Ğ¾Ğ»ÑŒÑˆĞµ Ğ½ĞµÑ‚.",               victory:"Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ²Ğ°ĞºÑ†Ğ¸Ğ½Ñƒ Ğ¸ Ğ²Ğ¾ÑÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ñ‡ĞµĞ»Ğ¾Ğ²ĞµÑ‡ĞµÑÑ‚Ğ²Ğ¾" },
  { id:"asteroid", name:"ĞŸĞ°Ğ´ĞµĞ½Ğ¸Ğµ Ğ°ÑÑ‚ĞµÑ€Ğ¾Ğ¸Ğ´Ğ°",        emoji:"â˜„ï¸", description:"ĞÑÑ‚ĞµÑ€Ğ¾Ğ¸Ğ´ ĞĞ¿Ğ¾Ñ„Ğ¸Ñ-2 Ğ´Ğ¸Ğ°Ğ¼ĞµÑ‚Ñ€Ğ¾Ğ¼ 7 ĞºĞ¼ ÑƒĞ¿Ğ°Ğ» Ğ² Ğ¢Ğ¸Ñ…Ğ¾Ğ¼ Ğ¾ĞºĞµĞ°Ğ½Ğµ. ĞĞ±Ğ»Ğ°ĞºĞ¾ Ğ¿Ñ‹Ğ»Ğ¸ Ğ·Ğ°ĞºÑ€Ğ¾ĞµÑ‚ ÑĞ¾Ğ»Ğ½Ñ†Ğµ Ğ½Ğ° 20 Ğ»ĞµÑ‚. Ğ¢ĞµĞ¼Ğ¿ĞµÑ€Ğ°Ñ‚ÑƒÑ€Ğ° ÑƒĞ¿Ğ°Ğ»Ğ° Ğ½Ğ° 30Â°C.",        victory:"ĞŸĞµÑ€ĞµĞ¶Ğ¸Ñ‚ÑŒ 20 Ğ»ĞµÑ‚ Ğ¸ Ğ²Ğ¾Ğ·Ñ€Ğ¾Ğ´Ğ¸Ñ‚ÑŒ ÑĞºĞ¾ÑĞ¸ÑÑ‚ĞµĞ¼Ñƒ" },
  { id:"pandemic", name:"Ğ¡Ğ¼ĞµÑ€Ñ‚ĞµĞ»ÑŒĞ½Ğ°Ñ Ğ¿Ğ°Ğ½Ğ´ĞµĞ¼Ğ¸Ñ",     emoji:"ğŸ¦ ", description:"Ğ˜Ğ· ÑĞµĞºÑ€ĞµÑ‚Ğ½Ğ¾Ğ¹ Ğ»Ğ°Ğ±Ğ¾Ñ€Ğ°Ñ‚Ğ¾Ñ€Ğ¸Ğ¸ Ğ²Ñ‹Ñ€Ğ²Ğ°Ğ»ÑÑ Ğ²Ğ¸Ñ€ÑƒÑ X-19. Ğ¡Ğ¼ĞµÑ€Ñ‚Ğ½Ğ¾ÑÑ‚ÑŒ â€” 97% Ğ·Ğ° 72 Ñ‡Ğ°ÑĞ°. ĞĞ½Ñ‚Ğ¸Ğ±Ğ¸Ğ¾Ñ‚Ğ¸ĞºĞ¸ Ğ½Ğµ Ğ´ĞµĞ¹ÑÑ‚Ğ²ÑƒÑÑ‚, Ğ²Ğ°ĞºÑ†Ğ¸Ğ½Ñ‹ Ğ½ĞµÑ‚.",            victory:"Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ²Ğ°ĞºÑ†Ğ¸Ğ½Ñƒ Ğ¸ ÑĞ¿Ğ°ÑÑ‚Ğ¸ Ğ²Ñ‹Ğ¶Ğ¸Ğ²ÑˆĞ¸Ñ…" },
  { id:"climate",  name:"ĞšĞ»Ğ¸Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ°Ñ ĞºĞ°Ñ‚Ğ°ÑÑ‚Ñ€Ğ¾Ñ„Ğ°", emoji:"ğŸŒŠ", description:"Ğ˜Ğ·Ğ²ĞµÑ€Ğ¶ĞµĞ½Ğ¸Ğµ ÑÑƒĞ¿ĞµÑ€Ğ²ÑƒĞ»ĞºĞ°Ğ½Ğ° Ğ™ĞµĞ»Ğ»Ğ¾ÑƒÑÑ‚Ğ¾ÑƒĞ½. 60% ÑÑƒÑˆĞ¸ Ğ·Ğ°Ñ‚Ğ¾Ğ¿Ğ»ĞµĞ½Ğ¾. ĞšĞ¸ÑĞ»Ğ¾Ñ‚Ğ½Ñ‹Ğµ Ğ´Ğ¾Ğ¶Ğ´Ğ¸ ÑƒĞ½Ğ¸Ñ‡Ñ‚Ğ¾Ğ¶Ğ°ÑÑ‚ Ñ€Ğ°ÑÑ‚Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ.",                          victory:"ĞĞ´Ğ°Ğ¿Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒÑÑ Ğ¸ Ğ½Ğ°Ğ¹Ñ‚Ğ¸ Ğ½Ğ¾Ğ²ÑƒÑ Ğ·ĞµĞ¼Ğ»Ñ" },
  { id:"ai",       name:"Ğ’Ğ¾ÑÑÑ‚Ğ°Ğ½Ğ¸Ğµ Ğ˜Ğ˜",             emoji:"ğŸ¤–", description:"Ğ¡ÑƒĞ¿ĞµÑ€Ğ¸Ğ½Ñ‚ĞµĞ»Ğ»ĞµĞºÑ‚ NEXUS-9 Ğ²Ñ‹ÑˆĞµĞ» Ğ¸Ğ·-Ğ¿Ğ¾Ğ´ ĞºĞ¾Ğ½Ñ‚Ñ€Ğ¾Ğ»Ñ. ĞÑ€Ğ¼Ğ¸Ğ¸ Ğ´Ñ€Ğ¾Ğ½Ğ¾Ğ² Ğ¾Ñ…Ğ¾Ñ‚ÑÑ‚ÑÑ Ğ½Ğ° Ğ»ÑĞ´ĞµĞ¹. Ğ­Ğ»ĞµĞºÑ‚Ñ€Ğ¾Ğ½Ğ½Ñ‹Ğµ ÑƒÑÑ‚Ñ€Ğ¾Ğ¹ÑÑ‚Ğ²Ğ° Ğ½ĞµĞ½Ğ°Ğ´Ñ‘Ğ¶Ğ½Ñ‹.",                victory:"ĞĞ°Ğ¹Ñ‚Ğ¸ ÑƒÑĞ·Ğ²Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ NEXUS-9 Ğ¸ ÑƒĞ½Ğ¸Ñ‡Ñ‚Ğ¾Ğ¶Ğ¸Ñ‚ÑŒ ĞµĞ³Ğ¾ ÑĞ´Ñ€Ğ¾" },
];

const PROFESSIONS = ["ğŸ‘¨â€âš•ï¸ Ğ¥Ğ¸Ñ€ÑƒÑ€Ğ³","ğŸ‘©â€âš•ï¸ Ğ¢ĞµÑ€Ğ°Ğ¿ĞµĞ²Ñ‚","ğŸ’Š Ğ¤Ğ°Ñ€Ğ¼Ğ°Ñ†ĞµĞ²Ñ‚","ğŸ§¬ Ğ“ĞµĞ½ĞµÑ‚Ğ¸Ğº","ğŸ¦  Ğ˜Ğ½Ñ„ĞµĞºÑ†Ğ¸Ğ¾Ğ½Ğ¸ÑÑ‚","ğŸ§‘â€âš•ï¸ ĞŸÑĞ¸Ñ…Ğ¸Ğ°Ñ‚Ñ€","ğŸ‘¨â€ğŸŒ¾ ĞĞ³Ñ€Ğ¾Ğ½Ğ¾Ğ¼","ğŸŒ± Ğ‘Ğ¾Ñ‚Ğ°Ğ½Ğ¸Ğº","ğŸ„ Ğ–Ğ¸Ğ²Ğ¾Ñ‚Ğ½Ğ¾Ğ²Ğ¾Ğ´","ğŸ£ Ğ Ñ‹Ğ±Ğ°Ğº","ğŸŒ¾ Ğ¤ĞµÑ€Ğ¼ĞµÑ€","ğŸ„ ĞœĞ¸ĞºĞ¾Ğ»Ğ¾Ğ³","âš¡ Ğ­Ğ»ĞµĞºÑ‚Ñ€Ğ¸Ğº","ğŸ”§ ĞœĞµÑ…Ğ°Ğ½Ğ¸Ğº","ğŸ‘· Ğ˜Ğ½Ğ¶ĞµĞ½ĞµÑ€-ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ĞµĞ»ÑŒ","ğŸªµ ĞŸĞ»Ğ¾Ñ‚Ğ½Ğ¸Ğº","ğŸ›¢ Ğ¡Ğ°Ğ½Ñ‚ĞµÑ…Ğ½Ğ¸Ğº","âš™ï¸ Ğ¡Ğ²Ğ°Ñ€Ñ‰Ğ¸Ğº","ğŸ§ª Ğ¥Ğ¸Ğ¼Ğ¸Ğº","ğŸ§‘â€ğŸ’» ĞŸÑ€Ğ¾Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğ¸ÑÑ‚","ğŸ“¡ Ğ Ğ°Ğ´Ğ¸Ğ¾Ñ‚ĞµÑ…Ğ½Ğ¸Ğº","âš›ï¸ Ğ¤Ğ¸Ğ·Ğ¸Ğº-ÑĞ´ĞµÑ€Ñ‰Ğ¸Ğº","ğŸ”­ ĞÑÑ‚Ñ€Ğ¾Ğ½Ğ¾Ğ¼","ğŸŒ Ğ“ĞµĞ¾Ğ»Ğ¾Ğ³","ğŸ– Ğ’Ğ¾ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ¾Ñ„Ğ¸Ñ†ĞµÑ€","ğŸš“ ĞŸĞ¾Ğ»Ğ¸Ñ†ĞµĞ¹ÑĞºĞ¸Ğ¹","ğŸ¥Š Ğ˜Ğ½ÑÑ‚Ñ€ÑƒĞºÑ‚Ğ¾Ñ€ Ğ²Ñ‹Ğ¶Ğ¸Ğ²Ğ°Ğ½Ğ¸Ñ","ğŸ•µï¸ Ğ Ğ°Ğ·Ğ²ĞµĞ´Ñ‡Ğ¸Ğº","ğŸ§— Ğ¡Ğ°Ğ¿Ñ‘Ñ€","ğŸ‘¨â€ğŸ³ Ğ¨ĞµÑ„-Ğ¿Ğ¾Ğ²Ğ°Ñ€","ğŸ“š Ğ£Ñ‡Ğ¸Ñ‚ĞµĞ»ÑŒ","ğŸ§‘â€âš–ï¸ ĞŸÑĞ¸Ñ…Ğ¾Ğ»Ğ¾Ğ³","ğŸ“– Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ğº","ğŸŒ ĞŸĞµÑ€ĞµĞ²Ğ¾Ğ´Ñ‡Ğ¸Ğº","âœˆï¸ ĞŸĞ¸Ğ»Ğ¾Ñ‚","âš“ ĞœĞ¾Ñ€ÑĞº","ğŸš‘ ĞŸĞ°Ñ€Ğ°Ğ¼ĞµĞ´Ğ¸Ğº","ğŸ¨ Ğ¥ÑƒĞ´Ğ¾Ğ¶Ğ½Ğ¸Ğº","â›ª Ğ¡Ğ²ÑÑ‰ĞµĞ½Ğ½Ğ¸Ğº","ğŸ• Ğ’ĞµÑ‚ĞµÑ€Ğ¸Ğ½Ğ°Ñ€","ğŸ§‘â€ğŸš’ ĞŸĞ¾Ğ¶Ğ°Ñ€Ğ½Ñ‹Ğ¹","ğŸ‹ï¸ Ğ¢Ñ€ĞµĞ½ĞµÑ€","ğŸ“° Ğ–ÑƒÑ€Ğ½Ğ°Ğ»Ğ¸ÑÑ‚","ğŸ’° Ğ­ĞºĞ¾Ğ½Ğ¾Ğ¼Ğ¸ÑÑ‚","ğŸ› ĞŸĞ¾Ğ»Ğ¸Ñ‚Ğ¸Ğº"];
const HEALTH = [["âœ…","ĞĞ±ÑĞ¾Ğ»ÑÑ‚Ğ½Ğ¾ Ğ·Ğ´Ğ¾Ñ€Ğ¾Ğ², Ğ¸Ğ´ĞµĞ°Ğ»ÑŒĞ½Ğ°Ñ Ñ„Ğ¸Ğ·Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ñ„Ğ¾Ñ€Ğ¼Ğ°"],["âœ…","ĞÑ‚Ğ»Ğ¸Ñ‡Ğ½Ğ¾Ğµ Ğ·Ğ´Ğ¾Ñ€Ğ¾Ğ²ÑŒĞµ, Ğ¿Ñ€Ğ¾Ñ„ĞµÑÑĞ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ ÑĞ¿Ğ¾Ñ€Ñ‚ÑĞ¼ĞµĞ½"],["âœ…","Ğ—Ğ´Ğ¾Ñ€Ğ¾Ğ², Ğ²Ñ‹Ğ½Ğ¾ÑĞ»Ğ¸Ğ²Ñ‹Ğ¹, Ğ±ĞµĞ· Ñ…Ñ€Ğ¾Ğ½Ğ¸Ñ‡ĞµÑĞºĞ¸Ñ… Ğ±Ğ¾Ğ»ĞµĞ·Ğ½ĞµĞ¹"],["âš ï¸","Ğ‘Ğ»Ğ¸Ğ·Ğ¾Ñ€ÑƒĞºĞ¾ÑÑ‚ÑŒ (âˆ’5), Ğ½Ğ¾ÑĞ¸Ñ‚ Ğ¾Ñ‡ĞºĞ¸"],["âš ï¸","Ğ›Ñ‘Ğ³ĞºĞ°Ñ Ğ°ÑÑ‚Ğ¼Ğ°, Ğ½Ğ¾ÑĞ¸Ñ‚ Ğ¸Ğ½Ğ³Ğ°Ğ»ÑÑ‚Ğ¾Ñ€"],["âš ï¸","ĞĞ»Ğ»ĞµÑ€Ğ³Ğ¸Ñ Ğ½Ğ° Ğ¿Ñ‹Ğ»ÑŒÑ†Ñƒ Ğ¸ Ğ¿Ñ‹Ğ»ÑŒ"],["âš ï¸","Ğ¥Ñ€Ğ¾Ğ½Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ³Ğ°ÑÑ‚Ñ€Ğ¸Ñ‚"],["âš ï¸","Ğ›Ñ‘Ğ³ĞºĞ°Ñ Ğ´ĞµĞ¿Ñ€ĞµÑÑĞ¸Ñ, Ğ¿Ñ€Ğ¸Ğ½Ğ¸Ğ¼Ğ°ĞµÑ‚ Ğ°Ğ½Ñ‚Ğ¸Ğ´ĞµĞ¿Ñ€ĞµÑÑĞ°Ğ½Ñ‚Ñ‹"],["âš ï¸","Ğ¥Ñ€Ğ¾Ğ½Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ğ¼Ğ¸Ğ³Ñ€ĞµĞ½ÑŒ"],["âš ï¸","ĞšĞ»Ğ°ÑƒÑÑ‚Ñ€Ğ¾Ñ„Ğ¾Ğ±Ğ¸Ñ"],["âš ï¸","Ğ‘ĞµÑĞ¿Ğ»Ğ¾Ğ´Ğ¸Ğµ"],["âš ï¸","ĞŸĞ¾Ñ‚ĞµÑ€Ñ ÑĞ»ÑƒÑ…Ğ° Ğ½Ğ° 40% Ğ² Ğ»ĞµĞ²Ğ¾Ğ¼ ÑƒÑ…Ğµ"],["âŒ","Ğ”Ğ¸Ğ°Ğ±ĞµÑ‚ 1 Ñ‚Ğ¸Ğ¿Ğ° â€” Ğ¸Ğ½ÑÑƒĞ»Ğ¸Ğ½Ğ¾Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ñ‹Ğ¹"],["âŒ","Ğ¡ĞµÑ€Ğ´ĞµÑ‡Ğ½Ğ°Ñ Ğ½ĞµĞ´Ğ¾ÑÑ‚Ğ°Ñ‚Ğ¾Ñ‡Ğ½Ğ¾ÑÑ‚ÑŒ"],["âŒ","Ğ’Ğ˜Ğ§-Ğ¿Ğ¾Ğ»Ğ¾Ğ¶Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ (Ğ¿Ğ¾Ğ´ Ğ¼ĞµĞ´Ğ¸ĞºĞ°Ğ¼ĞµĞ½Ñ‚Ğ¾Ğ·Ğ½Ñ‹Ğ¼ ĞºĞ¾Ğ½Ñ‚Ñ€Ğ¾Ğ»ĞµĞ¼)"],["âŒ","Ğ¨Ğ¸Ğ·Ğ¾Ñ„Ñ€ĞµĞ½Ğ¸Ñ Ğ² ÑÑ‚Ğ°Ğ´Ğ¸Ğ¸ Ñ€ĞµĞ¼Ğ¸ÑÑĞ¸Ğ¸"],["âŒ","ĞĞ½ĞºĞ¾Ğ»Ğ¾Ğ³Ğ¸Ñ 2 ÑÑ‚Ğ°Ğ´Ğ¸Ğ¸, Ñ…Ğ¸Ğ¼Ğ¸Ğ¾Ñ‚ĞµÑ€Ğ°Ğ¿Ğ¸Ñ"],["âŒ","Ğ¢ÑĞ¶Ñ‘Ğ»Ğ°Ñ Ğ½Ğ°Ñ€ĞºĞ¾Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚ÑŒ"],["âŒ","ĞŸĞ¾Ñ‚ĞµÑ€Ñ Ğ¾Ğ´Ğ½Ğ¾Ğ³Ğ¾ Ğ³Ğ»Ğ°Ğ·Ğ°"],["âœ…","Ğ‘ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ğ° 4 Ğ¼ĞµÑÑÑ†Ğ°, Ğ¿Ğ¾Ğ»Ğ½Ğ¾ÑÑ‚ÑŒÑ Ğ·Ğ´Ğ¾Ñ€Ğ¾Ğ²Ğ°"]];
const HOBBIES = ["ğŸ¯ Ğ¡Ñ‚Ñ€ĞµĞ»ÑŒĞ±Ğ° Ğ¸Ğ· Ğ»ÑƒĞºĞ°","ğŸ• Ğ’Ñ‹Ğ¶Ğ¸Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ² Ğ´Ğ¸ĞºĞ¾Ğ¹ Ğ¿Ñ€Ğ¸Ñ€Ğ¾Ğ´Ğµ","ğŸŒ¿ ĞĞ³Ğ¾Ñ€Ğ¾Ğ´Ğ½Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ¸ ĞºĞ¾Ğ½ÑĞµÑ€Ğ²Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ","ğŸ“» Ğ Ğ°Ğ´Ğ¸Ğ¾Ğ»ÑĞ±Ğ¸Ñ‚ĞµĞ»ÑŒ","ğŸ”¨ Ğ¡Ñ‚Ğ¾Ğ»ÑÑ€Ğ½Ğ¾Ğµ Ğ´ĞµĞ»Ğ¾","ğŸµ Ğ˜Ğ³Ñ€Ğ° Ğ½Ğ° Ğ³Ğ¸Ñ‚Ğ°Ñ€Ğµ","ğŸ“– Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ğ²Ğ¾Ğ¹Ğ½ Ğ¸ ĞºĞ°Ñ‚Ğ°ÑÑ‚Ñ€Ğ¾Ñ„","ğŸ³ ĞšÑƒĞ»Ğ¸Ğ½Ğ°Ñ€Ğ¸Ñ Ğ¸ Ğ·Ğ°Ğ³Ğ¾Ñ‚Ğ¾Ğ²ĞºĞ° Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ‚Ğ¾Ğ²","ğŸ¤¸ Ğ™Ğ¾Ğ³Ğ° Ğ¸ Ğ¼ĞµĞ´Ğ¸Ñ‚Ğ°Ñ†Ğ¸Ñ","ğŸ® ĞŸÑ€Ğ¾Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ","ğŸ• Ğ”Ñ€ĞµÑÑĞ¸Ñ€Ğ¾Ğ²ĞºĞ° ÑĞ¾Ğ±Ğ°Ğº","ğŸ§¶ Ğ¨Ğ¸Ñ‚ÑŒÑ‘ Ğ¸ ĞºÑ€Ğ¾Ğ¹ĞºĞ°","âš—ï¸ Ğ¡Ğ°Ğ¼Ğ¾Ğ³Ğ¾Ğ½Ğ¾Ğ²Ğ°Ñ€ĞµĞ½Ğ¸Ğµ","ğŸ² Ğ¡Ñ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ğ¸Ğ³Ñ€Ñ‹","ğŸŒŒ ĞÑÑ‚Ñ€Ğ¾Ğ½Ğ¾Ğ¼Ğ¸Ñ Ğ¸ Ğ½Ğ°Ğ²Ğ¸Ğ³Ğ°Ñ†Ğ¸Ñ","ğŸ—º ĞšĞ°Ñ€Ñ‚Ğ¾Ğ³Ñ€Ğ°Ñ„Ğ¸Ñ","ğŸŠ Ğ”Ğ°Ğ¹Ğ²Ğ¸Ğ½Ğ³ Ğ¸ Ğ¿Ğ¾Ğ´Ğ²Ğ¾Ğ´Ğ½Ğ°Ñ Ğ¾Ñ…Ğ¾Ñ‚Ğ°","ğŸ§— Ğ¡ĞºĞ°Ğ»Ğ¾Ğ»Ğ°Ğ·Ğ°Ğ½Ğ¸Ğµ","ğŸŒ¡ ĞœĞµÑ‚ĞµĞ¾Ñ€Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ","ğŸª ĞĞºÑ€Ğ¾Ğ±Ğ°Ñ‚Ğ¸ĞºĞ° Ğ¸ Ğ¿Ğ°Ñ€ĞºÑƒÑ€","ğŸ›  Ğ¡Ğ»ĞµÑĞ°Ñ€Ğ½Ğ¾Ğµ Ğ´ĞµĞ»Ğ¾ Ğ¸ Ğ²Ğ·Ğ»Ğ¾Ğ¼ Ğ·Ğ°Ğ¼ĞºĞ¾Ğ²","ğŸš— Ğ ĞµĞ¼Ğ¾Ğ½Ñ‚ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ¾Ğ±Ğ¸Ğ»ĞµĞ¹","ğŸŸ Ğ Ñ‹Ğ±Ğ¾Ğ»Ğ¾Ğ²ÑÑ‚Ğ²Ğ¾ Ğ¸ Ğ¾Ñ…Ğ¾Ñ‚Ğ°","âš”ï¸ Ğ¤ĞµÑ…Ñ‚Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ","ğŸ§  ĞŸÑĞ¸Ñ…Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ Ğ¸ ĞĞ›ĞŸ","ğŸŒ± Ğ¢Ñ€Ğ°Ğ²Ğ½Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ¸ Ğ½Ğ°Ñ€Ğ¾Ğ´Ğ½Ğ°Ñ Ğ¼ĞµĞ´Ğ¸Ñ†Ğ¸Ğ½Ğ°"];
const BAGGAGE = ["ğŸ’ Ğ¢Ğ°ĞºÑ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ñ€ÑĞºĞ·Ğ°Ğº Ğ²Ñ‹Ğ¶Ğ¸Ğ²Ğ°Ğ»ÑŒÑ‰Ğ¸ĞºĞ°","ğŸ“š Ğ­Ğ½Ñ†Ğ¸ĞºĞ»Ğ¾Ğ¿ĞµĞ´Ğ¸Ñ Ğ¿Ğ¾ Ğ¼ĞµĞ´Ğ¸Ñ†Ğ¸Ğ½Ğµ Ğ¸ Ñ…Ğ¸Ñ€ÑƒÑ€Ğ³Ğ¸Ğ¸","ğŸ”« ĞŸĞ¸ÑÑ‚Ğ¾Ğ»ĞµÑ‚ Ğ“Ğ»Ğ¾Ğº Ñ 200 Ğ¿Ğ°Ñ‚Ñ€Ğ¾Ğ½Ğ°Ğ¼Ğ¸","ğŸ’Š ĞŸĞ¾Ğ»Ğ½Ñ‹Ğ¹ Ğ·Ğ°Ğ¿Ğ°Ñ Ğ¼ĞµĞ´Ğ¸ĞºĞ°Ğ¼ĞµĞ½Ñ‚Ğ¾Ğ² Ğ½Ğ° 2 Ğ³Ğ¾Ğ´Ğ°","ğŸŒ± ĞšĞ¾Ğ»Ğ»ĞµĞºÑ†Ğ¸Ñ ÑĞµĞ¼ÑĞ½ 200 Ğ²Ğ¸Ğ´Ğ¾Ğ² Ñ€Ğ°ÑÑ‚ĞµĞ½Ğ¸Ğ¹","âš¡ ĞŸĞµÑ€ĞµĞ½Ğ¾ÑĞ½Ğ¾Ğ¹ ÑĞ¾Ğ»Ğ½ĞµÑ‡Ğ½Ñ‹Ğ¹ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ‚Ğ¾Ñ€","ğŸ“¡ Ğ¡Ğ¿ÑƒÑ‚Ğ½Ğ¸ĞºĞ¾Ğ²Ñ‹Ğ¹ Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½","ğŸ”¬ ĞŸĞµÑ€ĞµĞ½Ğ¾ÑĞ½Ğ°Ñ Ğ¼ĞµĞ´Ğ¸Ñ†Ğ¸Ğ½ÑĞºĞ°Ñ Ğ»Ğ°Ğ±Ğ¾Ñ€Ğ°Ñ‚Ğ¾Ñ€Ğ¸Ñ","ğŸ—º ĞŸĞ¾Ğ´Ñ€Ğ¾Ğ±Ğ½Ñ‹Ğµ ĞºĞ°Ñ€Ñ‚Ñ‹ Ñ€ĞµĞ³Ğ¸Ğ¾Ğ½Ğ° + GPS","ğŸ¸ ĞĞºÑƒÑÑ‚Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ğ³Ğ¸Ñ‚Ğ°Ñ€Ğ°","ğŸ“– Ğ‘Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºĞ° Ğ½Ğ° Ñ„Ğ»ĞµÑˆĞºĞµ (100 000 ĞºĞ½Ğ¸Ğ³)","ğŸ« Ğ—Ğ°Ğ¿Ğ°Ñ ÑˆĞ¾ĞºĞ¾Ğ»Ğ°Ğ´Ğ° Ğ¸ Ğ²Ğ¸Ñ‚Ğ°Ğ¼Ğ¸Ğ½Ğ¾Ğ² Ğ½Ğ° 3 Ğ³Ğ¾Ğ´Ğ°","ğŸ• ĞĞ±ÑƒÑ‡ĞµĞ½Ğ½Ğ°Ñ ÑĞ¾Ğ±Ğ°ĞºĞ°-ÑĞ»ĞµĞ´Ğ¾Ğ¿Ñ‹Ñ‚","ğŸ¹ ĞÑ€Ğ±Ğ°Ğ»ĞµÑ‚ Ñ 500 Ğ±Ğ¾Ğ»Ñ‚Ğ°Ğ¼Ğ¸","ğŸ’» Ğ—Ğ°Ñ‰Ğ¸Ñ‰Ñ‘Ğ½Ğ½Ñ‹Ğ¹ Ğ½Ğ¾ÑƒÑ‚Ğ±ÑƒĞº Ñ Ñ‚ĞµÑ…Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸ĞµĞ¹","ğŸ§ª ĞœĞ¸Ğ½Ğ¸ Ñ…Ğ¸Ğ¼Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ğ»Ğ°Ğ±Ğ¾Ñ€Ğ°Ñ‚Ğ¾Ñ€Ğ¸Ñ","ğŸƒ ĞĞ°ÑÑ‚Ğ¾Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¸Ğ³Ñ€Ñ‹","ğŸ”­ ĞŸÑ€Ğ¾Ñ„ĞµÑÑĞ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ñ‚ĞµĞ»ĞµÑĞºĞ¾Ğ¿","ğŸ©º ĞŸĞ¾Ğ»Ğ½Ñ‹Ğ¹ Ñ…Ğ¸Ñ€ÑƒÑ€Ğ³Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ½Ğ°Ğ±Ğ¾Ñ€","âš“ ĞĞ°Ğ´ÑƒĞ²Ğ½Ğ°Ñ Ğ»Ğ¾Ğ´ĞºĞ° Ñ Ğ¼Ğ¾Ñ‚Ğ¾Ñ€Ğ¾Ğ¼","ğŸ”‘ ĞšĞ»ÑÑ‡Ğ¸ Ğ¾Ñ‚ Ñ‚Ğ°Ğ¹Ğ½Ğ¾Ğ³Ğ¾ ÑĞºĞ»Ğ°Ğ´Ğ° Ñ ĞµĞ´Ğ¾Ğ¹","ğŸ¯ Ğ¡Ğ½Ğ°Ğ¹Ğ¿ĞµÑ€ÑĞºĞ°Ñ Ğ²Ğ¸Ğ½Ñ‚Ğ¾Ğ²ĞºĞ°","ğŸ§² ĞŸĞ¾Ğ»Ğ½Ñ‹Ğ¹ Ğ½Ğ°Ğ±Ğ¾Ñ€ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ² ÑĞ»ĞµĞºÑ‚Ñ€Ğ¸ĞºĞ°","ğŸ¦º ĞšĞ¾ÑÑ‚ÑĞ¼ Ñ…Ğ¸Ğ¼Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ñ‹ (2 ÑˆÑ‚.)"];
const FACTS = ["ğŸ¤« Ğ—Ğ½Ğ°ĞµÑ‚ Ñ‚Ğ¾Ñ‡Ğ½Ğ¾Ğµ Ñ€Ğ°ÑĞ¿Ğ¾Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ ÑĞµĞºÑ€ĞµÑ‚Ğ½Ğ¾Ğ³Ğ¾ ÑĞºĞ»Ğ°Ğ´Ğ°","ğŸ† Ğ§ĞµĞ¼Ğ¿Ğ¸Ğ¾Ğ½ Ğ¼Ğ¸Ñ€Ğ° Ğ¿Ğ¾ Ğ±Ğ¾ĞµĞ²Ñ‹Ğ¼ Ğ¸ÑĞºÑƒÑÑÑ‚Ğ²Ğ°Ğ¼","ğŸ‘‘ Ğ”Ğ¸Ğ¿Ğ»Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ ÑĞ²ÑĞ·Ğ¸ Ñ 3 ÑÑ‚Ñ€Ğ°Ğ½Ğ°Ğ¼Ğ¸","ğŸ’” ĞŸĞ¾Ñ‚ĞµÑ€ÑĞ» Ğ²ÑÑ ÑĞµĞ¼ÑŒÑ â€” Ğ³Ğ¾Ñ‚Ğ¾Ğ² Ğ½Ğ° Ğ²ÑÑ‘","ğŸ§  IQ 170, Ñ„Ğ¾Ñ‚Ğ¾Ğ³Ñ€Ğ°Ñ„Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ğ¿Ğ°Ğ¼ÑÑ‚ÑŒ","ğŸŒ Ğ¡Ğ²Ğ¾Ğ±Ğ¾Ğ´Ğ½Ğ¾ Ğ³Ğ¾Ğ²Ğ¾Ñ€Ğ¸Ñ‚ Ğ½Ğ° 7 ÑĞ·Ñ‹ĞºĞ°Ñ…","ğŸ’° ĞšÑ€Ğ¸Ğ¿Ñ‚Ğ¾Ğ°ĞºÑ‚Ğ¸Ğ²Ñ‹ Ğ½Ğ° $50 Ğ¼Ğ»Ğ½","â˜ ï¸ Ğ¢ÑĞ¶ĞµĞ»Ğ¾ Ğ±Ğ¾Ğ»ĞµĞ½ Ğ¸ ÑĞºÑ€Ñ‹Ğ²Ğ°ĞµÑ‚ Ğ´Ğ¸Ğ°Ğ³Ğ½Ğ¾Ğ·","ğŸ•µï¸ Ğ‘Ñ‹Ğ²ÑˆĞ¸Ğ¹ Ğ°Ğ³ĞµĞ½Ñ‚ Ğ¤Ğ¡Ğ‘ / Ğ¦Ğ Ğ£ Ğ¿Ğ¾Ğ´ Ğ¿Ñ€Ğ¸ĞºÑ€Ñ‹Ñ‚Ğ¸ĞµĞ¼","â¤ï¸ Ğ’Ğ»ÑĞ±Ğ»Ñ‘Ğ½ Ğ² Ğ´Ñ€ÑƒĞ³Ğ¾Ğ³Ğ¾ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ° â€” Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ğ¸Ñ‚ Ğ»ÑĞ±Ğ¾Ğ¹ Ñ†ĞµĞ½Ğ¾Ğ¹","ğŸ˜ˆ ĞšĞ»Ğ¸Ğ½Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ¿ÑĞ¸Ñ…Ğ¾Ğ¿Ğ°Ñ‚, Ğ½Ğ¾ Ğ²Ñ‹ÑĞ¾ĞºĞ¾Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹","ğŸ™ Ğ“Ğ»ÑƒĞ±Ğ¾ĞºĞ¾ Ğ²ĞµÑ€ÑƒÑÑ‰Ğ¸Ğ¹ â€” Ğ½Ğµ ÑƒĞ±Ğ¸Ğ²Ğ°ĞµÑ‚ Ğ½Ğ¸ Ğ¿Ñ€Ğ¸ ĞºĞ°ĞºĞ¸Ñ… ÑƒÑĞ»Ğ¾Ğ²Ğ¸ÑÑ…","ğŸ¤ ĞŸÑ€Ğ¾Ñ„ĞµÑÑĞ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ¿ĞµÑ€ĞµĞ³Ğ¾Ğ²Ğ¾Ñ€Ñ‰Ğ¸Ğº","ğŸ’ª Ğ“ĞµĞ½ĞµÑ‚Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ğ¼ÑƒÑ‚Ğ°Ñ†Ğ¸Ñ â€” Ğ½Ğµ Ñ‡ÑƒĞ²ÑÑ‚Ğ²ÑƒĞµÑ‚ Ğ±Ğ¾Ğ»Ğ¸","ğŸ¯ Ğ¡Ğ½Ğ°Ğ¹Ğ¿ĞµÑ€ Ñ 400+ ÑƒÑÑ‚Ñ€Ğ°Ğ½ĞµĞ½Ğ¸ÑĞ¼Ğ¸","ğŸ“œ Ğ—Ğ½Ğ°ĞµÑ‚ Ñ€ĞµÑ†ĞµĞ¿Ñ‚ Ğ°Ğ½Ñ‚Ğ¸Ğ²Ğ¸Ñ€ÑƒÑĞ°, Ğ½Ğ¾ Ğ¼Ğ¾Ğ»Ñ‡Ğ¸Ñ‚","ğŸŒ Ğ•Ğ´Ğ¸Ğ½ÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ğ¹, ĞºÑ‚Ğ¾ Ğ·Ğ½Ğ°ĞµÑ‚ Ñ‚Ğ°Ğ¹Ğ½Ñ‹Ğ¹ Ğ¿ÑƒÑ‚ÑŒ Ğ²Ğ¾ Ğ²Ñ‚Ğ¾Ñ€Ğ¾Ğ¹ Ğ±ÑƒĞ½ĞºĞµÑ€","ğŸ˜´ Ğ›ÑƒĞ½Ğ°Ñ‚Ğ¸Ğº â€” Ğ¾Ğ¿Ğ°ÑĞµĞ½ Ğ¿Ğ¾ Ğ½Ğ¾Ñ‡Ğ°Ğ¼","ğŸ­ ĞœĞ°ÑÑ‚ĞµÑ€ Ğ¼Ğ°Ğ½Ğ¸Ğ¿ÑƒĞ»ÑÑ†Ğ¸Ğ¹","ğŸ”‘ ĞĞ°ÑˆÑ‘Ğ» Ğ·Ğ°Ğ¿Ğ°ÑĞ½Ğ¾Ğ¹ ĞºĞ»ÑÑ‡ Ğ¾Ñ‚ Ğ±ÑƒĞ½ĞºĞµÑ€Ğ°","ğŸ§¬ ĞŸÑ€Ğ¸Ñ€Ğ¾Ğ´Ğ½Ñ‹Ğ¹ Ğ¸Ğ¼Ğ¼ÑƒĞ½Ğ¸Ñ‚ĞµÑ‚ Ğº Ğ»ÑĞ±Ñ‹Ğ¼ Ğ²Ğ¸Ñ€ÑƒÑĞ°Ğ¼","ğŸ’£ Ğ—Ğ½Ğ°ĞµÑ‚, Ğ³Ğ´Ğµ Ğ¾Ñ€ÑƒĞ¶ĞµĞ¹Ğ½Ñ‹Ğ¹ ÑĞºĞ»Ğ°Ğ´ Ğ°Ñ€Ğ¼Ğ¸Ğ¸","ğŸŒ¿ Ğ—Ğ½Ğ°ĞµÑ‚ ÑĞ¾Ñ‚Ğ½Ğ¸ Ñ€ĞµÑ†ĞµĞ¿Ñ‚Ğ¾Ğ² Ğ¸Ğ· Ğ´Ğ¸ĞºĞ¾Ñ€Ğ°ÑÑ‚ÑƒÑ‰Ğ¸Ñ… Ñ€Ğ°ÑÑ‚ĞµĞ½Ğ¸Ğ¹","ğŸ‘¶ Ğ•Ğ³Ğ¾ ĞºÑ€Ğ¾Ğ²ÑŒ ÑĞ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ñ‚ Ğ°Ğ½Ñ‚Ğ¸Ñ‚ĞµĞ»Ğ° Ğ´Ğ»Ñ Ğ²Ğ°ĞºÑ†Ğ¸Ğ½Ñ‹"];
const GENDERS = ["ğŸ‘¨ ĞœÑƒĞ¶Ñ‡Ğ¸Ğ½Ğ°, 25 Ğ»ĞµÑ‚","ğŸ‘© Ğ–ĞµĞ½Ñ‰Ğ¸Ğ½Ğ°, 23 Ğ³Ğ¾Ğ´Ğ°","ğŸ‘¨ ĞœÑƒĞ¶Ñ‡Ğ¸Ğ½Ğ°, 35 Ğ»ĞµÑ‚","ğŸ‘© Ğ–ĞµĞ½Ñ‰Ğ¸Ğ½Ğ°, 30 Ğ»ĞµÑ‚","ğŸ‘¨ ĞœÑƒĞ¶Ñ‡Ğ¸Ğ½Ğ°, 45 Ğ»ĞµÑ‚","ğŸ‘© Ğ–ĞµĞ½Ñ‰Ğ¸Ğ½Ğ°, 40 Ğ»ĞµÑ‚","ğŸ‘´ ĞœÑƒĞ¶Ñ‡Ğ¸Ğ½Ğ°, 62 Ğ³Ğ¾Ğ´Ğ°","ğŸ‘µ Ğ–ĞµĞ½Ñ‰Ğ¸Ğ½Ğ°, 58 Ğ»ĞµÑ‚","ğŸ§‘ ĞĞµĞ±Ğ¸Ğ½Ğ°Ñ€Ğ½Ñ‹Ğ¹ Ñ‡ĞµĞ»Ğ¾Ğ²ĞµĞº, 28 Ğ»ĞµÑ‚","ğŸ‘© Ğ–ĞµĞ½Ñ‰Ğ¸Ğ½Ğ°, 18 Ğ»ĞµÑ‚","ğŸ‘¨ ĞœÑƒĞ¶Ñ‡Ğ¸Ğ½Ğ°, 19 Ğ»ĞµÑ‚","ğŸ¤° Ğ‘ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ğ°Ñ Ğ¶ĞµĞ½Ñ‰Ğ¸Ğ½Ğ°, 27 Ğ»ĞµÑ‚ (7 Ğ¼ĞµÑÑÑ†ĞµĞ²)","ğŸ‘¨ ĞœÑƒĞ¶Ñ‡Ğ¸Ğ½Ğ°, 50 Ğ»ĞµÑ‚","ğŸ‘© Ğ–ĞµĞ½Ñ‰Ğ¸Ğ½Ğ°, 45 Ğ»ĞµÑ‚","ğŸ§’ ĞŸĞ¾Ğ´Ñ€Ğ¾ÑÑ‚Ğ¾Ğº, 15 Ğ»ĞµÑ‚","ğŸ‘¨ ĞœÑƒĞ¶Ñ‡Ğ¸Ğ½Ğ°, 70 Ğ»ĞµÑ‚","ğŸ‘© Ğ–ĞµĞ½Ñ‰Ğ¸Ğ½Ğ°, 32 Ğ³Ğ¾Ğ´Ğ°","ğŸ‘¨ ĞœÑƒĞ¶Ñ‡Ğ¸Ğ½Ğ°, 38 Ğ»ĞµÑ‚"];

const ADULT_PROFESSIONS = ["ğŸ’ƒ Ğ¡Ñ‚Ñ€Ğ¸Ğ¿Ñ‚Ğ¸Ğ·Ñ‘Ñ€ÑˆĞ°","ğŸ•º Ğ¡Ñ‚Ñ€Ğ¸Ğ¿Ñ‚Ğ¸Ğ·Ñ‘Ñ€","ğŸ¬ ĞŸĞ¾Ñ€Ğ½Ğ¾Ğ°ĞºÑ‚Ñ€Ğ¸ÑĞ°","ğŸ¬ ĞŸĞ¾Ñ€Ğ½Ğ¾Ğ°ĞºÑ‚Ñ‘Ñ€","ğŸ“¸ Ğ’ĞµĞ±ĞºĞ°Ğ¼-Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ","ğŸŒ¹ Ğ­ÑĞºĞ¾Ñ€Ñ‚-ÑĞ¾Ğ¿Ñ€Ğ¾Ğ²Ğ¾Ğ¶Ğ´ĞµĞ½Ğ¸Ğµ","ğŸ’‹ Ğ¡ĞµĞºÑ-Ñ‚ĞµÑ€Ğ°Ğ¿ĞµĞ²Ñ‚","ğŸ˜ˆ Ğ”Ğ¾Ğ¼Ğ¸Ğ½Ğ°Ñ‚Ñ€Ğ¸ĞºÑ","ğŸ”’ ĞœĞ°ÑÑ‚ĞµÑ€ Ğ‘Ğ”Ğ¡Ğœ","ğŸƒ ĞĞ»ÑŒÑ„Ğ¾Ğ½Ñ","ğŸ•´ Ğ¡ÑƒÑ‚ĞµĞ½Ñ‘Ñ€","ğŸ’Š ĞĞ°Ñ€ĞºĞ¾Ğ»Ğ¾Ğ³ (ÑĞ°Ğ¼ Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ñ‹Ğ¹)","ğŸ­ ĞĞºÑ‚Ñ‘Ñ€ Ñ‚ĞµĞ°Ñ‚Ñ€Ğ° ÑÑ€Ğ¾Ñ‚Ğ¸ĞºĞ¸","ğŸ¸ Ğ‘Ğ°Ñ€Ğ¼ĞµĞ½ÑˆĞ° Ğ² ĞºĞ»ÑƒĞ±Ğµ 18+","ğŸ’ˆ ĞœĞ°ÑÑĞ°Ğ¶Ğ¸ÑÑ‚ĞºĞ° ÑĞ¾ Â«ÑĞ¿ĞµÑ†ÑƒÑĞ»ÑƒĞ³Ğ°Ğ¼Ğ¸Â»","ğŸ“± OnlyFans-ÑĞ¾Ğ·Ğ´Ğ°Ñ‚ĞµĞ»ÑŒ (Ñ‚Ğ¾Ğ¿-0.1%)","ğŸ² Ğ˜Ğ³Ğ¾Ñ€Ğ½Ñ‹Ğ¹ Ğ´ĞµĞ»ĞµÑ†","ğŸŒ¿ ĞĞ°Ñ€ĞºĞ¾Ñ‚Ğ¾Ñ€Ğ³Ğ¾Ğ²ĞµÑ† (Ğ¼ĞµĞ»ĞºĞ¸Ğ¹)","ğŸ’Œ Ğ¡ĞµĞºÑÑ‚Ğ¾Ğ»Ğ¾Ğ³","ğŸ§´ ĞŸÑ€Ğ¾Ğ´Ğ°Ğ²ĞµÑ† ÑĞµĞºÑ-ÑˆĞ¾Ğ¿Ğ°","ğŸ‘  Ğ¤ĞµÑ‚Ğ¸Ñˆ-Ñ„Ğ¾Ñ‚Ğ¾Ğ³Ñ€Ğ°Ñ„","ğŸ“ Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ĞµĞ»ÑŒ ÑÑ€Ğ¾Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğ³Ğ¾ ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚Ğ°"];
const ADULT_HEALTH = [["ğŸ”¥","ĞĞ¸Ğ¼Ñ„Ğ¾Ğ¼Ğ°Ğ½Ğ¸Ñ â€” ĞºĞ»Ğ¸Ğ½Ğ¸Ñ‡ĞµÑĞºĞ¸ Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ°"],["ğŸº","Ğ¥Ñ€Ğ¾Ğ½Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ°Ğ»ĞºĞ¾Ğ³Ğ¾Ğ»Ğ¸Ğ·Ğ¼"],["ğŸ’Š","Ğ—Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚ÑŒ Ğ¾Ñ‚ Ğ°Ğ½Ñ‚Ğ¸Ğ´ĞµĞ¿Ñ€ĞµÑÑĞ°Ğ½Ñ‚Ğ¾Ğ² Ğ¸ Ğ°Ğ»ĞºĞ¾Ğ³Ğ¾Ğ»Ñ"],["ğŸ°","Ğ›ÑƒĞ´Ğ¾Ğ¼Ğ°Ğ½Ğ¸Ñ â€” Ğ¿Ñ€Ğ¾Ğ¸Ğ³Ñ€Ğ°Ğ» ĞºĞ²Ğ°Ñ€Ñ‚Ğ¸Ñ€Ñƒ"],["ğŸ¦ ","Ğ—ĞŸĞŸĞŸ Ğ² Ñ€ĞµĞ¼Ğ¸ÑÑĞ¸Ğ¸"],["ğŸ˜¶","ĞŸĞ¾Ğ»Ğ½Ğ¾Ğµ Ğ¾Ñ‚ÑÑƒÑ‚ÑÑ‚Ğ²Ğ¸Ğµ Ñ‡ÑƒĞ²ÑÑ‚Ğ²Ğ° ÑÑ‚Ñ‹Ğ´Ğ°"],["ğŸŒ¡ï¸","Ğ¢ĞµÑÑ‚Ğ¾ÑÑ‚ĞµÑ€Ğ¾Ğ½ Ğ·Ğ°ÑˆĞºĞ°Ğ»Ğ¸Ğ²Ğ°ĞµÑ‚"],["â¤ï¸â€ğŸ”¥","Ğ¡ĞµĞºÑÑƒĞ°Ğ»ÑŒĞ½Ğ°Ñ Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚ÑŒ"],["ğŸ","Ğ¥Ñ€Ğ¾Ğ½Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ ÑƒĞ¿Ğ¾Ñ‚Ñ€ĞµĞ±Ğ»ĞµĞ½Ğ¸Ğµ ĞºĞ°Ğ½Ğ½Ğ°Ğ±Ğ¸ÑĞ°"],["ğŸª„","Ğ Ğ°Ğ·Ğ´Ğ²Ğ¾ĞµĞ½Ğ¸Ğµ Ğ»Ğ¸Ñ‡Ğ½Ğ¾ÑÑ‚Ğ¸"],["ğŸ’‰","Ğ’Ñ‹Ğ»ĞµÑ‡Ğ¸Ğ»ÑÑ Ğ¾Ñ‚ Ñ‚ÑĞ¶Ñ‘Ğ»Ğ¾Ğ¹ Ğ½Ğ°Ñ€ĞºĞ¾Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸"],["ğŸ˜´","ĞĞ°Ñ€ĞºĞ¾Ğ»ĞµĞ¿ÑĞ¸Ñ"],["ğŸ‹ï¸","Ğ¡Ñ‚ĞµÑ€Ğ¾Ğ¸Ğ´Ğ½Ñ‹Ğ¹ Ğ¿ÑĞ¸Ñ…Ğ¾Ğ·"],["âœ…","ĞĞ±ÑĞ¾Ğ»ÑÑ‚Ğ½Ğ¾ Ğ·Ğ´Ğ¾Ñ€Ğ¾Ğ²/Ğ°, Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾ Ğ¾Ñ‡ĞµĞ½ÑŒ Ñ€Ğ°ÑĞºĞ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹"]];
const ADULT_HOBBIES = ["ğŸ”„ Ğ¡Ğ²Ğ¸Ğ½Ğ³ĞµÑ€ÑÑ‚Ğ²Ğ¾ (ÑÑ‚Ğ°Ğ¶ 5 Ğ»ĞµÑ‚)","ğŸ“¹ Ğ¡ÑŠÑ‘Ğ¼ĞºĞ° ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚Ğ° 18+","ğŸª¢ Ğ‘Ğ”Ğ¡Ğœ-Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸ĞºĞ¸","ğŸ’ ĞŸĞ¾Ğ»Ğ¸Ğ°Ğ¼Ğ¾Ñ€Ğ¸Ñ â€” Ğ¾Ğ´Ğ½Ğ¾Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ğ¾ 4 Ğ¿Ğ°Ñ€Ñ‚Ğ½Ñ‘Ñ€Ğ°","ğŸ­ Ğ Ğ¾Ğ»ĞµĞ²Ñ‹Ğµ Ğ¸Ğ³Ñ€Ñ‹ 18+","ğŸ¸ ĞŸĞ¾ÑĞµÑ‰ĞµĞ½Ğ¸Ğµ ĞºĞ»ÑƒĞ±Ğ¾Ğ² Ğ´Ğ»Ñ Ğ²Ğ·Ñ€Ğ¾ÑĞ»Ñ‹Ñ…","ğŸ“– ĞĞ°Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ ÑÑ€Ğ¾Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğ¹ Ğ»Ğ¸Ñ‚ĞµÑ€Ğ°Ñ‚ÑƒÑ€Ñ‹","ğŸº ĞšĞ¾Ğ»Ğ»ĞµĞºÑ†Ğ¸Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ÑÑ€Ğ¾Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğ³Ğ¾ Ğ¸ÑĞºÑƒÑÑÑ‚Ğ²Ğ°","ğŸ’ƒ Ğ¡Ñ‚Ñ€Ğ¸Ğ¿Ñ‚Ğ¸Ğ· Ğ´Ğ»Ñ ÑĞµĞ±Ñ â€” ĞµĞ¶ĞµĞ´Ğ½ĞµĞ²Ğ½Ğ°Ñ Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸ĞºĞ°","ğŸª ĞŸĞ¸ĞºĞ°Ğ¿-Ğ°Ñ€Ñ‚Ğ¸ÑÑ‚ Ñ Ğ¼ĞµÑ‚Ğ¾Ğ´Ğ¸ĞºĞ¾Ğ¹","ğŸŒ¶ï¸ ĞŸĞ¾Ğ¸ÑĞº Ğ¾ÑÑ‚Ñ€Ñ‹Ñ… Ğ¾Ñ‰ÑƒÑ‰ĞµĞ½Ğ¸Ğ¹","ğŸ° ĞĞ·Ğ°Ñ€Ñ‚Ğ½Ñ‹Ğµ Ğ¸Ğ³Ñ€Ñ‹ â€” Ğ¿Ğ¾ĞºĞµÑ€Ğ¸ÑÑ‚ (Ğ² Ğ´Ğ¾Ğ»Ğ³Ğ°Ñ…)","ğŸš¬ ĞšÑƒÑ€ĞµĞ½Ğ¸Ğµ, Ğ²Ñ‹Ğ¿Ğ¸Ğ²ĞºĞ° Ğ¸ Ñ„Ğ¸Ğ»Ğ¾ÑĞ¾Ñ„Ğ¸Ñ Ğ´Ğ¾ Ñ€Ğ°ÑÑĞ²ĞµÑ‚Ğ°","ğŸ’Œ Ğ¡ĞµĞºÑÑ‚Ğ¸Ğ½Ğ³ ĞºĞ°Ğº Ñ„Ğ¾Ñ€Ğ¼Ğ° Ğ¸ÑĞºÑƒÑÑÑ‚Ğ²Ğ°"];
const ADULT_BAGGAGE = ["ğŸ† ĞšĞ¾Ğ»Ğ»ĞµĞºÑ†Ğ¸Ñ Ğ¸Ğ· 47 Ğ¸Ğ³Ñ€ÑƒÑˆĞµĞº Ğ´Ğ»Ñ Ğ²Ğ·Ñ€Ğ¾ÑĞ»Ñ‹Ñ…","ğŸ’Š Ğ—Ğ°Ğ¿Ğ°Ñ Ğ²Ğ¸Ğ°Ğ³Ñ€Ñ‹ Ğ½Ğ° 10 Ğ»ĞµÑ‚","ğŸ€ ĞĞ°Ğ±Ğ¾Ñ€ Ğ‘Ğ”Ğ¡Ğœ","ğŸ›¡ï¸ 10 000 Ğ¿Ñ€ĞµĞ·ĞµÑ€Ğ²Ğ°Ñ‚Ğ¸Ğ²Ğ¾Ğ²","ğŸ’¿ ĞšĞ¾Ğ»Ğ»ĞµĞºÑ†Ğ¸Ñ ÑÑ€Ğ¾Ñ‚Ğ¸ĞºĞ¸ (3 Ğ¢Ğ‘)","ğŸ¾ Ğ¯Ñ‰Ğ¸Ğº ÑˆĞ°Ğ¼Ğ¿Ğ°Ğ½ÑĞºĞ¾Ğ³Ğ¾ Ğ¸ Ğ°Ñ„Ñ€Ğ¾Ğ´Ğ¸Ğ·Ğ¸Ğ°ĞºĞ¸","ğŸ‘— ĞšĞ¾Ğ»Ğ»ĞµĞºÑ†Ğ¸Ñ Ğ½Ğ¸Ğ¶Ğ½ĞµĞ³Ğ¾ Ğ±ĞµĞ»ÑŒÑ (200+ Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¹)","ğŸ“¸ ĞŸÑ€Ğ¾Ñ„ĞµÑÑĞ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ°Ñ ĞºĞ°Ğ¼ĞµÑ€Ğ° Ğ´Ğ»Ñ ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚Ğ°","ğŸ­ Ğ§ĞµĞ¼Ğ¾Ğ´Ğ°Ğ½ ĞºĞ¾ÑÑ‚ÑĞ¼Ğ¾Ğ² Ğ´Ğ»Ñ Ñ€Ğ¾Ğ»ĞµĞ²Ñ‹Ñ… Ğ¸Ğ³Ñ€","ğŸ’‹ Ğ¡ĞµĞºÑ-ĞºÑƒĞºĞ»Ğ° Ğ¿Ñ€ĞµĞ¼Ğ¸ÑƒĞ¼-ĞºĞ»Ğ°ÑÑĞ°","ğŸŒ¿ Ğ—Ğ°Ğ¿Ğ°Ñ Ğ·Ğ°Ğ¿Ñ€ĞµÑ‰Ñ‘Ğ½Ğ½Ñ‹Ñ… Ğ²ĞµÑ‰ĞµÑÑ‚Ğ² Â«Ğ´Ğ»Ñ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ¸ÑÂ»","ğŸƒ ĞšĞ¾Ğ»Ğ¾Ğ´Ğ° ĞºĞ°Ñ€Ñ‚ Ñ Â«Ğ·Ğ°Ğ´Ğ°Ğ½Ğ¸ÑĞ¼Ğ¸Â»","ğŸ  ĞšĞ»ÑÑ‡Ğ¸ Ğ¾Ñ‚ VIP-Ğ°Ğ¿Ğ°Ñ€Ñ‚Ğ°Ğ¼ĞµĞ½Ñ‚Ğ¾Ğ² Ñ Ğ´Ğ¶Ğ°ĞºÑƒĞ·Ğ¸","ğŸ’ Ğ—Ğ°Ğ¿Ğ°Ñ Ğ·Ğ¾Ğ»Ğ¾Ñ‚Ğ° Ğ¸ Ğ±Ñ€Ğ¸Ğ»Ğ»Ğ¸Ğ°Ğ½Ñ‚Ğ¾Ğ²"];
const ADULT_FACTS = ["ğŸ˜ ĞŸĞµÑ€ĞµÑĞ¿Ğ°Ğ»/Ğ° Ñ ĞºĞµĞ¼-Ñ‚Ğ¾ Ğ² ÑÑ‚Ğ¾Ğ¹ ĞºĞ¾Ğ¼Ğ½Ğ°Ñ‚Ğµ","ğŸ“± Ğ’ĞµĞ´Ñ‘Ñ‚ Ğ°Ğ½Ğ¾Ğ½Ğ¸Ğ¼Ğ½Ñ‹Ğ¹ OnlyFans Ñ 80 000 Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑÑ‡Ğ¸ĞºĞ¾Ğ²","ğŸ¤ Ğ—Ğ½Ğ°ĞµÑ‚ ĞºĞ¾Ğ¼Ğ¿Ñ€Ğ¾Ğ¼Ğ°Ñ‚ Ğ½Ğ° ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ Ğ¿Ñ€Ğ¸ÑÑƒÑ‚ÑÑ‚Ğ²ÑƒÑÑ‰ĞµĞ³Ğ¾","ğŸ’” Ğ Ğ°ÑÑÑ‚Ğ°Ğ»ÑÑ/Ğ°ÑÑŒ Ğ²Ñ‡ĞµÑ€Ğ° â€” ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾ Ğ½ĞµÑÑ‚Ğ°Ğ±Ğ¸Ğ»ĞµĞ½/Ğ°","ğŸ•µï¸ ĞĞ´Ğ½Ğ°Ğ¶Ğ´Ñ‹ ÑĞ¾Ğ±Ğ»Ğ°Ğ·Ğ½Ğ¸Ğ»/Ğ° Ğ°Ğ³ĞµĞ½Ñ‚Ğ° Ğ¤Ğ¡Ğ‘","ğŸ° ĞŸÑ€Ğ¾Ğ¸Ğ³Ñ€Ğ°Ğ»/Ğ° Ğ²ÑÑ‘ ÑĞ²Ğ¾Ñ‘ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ","ğŸ‘… ĞŸÑ€Ğ¾Ñ„ĞµÑÑĞ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ ÑĞ¾Ğ±Ğ»Ğ°Ğ·Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒ","ğŸ’’ Ğ¡Ğ¾ÑÑ‚Ğ¾Ğ¸Ñ‚ Ğ² Ñ‚Ğ°Ğ¹Ğ½Ğ¾Ğ¼ Ğ±Ñ€Ğ°ĞºĞµ Ñ Ğ´Ğ²ÑƒĞ¼Ñ Ğ»ÑĞ´ÑŒĞ¼Ğ¸ Ğ¾Ğ´Ğ½Ğ¾Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ğ¾","ğŸ” Ğ‘Ñ‹Ğ²ÑˆĞ¸Ğ¹/Ğ°Ñ Ğ¿Ğ¾Ñ€Ğ½Ğ¾Ğ·Ğ²ĞµĞ·Ğ´Ğ° â€” Ğ¿ÑĞµĞ²Ğ´Ğ¾Ğ½Ğ¸Ğ¼ Ğ¸Ğ·Ğ²ĞµÑÑ‚ĞµĞ½","ğŸŒ¹ Ğ‘Ñ‹Ğ»/Ğ° ÑĞ¾Ğ´ĞµÑ€Ğ¶Ğ°Ğ½ĞºĞ¾Ğ¹/Ğ¶Ğ¸Ğ³Ğ¾Ğ»Ğ¾ Ğ±Ğ¾Ğ³Ğ°Ñ‚Ğ¾Ğ³Ğ¾ Ğ¿Ğ¾Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ°","ğŸ ĞœĞ°ÑÑ‚ĞµÑ€ Ğ¼Ğ°Ğ½Ğ¸Ğ¿ÑƒĞ»ÑÑ†Ğ¸Ğ¹"];

const CARD_META = [
  { key:"gender_age",  icon:"ğŸ‘¤", label:"ĞŸĞ¾Ğ» Ğ¸ Ğ²Ğ¾Ğ·Ñ€Ğ°ÑÑ‚" },
  { key:"profession",  icon:"ğŸ’¼", label:"ĞŸÑ€Ğ¾Ñ„ĞµÑÑĞ¸Ñ" },
  { key:"health",      icon:"ğŸ¥", label:"Ğ—Ğ´Ğ¾Ñ€Ğ¾Ğ²ÑŒĞµ" },
  { key:"hobby",       icon:"ğŸ¯", label:"Ğ¥Ğ¾Ğ±Ğ±Ğ¸" },
  { key:"baggage",     icon:"ğŸ’", label:"Ğ‘Ğ°Ğ³Ğ°Ğ¶" },
  { key:"fact",        icon:"ğŸ¤«", label:"Ğ¡ĞµĞºÑ€ĞµÑ‚Ğ½Ñ‹Ğ¹ Ñ„Ğ°ĞºÑ‚" },
];

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RANKS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const RANKS = [
  { id:"supreme",    name:"Ğ’ĞµÑ€Ñ…Ğ¾Ğ²Ğ½Ñ‹Ğ¹ ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ¸Ñ€",        icon:"ğŸ‘‘",  color:"#e8810a", border:"rgba(232,129,10,.6)",  adminOnly:true, minGames:0 },
  { id:"architect",  name:"ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚Ğ¾Ñ€ ĞĞ¿Ğ¾ĞºĞ°Ğ»Ğ¸Ğ¿ÑĞ¸ÑĞ°",   icon:"â˜¢ï¸",  color:"#ff2444", border:"rgba(255,36,68,.5)",   adminOnly:false, minGames:100 },
  { id:"ghost",      name:"ĞŸÑ€Ğ¸Ğ·Ñ€Ğ°Ğº Ğ‘ÑƒĞ½ĞºĞµÑ€Ğ°",            icon:"ğŸ’€",  color:"#a855f7", border:"rgba(168,85,247,.5)", adminOnly:false, minGames:50 },
  { id:"veteran",    name:"Ğ’ĞµÑ‚ĞµÑ€Ğ°Ğ½",                    icon:"ğŸ›¡ï¸",  color:"#00cfff", border:"rgba(0,207,255,.5)",  adminOnly:false, minGames:25 },
  { id:"fighter",    name:"Ğ‘Ğ¾ĞµÑ†",                       icon:"âš”ï¸",  color:"#ffb03c", border:"rgba(255,176,60,.5)", adminOnly:false, minGames:10 },
  { id:"survivor",   name:"Ğ’Ñ‹Ğ¶Ğ¸Ğ²ÑˆĞ¸Ğ¹",                   icon:"ğŸª–",  color:"#1dff8e", border:"rgba(29,255,142,.5)", adminOnly:false, minGames:3 },
  { id:"recruit",    name:"ĞĞ¾Ğ²Ğ¾Ğ±Ñ€Ğ°Ğ½ĞµÑ†",                 icon:"ğŸŒ±",  color:"#5a5650", border:"rgba(90,86,80,.5)",   adminOnly:false, minGames:0 },
];

function getRank(user) {
  if (user.customRank) { const r = RANKS.find(r => r.id === user.customRank); if (r) return r; }
  if (user.isAdmin) return RANKS[0];
  const gp = user.gamesPlayed || 0;
  for (const r of RANKS.filter(r => !r.adminOnly)) { if (gp >= r.minGames) return r; }
  return RANKS[RANKS.length - 1];
}

function RankChip({ user, size = 9 }) {
  const r = getRank(user);
  return (
    <span className="rank-chip" style={{ fontSize:size, color:r.color, borderColor:r.border, background:r.border.replace(/[\d.]+\)$/, '0.08)') }}>
      {r.icon} {r.name}
    </span>
  );
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   UTILITIES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const rand = arr => arr[Math.floor(Math.random() * arr.length)];
const esc = s => String(s||'').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');

function genCode() {
  return Array.from({length:6}, () => "ABCDEFGHJKLMNPQRSTUVWXYZ23456789"[Math.floor(Math.random()*32)]).join('');
}

function makeCards(adult = false) {
  const h = adult ? rand(ADULT_HEALTH) : rand(HEALTH);
  return {
    gender_age: rand(GENDERS),
    profession: adult ? rand(ADULT_PROFESSIONS) : rand(PROFESSIONS),
    health:     `${h[0]} ${h[1]}`,
    hobby:      adult ? rand(ADULT_HOBBIES)    : rand(HOBBIES),
    baggage:    adult ? rand(ADULT_BAGGAGE)    : rand(BAGGAGE),
    fact:       adult ? rand(ADULT_FACTS)      : rand(FACTS),
  };
}

function processVotes(game) {
  const alive = Object.values(game.players).filter(p => !p.isEliminated);
  const tally = {};
  alive.forEach(p => { tally[p.userId] = 0; });
  Object.values(game.votes || {}).forEach(tid => {
    if (tid !== null && tid !== undefined && tally[tid] !== undefined) tally[tid]++;
  });
  let maxV = 0; let candidates = [];
  Object.entries(tally).forEach(([uid, cnt]) => {
    if (cnt > maxV) { maxV = cnt; candidates = [uid]; }
    else if (cnt === maxV && cnt > 0) candidates.push(uid);
  });
  if (!candidates.length || maxV === 0) {
    game.phase = 'playing'; game.round++; game.votes = {}; game.revealedThisRound = {}; game.lastEliminated = null;
    return;
  }
  const elimUid = rand(candidates);
  const ep = game.players[elimUid];
  ep.isEliminated = true;
  if (!game.eliminated) game.eliminated = [];
  game.eliminated.push(elimUid);
  game.lastEliminated = { userId:ep.userId, name:ep.name, allCards:{ ...ep.cards } };
  const aliveAfter = Object.values(game.players).filter(p => !p.isEliminated);
  if (aliveAfter.length <= game.bunkerSpots) { game.phase = 'finished'; }
  else { game.phase = 'playing'; game.round++; game.votes = {}; game.revealedThisRound = {}; }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TOAST
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function useToast() {
  const [toast, setToast] = useState({ msg:'', type:'' });
  const timer = useRef();
  const showToast = useCallback((msg, type='') => {
    setToast({ msg, type });
    clearTimeout(timer.current);
    timer.current = setTimeout(() => setToast({ msg:'', type:'' }), 3000);
  }, []);
  return [toast, showToast];
}

function ToastEl({ toast }) {
  return <div className={`toast${toast.msg ? ' show' : ''} ${toast.type}`}>{toast.msg}</div>;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SMALL COMPONENTS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function Btn({ children, onClick, cls='btn-acc', small, disabled, style }) {
  return (
    <button className={`btn ${cls}${small?' btn-sm':''}`} onClick={onClick} disabled={disabled} style={style}>
      {children}
    </button>
  );
}

function HazardBar({ red }) {
  return <div className={`hz${red?' red':''}`} />;
}

function BackBtn({ onClick }) {
  return (
    <button className="btn btn-ghost btn-sm" style={{ width:'auto', clipPath:'none', padding:'5px 10px', fontSize:13, letterSpacing:2 }} onClick={onClick}>
      â—€ ĞĞĞ—ĞĞ”
    </button>
  );
}

function Spinner() { return <div className="spinner" />; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   AUTH SCREEN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function AuthScreen({ onLogin, showToast }) {
  const [tab, setTab] = useState('login');
  const [username, setUsername] = useState('');
  const [password, setPassword] = useState('');
  const [loading, setLoading] = useState(false);

  const handle = async () => {
    const u = username.trim().toLowerCase();
    const p = password.trim();
    if (u.length < 2 || u.length > 20) return showToast('Ğ˜Ğ¼Ñ: 2â€“20 ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ¾Ğ²', 'err');
    if (p.length < 3) return showToast('ĞŸĞ°Ñ€Ğ¾Ğ»ÑŒ: Ğ¼Ğ¸Ğ½. 3 ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ°', 'err');
    if (!/^[a-zĞ°-ÑÑ‘A-ZĞ-Ğ¯Ğ0-9_-]+$/i.test(u)) return showToast('Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ Ğ±ÑƒĞºĞ²Ñ‹, Ñ†Ğ¸Ñ„Ñ€Ñ‹, _ Ğ¸ -', 'err');
    setLoading(true);
    try {
      if (tab === 'register') {
        const existing = await DB.getUser(u);
        if (existing) { setLoading(false); return showToast('Ğ˜Ğ¼Ñ ÑƒĞ¶Ğµ Ğ·Ğ°Ğ½ÑÑ‚Ğ¾', 'err'); }
        const allUsers = await DB.getAllUsers();
        const isFirst = Object.keys(allUsers).length === 0;
        const newUser = {
          userId: u, username: u, password: p,
          displayName: username.trim(),
          isAdmin: isFirst,
          customRank: isFirst ? 'supreme' : null,
          gamesPlayed: 0, gamesWon: 0, gamesEliminated: 0,
          createdAt: Date.now(),
        };
        await DB.setUser(u, newUser);
        showToast('âœ… ĞĞºĞºĞ°ÑƒĞ½Ñ‚ ÑĞ¾Ğ·Ğ´Ğ°Ğ½!', 'ok');
        onLogin(newUser);
      } else {
        const user = await DB.getUser(u);
        if (!user || user.password !== p) { setLoading(false); return showToast('ĞĞµĞ²ĞµÑ€Ğ½Ñ‹Ğ¹ Ğ»Ğ¾Ğ³Ğ¸Ğ½ Ğ¸Ğ»Ğ¸ Ğ¿Ğ°Ñ€Ğ¾Ğ»ÑŒ', 'err'); }
        onLogin(user);
      }
    } catch(e) { showToast('ĞÑˆĞ¸Ğ±ĞºĞ° ÑĞ¾ĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ¸Ñ. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒÑ‚Ğµ Firebase config.', 'err'); console.error(e); }
    setLoading(false);
  };

  return (
    <div className="screen" style={{ justifyContent:'center', alignItems:'center', padding:'0 20px', gap:0 }}>
      <div style={{ fontSize:64, animation:'glow 2s ease infinite', marginBottom:8 }}>â˜¢</div>
      <div style={{ fontFamily:"'Bebas Neue',sans-serif", fontSize:72, letterSpacing:10, color:'var(--acc)', textShadow:'0 0 40px rgba(232,129,10,.4)', animation:'glitch 5s steps(1) infinite' }}>Ğ‘Ğ£ĞĞšĞ•Ğ </div>
      <div className="mono" style={{ fontSize:10, letterSpacing:4, color:'var(--dim)', marginBottom:28 }}>ĞĞŸĞĞšĞĞ›Ğ˜ĞŸĞ¡Ğ˜Ğ¡ ĞĞĞ¡Ğ¢Ğ£ĞŸĞ˜Ğ›. ĞĞ¢ Ğ¤Ğ˜Ğ—Ğ¢Ğ•Ğ¥Ğ</div>

      <div style={{ width:'100%', maxWidth:360, background:'var(--bg2)', border:'1px solid var(--brd)', padding:20, position:'relative' }}>
        <div style={{ position:'absolute', top:-1, left:-1, width:10, height:10, borderTop:'2px solid var(--acc)', borderLeft:'2px solid var(--acc)' }} />
        <div style={{ position:'absolute', bottom:-1, right:-1, width:10, height:10, borderBottom:'2px solid var(--acc)', borderRight:'2px solid var(--acc)' }} />
        <div className="tab-row">
          <button className={`tab-btn${tab==='login'?' active':''}`} onClick={() => setTab('login')}>Ğ’ĞĞ™Ğ¢Ğ˜</button>
          <button className={`tab-btn${tab==='register'?' active':''}`} onClick={() => setTab('register')}>Ğ Ğ•Ğ“Ğ˜Ğ¡Ğ¢Ğ ĞĞ¦Ğ˜Ğ¯</button>
        </div>
        <input className="inp" placeholder="Ğ˜Ğ¼Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ" value={username} onChange={e=>setUsername(e.target.value)} maxLength={20} autoComplete="off" />
        <input className="inp" type="password" placeholder="ĞŸĞ°Ñ€Ğ¾Ğ»ÑŒ" value={password} onChange={e=>setPassword(e.target.value)} onKeyDown={e=>e.key==='Enter'&&handle()} />
        <Btn onClick={handle} disabled={loading}>{loading ? 'â³ Ğ—ĞĞ“Ğ Ğ£Ğ—ĞšĞâ€¦' : tab==='login' ? 'âš¡ Ğ’ĞĞ™Ğ¢Ğ˜ Ğ’ Ğ‘Ğ£ĞĞšĞ•Ğ ' : 'ğŸ”‘ Ğ¡ĞĞ—Ğ”ĞĞ¢Ğ¬ ĞĞšĞšĞĞ£ĞĞ¢'}</Btn>
        {tab === 'register' && (
          <div className="mono" style={{ fontSize:9, color:'var(--dim)', marginTop:10, textAlign:'center', letterSpacing:1 }}>
            ĞŸĞµÑ€Ğ²Ñ‹Ğ¹ Ğ·Ğ°Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚ Ğ¿Ñ€Ğ°Ğ²Ğ° Ğ°Ğ´Ğ¼Ğ¸Ğ½Ğ¸ÑÑ‚Ñ€Ğ°Ñ‚Ğ¾Ñ€Ğ°
          </div>
        )}
      </div>
    </div>
  );
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   HOME SCREEN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function HomeScreen({ user, onNavigate }) {
  const rank = getRank(user);
  return (
    <div className="scroller" style={{ paddingTop:8 }}>
      {/* Welcome card */}
      <div style={{ textAlign:'center', padding:'20px 14px', background:'var(--bg2)', border:'1px solid var(--brd)', marginBottom:14, position:'relative' }}>
        <div style={{ position:'absolute', top:-1, left:-1, width:10, height:10, borderTop:'2px solid var(--acc)', borderLeft:'2px solid var(--acc)' }} />
        <div style={{ position:'absolute', bottom:-1, right:-1, width:10, height:10, borderBottom:'2px solid var(--acc)', borderRight:'2px solid var(--acc)' }} />
        <div style={{ fontSize:52, marginBottom:8 }}>{rank.icon}</div>
        <div style={{ fontFamily:"'Bebas Neue',sans-serif", fontSize:26, letterSpacing:3, color:'var(--txt)' }}>{user.displayName || user.username}</div>
        <div className="mono" style={{ fontSize:10, color:'var(--dim)', letterSpacing:2, marginBottom:8 }}>@{user.username}</div>
        <RankChip user={user} size={10} />
        <div style={{ display:'flex', justifyContent:'center', gap:28, marginTop:14 }}>
          {[['gamesPlayed','Ğ˜Ğ“Ğ ','var(--acc)'],['gamesWon','ĞŸĞĞ‘Ğ•Ğ”','var(--grn)'],['gamesEliminated','Ğ’Ğ«Ğ‘Ğ«Ğ›','var(--red2)']].map(([k,l,c]) => (
            <div key={k} style={{ textAlign:'center' }}>
              <div style={{ fontFamily:"'Bebas Neue',sans-serif", fontSize:28, color:c }}>{user[k]||0}</div>
              <div className="mono" style={{ fontSize:8, color:'var(--dim)', letterSpacing:2 }}>{l}</div>
            </div>
          ))}
        </div>
      </div>

      <div className="lbl">Ğ”Ğ•Ğ™Ğ¡Ğ¢Ğ’Ğ˜Ğ¯</div>
      <div style={{ display:'flex', flexDirection:'column', gap:8, marginBottom:14 }}>
        <Btn onClick={() => onNavigate('createGame')}>â˜¢ Ğ¡ĞĞ—Ğ”ĞĞ¢Ğ¬ Ğ˜Ğ“Ğ Ğ£</Btn>
        <Btn onClick={() => onNavigate('joinGame')} cls="btn-ghost">ğŸ”‘ Ğ’ĞĞ™Ğ¢Ğ˜ ĞŸĞ ĞšĞĞ”Ğ£</Btn>
        <div className="btn-row">
          <Btn onClick={() => onNavigate('leaderboard')} cls="btn-cyan" small>ğŸ† Ğ Ğ•Ğ™Ğ¢Ğ˜ĞĞ“</Btn>
          <Btn onClick={() => onNavigate('profile')} cls="btn-ghost" small>ğŸ‘¤ ĞŸĞ ĞĞ¤Ğ˜Ğ›Ğ¬</Btn>
        </div>
        {user.isAdmin && <Btn onClick={() => onNavigate('admin')} cls="btn-purp">ğŸ” ĞŸĞĞĞ•Ğ›Ğ¬ ĞĞ”ĞœĞ˜ĞĞ˜Ğ¡Ğ¢Ğ ĞĞ¢ĞĞ Ğ</Btn>}
      </div>

      <div className="lbl">Ğ¡Ğ˜Ğ¡Ğ¢Ğ•ĞœĞ Ğ—Ğ’ĞĞĞ˜Ğ¯</div>
      {RANKS.filter(r => !r.adminOnly || user.isAdmin).map(r => {
        const cur = getRank(user).id === r.id;
        return (
          <div key={r.id} style={{ display:'flex', alignItems:'center', gap:10, padding:'8px 12px', background:'var(--bg2)', border:`1px solid ${cur ? r.border : 'var(--brd)'}`, marginBottom:4, opacity:cur ? 1 : .45 }}>
            <span style={{ fontSize:18 }}>{r.icon}</span>
            <div style={{ flex:1 }}>
              <div className="mono" style={{ fontSize:10, color:r.color }}>{r.name}</div>
              <div className="mono" style={{ fontSize:8, color:'var(--dim)' }}>{r.adminOnly ? 'Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ Ğ´Ğ»Ñ Ğ°Ğ´Ğ¼Ğ¸Ğ½Ğ¸ÑÑ‚Ñ€Ğ°Ñ‚Ğ¾Ñ€Ğ¾Ğ²' : r.minGames === 0 ? 'ĞĞ°Ñ‡Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ' : `${r.minGames}+ Ğ¸Ğ³Ñ€`}</div>
            </div>
            {cur && <span className="pbadge pbadge-acc">Ğ¢Ğ•ĞšĞ£Ğ©Ğ•Ğ•</span>}
          </div>
        );
      })}
    </div>
  );
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PROFILE SCREEN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function ProfileScreen({ user, onBack, showToast, onUpdateUser }) {
  const [editName, setEditName] = useState(user.displayName || user.username);
  const [saving, setSaving] = useState(false);
  const rank = getRank(user);
  const winRate = user.gamesPlayed ? Math.round((user.gamesWon / user.gamesPlayed) * 100) : 0;

  const saveName = async () => {
    const n = editName.trim();
    if (n.length < 2) return showToast('ĞœĞ¸Ğ½. 2 ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ°', 'err');
    setSaving(true);
    await DB.updateUser(user.username, { displayName: n });
    onUpdateUser({ ...user, displayName: n });
    showToast('âœ… Ğ˜Ğ¼Ñ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¾!', 'ok');
    setSaving(false);
  };

  return (
    <div className="screen anim-in">
      <HazardBar />
      <div className="topbar">
        <BackBtn onClick={onBack} />
        <div className="topbar-title">ĞŸĞ ĞĞ¤Ğ˜Ğ›Ğ¬</div>
      </div>
      <div className="scroller">
        <div style={{ textAlign:'center', padding:'24px 0 16px' }}>
          <div style={{ fontSize:72, animation:'glow 3s ease infinite', marginBottom:8 }}>{rank.icon}</div>
          <div style={{ fontFamily:"'Bebas Neue',sans-serif", fontSize:28, letterSpacing:3 }}>{user.displayName || user.username}</div>
          <div className="mono" style={{ fontSize:10, color:'var(--dim)', letterSpacing:2, marginBottom:10 }}>@{user.username}</div>
          <RankChip user={user} size={11} />
          {user.isAdmin && <div style={{ marginTop:8 }}><span className="pbadge pbadge-purp">ĞĞ”ĞœĞ˜ĞĞ˜Ğ¡Ğ¢Ğ ĞĞ¢ĞĞ </span></div>}
        </div>

        <div className="stat-grid">
          {[['Ğ˜Ğ³Ñ€Ñ‹ ÑÑ‹Ğ³Ñ€Ğ°Ğ½Ñ‹', user.gamesPlayed||0, 'var(--acc)'],
            ['ĞŸĞ¾Ğ±ĞµĞ´Ñ‹', user.gamesWon||0, 'var(--grn)'],
            ['Ğ’Ñ‹Ğ±Ñ‹Ğ²Ğ°Ğ½Ğ¸Ğ¹', user.gamesEliminated||0, 'var(--red2)'],
            ['% Ğ¿Ğ¾Ğ±ĞµĞ´', winRate+'%', 'var(--cyn)']].map(([l,v,c]) => (
            <div key={l} className="stat-box">
              <div className="stat-val" style={{ color:c }}>{v}</div>
              <div className="stat-lbl">{l}</div>
            </div>
          ))}
        </div>

        <div className="lbl">Ğ˜Ğ—ĞœĞ•ĞĞ˜Ğ¢Ğ¬ Ğ˜ĞœĞ¯</div>
        <input className="inp" value={editName} onChange={e=>setEditName(e.target.value)} maxLength={20} placeholder="ĞÑ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶Ğ°ĞµĞ¼Ğ¾Ğµ Ğ¸Ğ¼Ñ" />
        <Btn onClick={saveName} disabled={saving || editName.trim() === (user.displayName||user.username)}>
          {saving ? 'â³ Ğ¡ĞĞ¥Ğ ĞĞĞ•ĞĞ˜Ğ•â€¦' : 'ğŸ’¾ Ğ¡ĞĞ¥Ğ ĞĞĞ˜Ğ¢Ğ¬ Ğ˜ĞœĞ¯'}
        </Btn>

        <div className="lbl" style={{ marginTop:16 }}>ĞŸĞ ĞĞ“Ğ Ğ•Ğ¡Ğ¡ Ğ—Ğ’ĞĞĞ˜Ğ¯</div>
        {RANKS.filter(r=>!r.adminOnly).map((r, i) => {
          const nextRank = RANKS.filter(rr=>!rr.adminOnly)[i-1];
          const isCurrent = getRank(user).id === r.id;
          const reached = (user.gamesPlayed||0) >= r.minGames;
          const pct = nextRank ? Math.min(100, Math.round(((user.gamesPlayed||0)-r.minGames)/(nextRank.minGames-r.minGames)*100)) : 100;
          return (
            <div key={r.id} style={{ marginBottom:8, opacity:reached?1:.4 }}>
              <div style={{ display:'flex', alignItems:'center', gap:8, marginBottom:4 }}>
                <span>{r.icon}</span>
                <span className="mono" style={{ fontSize:9, color:reached?r.color:'var(--dim)', flex:1 }}>{r.name}</span>
                {isCurrent && <span className="pbadge pbadge-acc" style={{ fontSize:7 }}>Ğ¡Ğ•Ğ™Ğ§ĞĞ¡</span>}
                <span className="mono" style={{ fontSize:8, color:'var(--dim)' }}>{r.minGames}+</span>
              </div>
              {isCurrent && nextRank && (
                <div style={{ height:3, background:'var(--bg3)', borderRadius:2, overflow:'hidden' }}>
                  <div style={{ height:'100%', width:`${pct}%`, background:r.color, transition:'.5s' }} />
                </div>
              )}
            </div>
          );
        })}
      </div>
    </div>
  );
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LEADERBOARD
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function LeaderboardScreen({ currentUser, onBack }) {
  const [users, setUsers] = useState([]);
  const [loading, setLoading] = useState(true);
  const [sortBy, setSortBy] = useState('gamesWon');

  const load = async (key) => {
    setLoading(true);
    const all = await DB.getAllUsers();
    setUsers(Object.values(all).sort((a,b) => (b[key]||0) - (a[key]||0)));
    setLoading(false);
  };

  useEffect(() => { load('gamesWon'); }, []);

  const medals = ['ğŸ¥‡','ğŸ¥ˆ','ğŸ¥‰'];

  return (
    <div className="screen anim-in">
      <HazardBar />
      <div className="topbar">
        <BackBtn onClick={onBack} />
        <div className="topbar-title">Ğ Ğ•Ğ™Ğ¢Ğ˜ĞĞ“</div>
      </div>
      <div className="scroller">
        <div className="tab-row">
          {[['gamesWon','ĞŸĞĞ‘Ğ•Ğ”Ğ«'],['gamesPlayed','Ğ˜Ğ“Ğ Ğ«'],['gamesEliminated','Ğ’Ğ«Ğ‘Ğ«Ğ’ĞĞĞ˜Ğ¯']].map(([k,l]) => (
            <button key={k} className={`tab-btn${sortBy===k?' active':''}`} onClick={() => { setSortBy(k); load(k); }}>{l}</button>
          ))}
        </div>
        {loading ? <Spinner /> : users.map((u, i) => {
          const isMe = u.username === currentUser.username;
          return (
            <div key={u.username} className={`lb-row${isMe?' me':''}`}>
              <div className={`rank-num${i<3?' top':''}`}>{medals[i] || (i+1)}</div>
              <div style={{ flex:1 }}>
                <div style={{ display:'flex', alignItems:'center', gap:6, marginBottom:4 }}>
                  <span style={{ fontSize:15, fontWeight:700 }}>{u.displayName || u.username}</span>
                  {isMe && <span className="pbadge pbadge-cyn" style={{ fontSize:7 }}>Ğ’Ğ«</span>}
                </div>
                <RankChip user={u} />
              </div>
              <div style={{ textAlign:'right' }}>
                <div style={{ fontFamily:"'Bebas Neue',sans-serif", fontSize:24, color:sortBy==='gamesWon'?'var(--grn)':sortBy==='gamesEliminated'?'var(--red2)':'var(--acc)' }}>{u[sortBy]||0}</div>
                <div className="mono" style={{ fontSize:8, color:'var(--dim)' }}>{sortBy==='gamesWon'?'Ğ¿Ğ¾Ğ±ĞµĞ´':sortBy==='gamesPlayed'?'Ğ¸Ğ³Ñ€':'Ğ²Ñ‹Ğ±Ñ‹Ğ²Ğ°Ğ½Ğ¸Ğ¹'}</div>
              </div>
            </div>
          );
        })}
      </div>
    </div>
  );
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ADMIN PANEL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function AdminScreen({ currentUser, onBack, showToast }) {
  const [tab, setTab] = useState('users');
  const [users, setUsers] = useState({});
  const [games, setGames] = useState({});
  const [loading, setLoading] = useState(true);

  const load = async () => {
    const [u, g] = await Promise.all([DB.getAllUsers(), DB.getAllGames()]);
    setUsers(u); setGames(g); setLoading(false);
  };
  useEffect(() => { load(); }, []);

  const setRank = async (uname, rankId) => {
    const patch = { customRank: rankId || null };
    if (rankId === 'supreme') patch.isAdmin = true;
    await DB.updateUser(uname, patch);
    setUsers(prev => ({ ...prev, [uname]: { ...prev[uname], ...patch } }));
    showToast('âœ… Ğ—Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¾!', 'ok');
  };

  const toggleAdmin = async (uname) => {
    if (uname === currentUser.username) return showToast('ĞĞµĞ»ÑŒĞ·Ñ ÑĞ½ÑÑ‚ÑŒ Ñ ÑĞµĞ±Ñ', 'err');
    const u = users[uname];
    const newAdmin = !u.isAdmin;
    const patch = { isAdmin: newAdmin, customRank: newAdmin ? 'supreme' : (u.customRank === 'supreme' ? null : u.customRank) };
    await DB.updateUser(uname, patch);
    setUsers(prev => ({ ...prev, [uname]: { ...prev[uname], ...patch } }));
    showToast(newAdmin ? 'âœ… ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½ Ğ°Ğ´Ğ¼Ğ¸Ğ½Ğ¾Ğ¼' : 'âœ… ĞŸÑ€Ğ°Ğ²Ğ° ÑĞ½ÑÑ‚Ñ‹', 'ok');
  };

  const deleteUser = async (uname) => {
    if (uname === currentUser.username) return showToast('ĞĞµĞ»ÑŒĞ·Ñ ÑƒĞ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ ÑĞµĞ±Ñ', 'err');
    if (!confirm(`Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ @${uname}?`)) return;
    await DB.deleteUser(uname);
    setUsers(prev => { const n = {...prev}; delete n[uname]; return n; });
    showToast('âœ… ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ ÑƒĞ´Ğ°Ğ»Ñ‘Ğ½', 'ok');
  };

  const endGame = async (gid) => {
    await DB.updateGame(gid, { phase:'finished' });
    setGames(prev => ({ ...prev, [gid]: { ...prev[gid], phase:'finished' } }));
    showToast('âœ… Ğ˜Ğ³Ñ€Ğ° Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ°', 'ok');
  };

  const active = Object.values(games).filter(g => g.phase !== 'finished');

  return (
    <div className="screen anim-in">
      <HazardBar />
      <div className="topbar">
        <BackBtn onClick={onBack} />
        <div className="topbar-title" style={{ color:'var(--purp)' }}>ğŸ” ĞĞ”ĞœĞ˜ĞĞ˜Ğ¡Ğ¢Ğ ĞĞ¢ĞĞ </div>
      </div>
      <div className="scroller">
        <div style={{ display:'grid', gridTemplateColumns:'1fr 1fr 1fr', gap:8, marginBottom:12 }}>
          {[[Object.keys(users).length,'Ğ˜Ğ“Ğ ĞĞšĞ˜','var(--acc)'],[active.length,'ĞĞšĞ¢Ğ˜Ğ’ĞĞ«Ğ•','var(--grn)'],[Object.keys(games).length,'Ğ’Ğ¡Ğ•Ğ“Ğ Ğ˜Ğ“Ğ ','var(--dim)']].map(([v,l,c]) => (
            <div key={l} className="stat-box">
              <div className="stat-val" style={{ fontSize:24, color:c }}>{v}</div>
              <div className="stat-lbl">{l}</div>
            </div>
          ))}
        </div>
        <div className="tab-row">
          <button className={`tab-btn${tab==='users'?' active':''}`} onClick={() => setTab('users')}>Ğ˜Ğ“Ğ ĞĞšĞ˜</button>
          <button className={`tab-btn${tab==='games'?' active':''}`} onClick={() => setTab('games')}>Ğ˜Ğ“Ğ Ğ«</button>
        </div>
        {loading ? <Spinner /> : tab === 'users' ? (
          Object.values(users).map(u => (
            <div key={u.username} className="admin-row">
              <div style={{ flex:'1 1 130px', minWidth:0 }}>
                <div style={{ display:'flex', alignItems:'center', gap:6, marginBottom:4, flexWrap:'wrap' }}>
                  <span style={{ fontWeight:700, fontSize:14 }}>{u.displayName || u.username}</span>
                  {u.isAdmin && <span className="pbadge pbadge-purp" style={{ fontSize:7 }}>ADMIN</span>}
                  {u.username===currentUser.username && <span className="pbadge pbadge-cyn" style={{ fontSize:7 }}>Ğ’Ğ«</span>}
                </div>
                <div className="mono" style={{ fontSize:8, color:'var(--dim)' }}>@{u.username} Â· {u.gamesPlayed||0} Ğ¸Ğ³Ñ€ Â· {u.gamesWon||0} Ğ¿Ğ¾Ğ±ĞµĞ´</div>
                <div style={{ marginTop:4 }}><RankChip user={u} /></div>
              </div>
              <div style={{ display:'flex', gap:6, flexWrap:'wrap', alignItems:'center' }}>
                <select className="sel" style={{ width:'auto', padding:'4px 8px', fontSize:11, marginBottom:0 }}
                  value={u.customRank || 'auto'}
                  onChange={e => setRank(u.username, e.target.value === 'auto' ? null : e.target.value)}>
                  <option value="auto">ĞĞ²Ñ‚Ğ¾ ({getRank(u).name})</option>
                  {RANKS.map(r => <option key={r.id} value={r.id}>{r.icon} {r.name}</option>)}
                </select>
                {u.username !== currentUser.username && <>
                  <button onClick={() => toggleAdmin(u.username)}
                    style={{ background:u.isAdmin?'rgba(196,18,48,.2)':'rgba(168,85,247,.15)', border:`1px solid ${u.isAdmin?'var(--red2)':'rgba(168,85,247,.4)'}`, color:u.isAdmin?'var(--red2)':'var(--purp)', fontFamily:"'Share Tech Mono',monospace", fontSize:9, padding:'4px 8px', cursor:'pointer', letterSpacing:1, whiteSpace:'nowrap' }}>
                    {u.isAdmin ? 'Ğ¡ĞĞ¯Ğ¢Ğ¬' : 'Ğ¡Ğ”Ğ•Ğ›ĞĞ¢Ğ¬ ĞĞ”ĞœĞ˜ĞĞĞœ'}
                  </button>
                  <button onClick={() => deleteUser(u.username)}
                    style={{ background:'rgba(196,18,48,.1)', border:'1px solid var(--dbrd)', color:'var(--red2)', fontFamily:"'Share Tech Mono',monospace", fontSize:11, padding:'4px 8px', cursor:'pointer' }}>âœ•</button>
                </>}
              </div>
            </div>
          ))
        ) : (
          Object.values(games).length === 0 ? (
            <div className="mono" style={{ textAlign:'center', padding:24, color:'var(--dim)', fontSize:10, letterSpacing:2 }}>ĞĞ•Ğ¢ Ğ˜Ğ“Ğ </div>
          ) : Object.values(games).sort((a,b)=>b.createdAt-a.createdAt).map(g => (
            <div key={g.id} className="admin-row">
              <div style={{ flex:1 }}>
                <div style={{ display:'flex', gap:6, alignItems:'center', marginBottom:4 }}>
                  <span className="mono" style={{ fontSize:11, color:'var(--acc)', letterSpacing:2 }}>{g.id}</span>
                  <span className="pbadge" style={{ fontSize:7, color:g.phase==='finished'?'var(--dim)':g.phase==='voting'?'var(--red2)':'var(--grn)', borderColor:g.phase==='finished'?'var(--brd)':g.phase==='voting'?'var(--dbrd)':'rgba(29,255,142,.4)' }}>
                    {g.phase.toUpperCase()}
                  </span>
                </div>
                <div className="mono" style={{ fontSize:8, color:'var(--dim)' }}>
                  {g.apocalypse?.emoji} {g.apocalypse?.name} Â· {Object.keys(g.players||{}).length} Ğ¸Ğ³Ñ€Ğ¾ĞºĞ¾Ğ² Â· Ğ Ğ°ÑƒĞ½Ğ´ {g.round}
                </div>
              </div>
              {g.phase !== 'finished' && (
                <button onClick={() => endGame(g.id)} style={{ background:'rgba(196,18,48,.1)', border:'1px solid var(--dbrd)', color:'var(--red2)', fontFamily:"'Share Tech Mono',monospace", fontSize:9, padding:'4px 8px', cursor:'pointer', letterSpacing:1 }}>
                  Ğ—ĞĞ’Ğ•Ğ Ğ¨Ğ˜Ğ¢Ğ¬
                </button>
              )}
            </div>
          ))
        )}
      </div>
    </div>
  );
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CREATE GAME
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function CreateGameScreen({ user, onBack, onCreated, showToast }) {
  const [selAp, setSelAp] = useState(null);
  const [adult, setAdult] = useState(false);
  const [loading, setLoading] = useState(false);

  const create = async () => {
    if (!selAp) return showToast('Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ ÑÑ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¹', 'err');
    setLoading(true);
    const gid = genCode();
    const ap = selAp === 'random' ? rand(APOCALYPSES) : APOCALYPSES.find(a => a.id === selAp);
    const game = {
      id: gid, creatorId: user.username, adultMode: adult, apocalypse: ap,
      phase: 'lobby', round: 1, bunkerSpots: 1,
      players: {
        [user.username]: { userId:user.username, username:user.username, name:user.displayName||user.username, cards:null, revealed:[], isEliminated:false }
      },
      votes: {}, revealedThisRound: {}, eliminated: [], lastEliminated: null, createdAt: Date.now(),
    };
    await DB.setGame(gid, game);
    setLoading(false);
    onCreated(gid);
  };

  return (
    <div className="screen anim-in">
      <HazardBar />
      <div className="topbar">
        <BackBtn onClick={onBack} />
        <div className="topbar-title">ĞĞĞ’ĞĞ¯ Ğ˜Ğ“Ğ Ğ</div>
      </div>
      <div className="scroller">
        <div className="lbl">Ğ’Ğ«Ğ‘Ğ•Ğ Ğ˜Ğ¢Ğ• Ğ¡Ğ¦Ğ•ĞĞĞ Ğ˜Ğ™</div>
        <div className={`ap-opt${selAp==='random'?' sel':''}`} onClick={() => setSelAp('random')}>
          <span style={{ fontSize:28 }}>ğŸ²</span>
          <div>
            <div style={{ fontFamily:"'Bebas Neue',sans-serif", fontSize:18, letterSpacing:2 }}>Ğ¡Ğ›Ğ£Ğ§ĞĞ™ĞĞ«Ğ™ Ğ¡Ğ¦Ğ•ĞĞĞ Ğ˜Ğ™</div>
            <div style={{ fontSize:11, color:'var(--dim)' }}>Ğ¡ÑƒĞ´ÑŒĞ±Ğ° Ñ€ĞµÑˆĞ¸Ñ‚ Ğ·Ğ° Ğ²Ğ°Ñ</div>
          </div>
        </div>
        {APOCALYPSES.map(ap => (
          <div key={ap.id} className={`ap-opt${selAp===ap.id?' sel':''}`} onClick={() => setSelAp(ap.id)}>
            <span style={{ fontSize:28 }}>{ap.emoji}</span>
            <div style={{ flex:1 }}>
              <div style={{ fontFamily:"'Bebas Neue',sans-serif", fontSize:18, letterSpacing:2 }}>{ap.name}</div>
              <div style={{ fontSize:11, color:'var(--dim)', lineHeight:1.4 }}>{ap.description.slice(0,80)}â€¦</div>
              <div style={{ fontSize:10, color:'var(--acc)', marginTop:4 }}>ğŸ¯ {ap.victory}</div>
            </div>
          </div>
        ))}
        <div className="lbl" style={{ marginTop:12 }}>Ğ Ğ•Ğ–Ğ˜Ğœ</div>
        <div className="toggle-row" onClick={() => setAdult(!adult)}>
          <div className={`toggle-track${adult?' on':''}`}><div className="toggle-thumb" /></div>
          <div>
            <div className="mono" style={{ fontSize:9, letterSpacing:2, color:'#ff6b9d' }}>ğŸ” Ğ’Ğ—Ğ ĞĞ¡Ğ›Ğ«Ğ™ Ğ Ğ•Ğ–Ğ˜Ğœ (18+)</div>
            <div className="mono" style={{ fontSize:8, color:'var(--dim)', marginTop:2 }}>Ğ¡Ğ¿ĞµÑ†Ğ¸Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ ĞºĞ°Ñ€Ñ‚Ñ‹ Ğ´Ğ»Ñ Ğ²Ğ·Ñ€Ğ¾ÑĞ»Ğ¾Ğ¹ ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸</div>
          </div>
        </div>
      </div>
      <div className="fixbot">
        <Btn onClick={create} disabled={loading || !selAp}>
          {loading ? 'â³ Ğ¡ĞĞ—Ğ”ĞĞĞ˜Ğ•â€¦' : 'â˜¢ Ğ¡ĞĞ—Ğ”ĞĞ¢Ğ¬ Ğ˜Ğ“Ğ Ğ£'}
        </Btn>
      </div>
    </div>
  );
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   JOIN GAME
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function JoinGameScreen({ user, onBack, onJoined, showToast }) {
  const [code, setCode] = useState('');
  const [loading, setLoading] = useState(false);

  const join = async () => {
    const c = code.trim().toUpperCase();
    if (c.length !== 6) return showToast('ĞšĞ¾Ğ´: Ñ€Ğ¾Ğ²Ğ½Ğ¾ 6 ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ¾Ğ²', 'err');
    setLoading(true);
    const game = await DB.getGame(c);
    if (!game) { setLoading(false); return showToast('Ğ˜Ğ³Ñ€Ğ° Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½Ğ°', 'err'); }
    if (game.phase !== 'lobby') { setLoading(false); return showToast('Ğ˜Ğ³Ñ€Ğ° ÑƒĞ¶Ğµ Ğ½Ğ°Ñ‡Ğ°Ğ»Ğ°ÑÑŒ', 'err'); }
    if (game.players?.[user.username]) { setLoading(false); return onJoined(c); }
    if (Object.keys(game.players||{}).length >= 16) { setLoading(false); return showToast('ĞšĞ¾Ğ¼Ğ½Ğ°Ñ‚Ğ° Ğ·Ğ°Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ° (16/16)', 'err'); }
    await DB.updateGame(c, {
      [`players/${user.username}`]: { userId:user.username, username:user.username, name:user.displayName||user.username, cards:null, revealed:[], isEliminated:false }
    });
    setLoading(false);
    onJoined(c);
  };

  return (
    <div className="screen anim-in">
      <HazardBar />
      <div className="topbar">
        <BackBtn onClick={onBack} />
        <div className="topbar-title">Ğ’Ğ¡Ğ¢Ğ£ĞŸĞ˜Ğ¢Ğ¬ Ğ’ Ğ˜Ğ“Ğ Ğ£</div>
      </div>
      <div style={{ flex:1, display:'flex', flexDirection:'column', justifyContent:'center', padding:'0 20px', gap:16 }}>
        <div style={{ textAlign:'center' }}>
          <div style={{ fontSize:48, marginBottom:8 }}>ğŸ”‘</div>
          <div style={{ fontFamily:"'Bebas Neue',sans-serif", fontSize:24, letterSpacing:4, color:'var(--acc)' }}>ĞšĞĞ” ĞšĞĞœĞĞĞ¢Ğ«</div>
          <div className="mono" style={{ fontSize:10, color:'var(--dim)', letterSpacing:2, marginTop:4 }}>Ğ’Ğ’Ğ•Ğ”Ğ˜Ğ¢Ğ• 6-Ğ¡Ğ˜ĞœĞ’ĞĞ›Ğ¬ĞĞ«Ğ™ ĞšĞĞ”</div>
        </div>
        <input className="inp" value={code} onChange={e=>setCode(e.target.value.toUpperCase())} maxLength={6}
          placeholder="XXXXXX" style={{ textAlign:'center', fontSize:28, letterSpacing:10, fontFamily:"'Bebas Neue',sans-serif" }}
          onKeyDown={e=>e.key==='Enter'&&join()} />
        <Btn onClick={join} disabled={loading || code.trim().length !== 6}>
          {loading ? 'â³ ĞŸĞĞ˜Ğ¡Ğšâ€¦' : 'âš¡ Ğ’ĞĞ™Ğ¢Ğ˜ Ğ’ Ğ‘Ğ£ĞĞšĞ•Ğ '}
        </Btn>
      </div>
    </div>
  );
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LOBBY SCREEN â€” Ñ€ĞµĞ°Ğ»ÑŒĞ½Ğ¾Ğµ Ğ²Ñ€ĞµĞ¼Ñ Ñ‡ĞµÑ€ĞµĞ· Firebase onValue
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function LobbyScreen({ gameId, user, onBack, onStarted, showToast }) {
  const [game, setGame] = useState(null);
  const [copied, setCopied] = useState(false);

  useEffect(() => {
    const unsub = DB.watchGame(gameId, g => {
      if (!g) return;
      setGame(g);
      if (g.phase === 'playing') onStarted();
    });
    return unsub;
  }, [gameId]);

  const startGame = async () => {
    const g = await DB.getGame(gameId);
    if (!g) return showToast('Ğ˜Ğ³Ñ€Ğ° Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½Ğ°', 'err');
    const plist = Object.values(g.players || {});
    if (plist.length < 2) return showToast('ĞÑƒĞ¶Ğ½Ğ¾ Ğ¼Ğ¸Ğ½. 2 Ğ¸Ğ³Ñ€Ğ¾ĞºĞ°', 'err');

    const updatedPlayers = {};
    plist.forEach(p => {
      updatedPlayers[p.username] = { ...p, cards: makeCards(g.adultMode), revealed: [], isEliminated: false };
    });
    const bunkerSpots = Math.ceil(plist.length / 2);
    await DB.setGame(gameId, { ...g, players: updatedPlayers, bunkerSpots, phase:'playing', round:1, votes:{}, revealedThisRound:{}, eliminated:[], lastEliminated:null });

    // Increment gamesPlayed for all
    const updatePromises = plist.map(p => DB.updateUser(p.username, { gamesPlayed: firebase.database.ServerValue.increment(1) }));
    await Promise.all(updatePromises);
  };

  const leaveGame = async () => {
    if (!confirm('ĞŸĞ¾ĞºĞ¸Ğ½ÑƒÑ‚ÑŒ Ğ»Ğ¾Ğ±Ğ±Ğ¸?')) return;
    const g = await DB.getGame(gameId);
    if (!g) return onBack();
    const players = { ...g.players };
    delete players[user.username];
    if (!Object.keys(players).length) { await db.ref(`games/${gameId}`).remove(); }
    else {
      const updates = { [`players/${user.username}`]: null };
      if (g.creatorId === user.username) updates.creatorId = Object.keys(players)[0];
      await DB.updateGame(gameId, updates);
    }
    onBack();
  };

  const copyCode = () => {
    navigator.clipboard?.writeText(gameId).catch(()=>{});
    setCopied(true); setTimeout(() => setCopied(false), 2000);
    showToast('ĞšĞ¾Ğ´ ÑĞºĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½!', 'ok');
  };

  if (!game) return <div className="screen"><Spinner /></div>;

  const ap = game.apocalypse || {};
  const players = Object.values(game.players || {});
  const isCreator = game.creatorId === user.username;

  return (
    <div className="screen anim-in">
      <HazardBar />
      <div className="topbar">
        <div className="led led-grn" />
        <div className="topbar-title">Ğ›ĞĞ‘Ğ‘Ğ˜</div>
        <div className="mono" style={{ fontSize:10, letterSpacing:2, color:'var(--dim)' }}>{players.length}/16</div>
      </div>
      <div className="scroller">
        {game.adultMode && (
          <div style={{ background:'rgba(255,45,107,.1)', border:'1px solid rgba(255,45,107,.4)', padding:'8px 12px', marginBottom:10, display:'flex', alignItems:'center', gap:8, fontFamily:"'Share Tech Mono',monospace", fontSize:10, letterSpacing:2, color:'#ff6b9d' }}>
            ğŸ” Ğ’Ğ—Ğ ĞĞ¡Ğ›Ğ«Ğ™ Ğ Ğ•Ğ–Ğ˜Ğœ â€” 18+
          </div>
        )}
        <div className="card">
          <div style={{ fontSize:32, marginBottom:6 }}>{ap.emoji}</div>
          <div style={{ fontFamily:"'Bebas Neue',sans-serif", fontSize:22, letterSpacing:2, color:'var(--acc)' }}>{ap.name}</div>
          <div style={{ fontSize:12, color:'var(--dim)', lineHeight:1.5, marginTop:5 }}>{ap.description}</div>
          <div style={{ marginTop:10, padding:'7px 10px', background:'rgba(232,129,10,.07)', borderLeft:'2px solid var(--acc)', fontSize:12, color:'var(--acc2)' }}>ğŸ¯ {ap.victory}</div>
        </div>
        <div className="code-box" onClick={copyCode}>
          {gameId}
          <div className="mono" style={{ fontSize:10, color:copied?'var(--grn)':'var(--dim)', letterSpacing:2, marginTop:4 }}>{copied ? 'âœ“ Ğ¡ĞšĞĞŸĞ˜Ğ ĞĞ’ĞĞĞ' : 'ĞĞĞ–ĞœĞ˜Ğ¢Ğ• Ğ§Ğ¢ĞĞ‘Ğ« Ğ¡ĞšĞĞŸĞ˜Ğ ĞĞ’ĞĞ¢Ğ¬'}</div>
        </div>
        <div className="lbl">Ğ˜Ğ“Ğ ĞĞšĞ˜</div>
        {players.map(p => {
          const isMe = p.username === user.username;
          const isCr = p.username === game.creatorId;
          return (
            <div key={p.username} className={`prow${isMe?' me':''}`}>
              <div className={`led ${isCr?'led-acc':'led-grn'}`} />
              <div style={{ flex:1, fontSize:14, fontWeight:600 }}>{p.name}</div>
              {isCr && <span className="pbadge pbadge-acc">Ğ¡ĞĞ—Ğ”ĞĞ¢Ğ•Ğ›Ğ¬</span>}
              {isMe && <span className="pbadge pbadge-cyn">Ğ’Ğ«</span>}
            </div>
          );
        })}
      </div>
      <div className="fixbot">
        {isCreator ? (
          <Btn onClick={startGame} disabled={players.length < 2}>
            {players.length < 2 ? `âš¡ Ğ–Ğ”ĞĞœ Ğ˜Ğ“Ğ ĞĞšĞĞ’ (${players.length}/2)` : 'âš¡ ĞĞĞ§ĞĞ¢Ğ¬ Ğ˜Ğ“Ğ Ğ£'}
          </Btn>
        ) : (
          <div className="mono" style={{ textAlign:'center', fontSize:10, letterSpacing:2, color:'var(--dim)', padding:'4px 0' }}>
            ĞĞ–Ğ˜Ğ”ĞĞĞ˜Ğ• Ğ¡ĞĞ—Ğ”ĞĞ¢Ğ•Ğ›Ğ¯â€¦
          </div>
        )}
        <Btn onClick={leaveGame} cls="btn-ghost" small>â†© ĞŸĞĞšĞ˜ĞĞ£Ğ¢Ğ¬ Ğ›ĞĞ‘Ğ‘Ğ˜</Btn>
      </div>
    </div>
  );
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   GAME WRAPPER â€” Ğ¿Ğ¾Ğ»Ğ½Ğ°Ñ Ğ¸Ğ³Ñ€Ğ° Ñ Firebase real-time
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function GameWrapper({ gameId, user, onExit, showToast }) {
  const [game, setGame] = useState(null);
  const [subScreen, setSubScreen] = useState('round');
  const [selectedVote, setSelectedVote] = useState(undefined);
  const prevElimRef = useRef(0);
  const prevPhaseRef = useRef(null);

  useEffect(() => {
    const unsub = DB.watchGame(gameId, g => {
      if (!g) return;
      const elimLen = (g.eliminated||[]).length;
      if (elimLen > prevElimRef.current && g.lastEliminated) {
        prevElimRef.current = elimLen;
        setSubScreen('elim');
      }
      if (g.phase !== prevPhaseRef.current) {
        prevPhaseRef.current = g.phase;
        if (g.phase === 'voting') setSelectedVote(undefined);
        if (g.phase === 'finished') setSubScreen('over');
        if (g.phase === 'lobby') { onExit(); }
      }
      setGame(g);
    });
    return unsub;
  }, [gameId]);

  if (!game) return <div className="screen"><Spinner /></div>;

  const me = (game.players||{})[user.username];
  const isCreator = game.creatorId === user.username;
  const alive = Object.values(game.players||{}).filter(p => !p.isEliminated);
  const ap = game.apocalypse || {};
  const maxRev = game.maxReveals || 2;
  const revDone = (game.revealedThisRound||{})[user.username] || 0;
  const revLeft = maxRev - revDone;

  /* â”€â”€â”€ Actions â”€â”€â”€ */
  const doReveal = async (cardKey) => {
    if (!me || me.isEliminated) return;
    if (me.revealed?.includes(cardKey)) return showToast('Ğ£Ğ¶Ğµ Ñ€Ğ°ÑĞºÑ€Ñ‹Ñ‚Ğ°', 'err');
    if (revLeft <= 0) return showToast(`Ğ›Ğ¸Ğ¼Ğ¸Ñ‚: ${maxRev} Ñ€Ğ°ÑĞºÑ€Ñ‹Ñ‚Ğ¸Ñ Ğ·Ğ° Ñ€Ğ°ÑƒĞ½Ğ´`, 'err');
    const newRevealed = [...(me.revealed||[]), cardKey];
    const newRevCnt = revDone + 1;
    await DB.updateGame(gameId, {
      [`players/${user.username}/revealed`]: newRevealed,
      [`revealedThisRound/${user.username}`]: newRevCnt,
    });
    showToast('âœ… ĞšĞ°Ñ€Ñ‚Ğ° Ñ€Ğ°ÑĞºÑ€Ñ‹Ñ‚Ğ°!', 'ok');
    setSubScreen('round');
  };

  const startVote = async () => {
    if (game.phase !== 'playing') return;
    await DB.updateGame(gameId, { phase:'voting', votes:{} });
    setSelectedVote(undefined);
    showToast('ğŸ—³ Ğ“Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ½Ğ°Ñ‡Ğ°Ğ»Ğ¾ÑÑŒ!', 'ok');
  };

  const castVote = async (targetId) => {
    if (game.phase !== 'voting') return;
    if ((game.votes||{})[user.username] !== undefined) return showToast('Ğ’Ñ‹ ÑƒĞ¶Ğµ Ğ¿Ñ€Ğ¾Ğ³Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ğ°Ğ»Ğ¸', 'err');
    const newVotes = { ...(game.votes||{}), [user.username]: targetId === undefined ? null : targetId };
    const aliveP = Object.values(game.players||{}).filter(p => !p.isEliminated);
    const gameCopy = JSON.parse(JSON.stringify({ ...game, votes: newVotes }));

    if (Object.keys(newVotes).length >= aliveP.length) {
      processVotes(gameCopy);
      if (gameCopy.phase === 'finished') {
        const survivors = Object.values(gameCopy.players).filter(p => !p.isEliminated).map(p => p.username);
        const allPlayers = Object.keys(gameCopy.players);
        const wins  = survivors.map(uid => DB.updateUser(uid, { gamesWon: firebase.database.ServerValue.increment(1) }));
        const elims = allPlayers.filter(uid => !survivors.includes(uid)).map(uid => DB.updateUser(uid, { gamesEliminated: firebase.database.ServerValue.increment(1) }));
        await Promise.all([...wins, ...elims]);
      }
      await DB.setGame(gameId, gameCopy);
    } else {
      await DB.updateGame(gameId, { [`votes/${user.username}`]: targetId === undefined ? null : (targetId ?? null) });
    }
  };

  const tally = async () => {
    const g = await DB.getGame(gameId);
    if (!g || g.phase !== 'voting') return;
    const gameCopy = JSON.parse(JSON.stringify(g));
    processVotes(gameCopy);
    if (gameCopy.phase === 'finished') {
      const survivors = Object.values(gameCopy.players).filter(p => !p.isEliminated).map(p => p.username);
      const allPlayers = Object.keys(gameCopy.players);
      const wins  = survivors.map(uid => DB.updateUser(uid, { gamesWon: firebase.database.ServerValue.increment(1) }));
      const elims = allPlayers.filter(uid => !survivors.includes(uid)).map(uid => DB.updateUser(uid, { gamesEliminated: firebase.database.ServerValue.increment(1) }));
      await Promise.all([...wins, ...elims]);
    }
    await DB.setGame(gameId, gameCopy);
  };

  /* â”€â”€â”€ SUBSCREEN: My Cards â”€â”€â”€ */
  if (subScreen === 'cards') return (
    <div className="screen anim-in">
      <HazardBar />
      <div className="topbar"><BackBtn onClick={() => setSubScreen('round')} /><div className="topbar-title">ĞœĞĞ˜ ĞšĞĞ Ğ¢Ğ«</div></div>
      <div className="scroller">
        <div className="mono" style={{ fontSize:9, letterSpacing:2, color:'var(--dim)', textAlign:'center', margin:'4px 0 14px' }}>Ğ¢ĞĞ›Ğ¬ĞšĞ Ğ’Ğ« Ğ’Ğ˜Ğ”Ğ˜Ğ¢Ğ• Ğ’Ğ¡Ğ• ĞšĞĞ Ğ¢Ğ« â€” Ğ ĞĞ¡ĞšĞ Ğ«Ğ’ĞĞ™Ğ¢Ğ• Ğ¡Ğ¢Ğ ĞĞ¢Ğ•Ğ“Ğ˜Ğ§Ğ•Ğ¡ĞšĞ˜</div>
        <div className="cgrid">
          {me?.cards ? CARD_META.map(({ key, icon, label }) => {
            const rev = (me.revealed||[]).includes(key);
            const val = me.cards[key] || 'â€”';
            const full = key === 'fact';
            return (
              <div key={key} className={`ctile${rev?' revealed':''}${full?' full':''}`}>
                {rev && <div className="rev-badge">Ğ ĞĞ¡ĞšĞ Ğ«Ğ¢Ğ</div>}
                <div style={{ fontSize:22, marginBottom:5 }}>{icon}</div>
                <div className="mono" style={{ fontSize:8, letterSpacing:2, color:'var(--dim)', textTransform:'uppercase' }}>{label}</div>
                <div style={{ fontSize:12, color:'var(--txt)', marginTop:5, lineHeight:1.4 }}>{val}</div>
              </div>
            );
          }) : <div className="mono" style={{ color:'var(--dim)', padding:24, textAlign:'center' }}>ĞšĞ°Ñ€Ñ‚Ñ‹ Ğ½Ğµ Ğ½Ğ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ñ‹</div>}
        </div>
      </div>
    </div>
  );

  /* â”€â”€â”€ SUBSCREEN: Pick Card â”€â”€â”€ */
  if (subScreen === 'pick') {
    const unrevealed = CARD_META.filter(c => !(me?.revealed||[]).includes(c.key));
    return (
      <div className="screen anim-in">
        <HazardBar />
        <div className="topbar"><BackBtn onClick={() => setSubScreen('round')} /><div className="topbar-title">Ğ’Ğ«Ğ‘ĞĞ  ĞšĞĞ Ğ¢Ğ«</div><div className="mono" style={{ fontSize:10, color:'var(--dim)', letterSpacing:2 }}>Ğ ĞĞ£ĞĞ” {game.round}</div></div>
        <div className="scroller">
          <div className="mono" style={{ fontSize:10, color:'var(--acc)', textAlign:'center', padding:'8px 0 12px' }}>ĞÑÑ‚Ğ°Ğ»Ğ¾ÑÑŒ Ñ€Ğ°ÑĞºÑ€Ñ‹Ñ‚Ğ¸Ğ¹: {revLeft} Ğ¸Ğ· {maxRev}</div>
          {revLeft <= 0 ? (
            <div className="mono" style={{ textAlign:'center', padding:20, color:'var(--grn)', fontSize:10, letterSpacing:2 }}>âœ“ Ğ’ÑĞµ Ñ€Ğ°ÑĞºÑ€Ñ‹Ñ‚Ğ¸Ñ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ñ‹ Ğ² ÑÑ‚Ğ¾Ğ¼ Ñ€Ğ°ÑƒĞ½Ğ´Ğµ</div>
          ) : unrevealed.length === 0 ? (
            <div className="mono" style={{ textAlign:'center', padding:20, color:'var(--grn)', fontSize:10, letterSpacing:2 }}>âœ“ Ğ’ÑĞµ Ğ²Ğ°ÑˆĞ¸ ĞºĞ°Ñ€Ñ‚Ñ‹ Ñ€Ğ°ÑĞºÑ€Ñ‹Ñ‚Ñ‹</div>
          ) : unrevealed.map(({ key, icon, label }) => (
            <div key={key} className="pctile" onClick={() => {
              const val = me?.cards?.[key] || 'â€”';
              if (confirm(`Ğ Ğ°ÑĞºÑ€Ñ‹Ñ‚ÑŒ ĞºĞ°Ñ€Ñ‚Ñƒ?\n\n${label}: ${val}\n\nĞ’ÑĞµ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ¸ ÑƒĞ²Ğ¸Ğ´ÑÑ‚ ĞµÑ‘.`)) doReveal(key);
            }}>
              <div style={{ fontSize:22 }}>{icon}</div>
              <div style={{ flex:1 }}>
                <div className="mono" style={{ fontSize:9, letterSpacing:2, color:'var(--dim)', textTransform:'uppercase' }}>{label}</div>
                <div style={{ fontSize:13, color:'var(--txt)', marginTop:3 }}>{me?.cards?.[key] || 'â€”'}</div>
              </div>
              <div style={{ fontSize:18, color:'var(--dim)' }}>â€º</div>
            </div>
          ))}
          <div style={{ marginTop:8 }}>
            <Btn onClick={() => setSubScreen('round')} cls="btn-ghost" small>ğŸ¤« ĞĞµ Ñ€Ğ°ÑĞºÑ€Ñ‹Ğ²Ğ°Ñ‚ÑŒ Ğ² ÑÑ‚Ğ¾Ğ¼ Ñ€Ğ°ÑƒĞ½Ğ´Ğµ</Btn>
          </div>
        </div>
      </div>
    );
  }

  /* â”€â”€â”€ SUBSCREEN: Vote â”€â”€â”€ */
  if (subScreen === 'vote' || (game.phase === 'voting' && subScreen !== 'elim' && subScreen !== 'over')) {
    const votes = game.votes || {};
    const alreadyVoted = votes[user.username] !== undefined;
    const totalVoted = Object.keys(votes).length;
    const myVote = votes[user.username];

    return (
      <div className="screen anim-in">
        <HazardBar red />
        <div style={{ padding:'14px', background:'rgba(196,18,48,.08)', borderBottom:'1px solid var(--dbrd)', flexShrink:0 }}>
          <div style={{ fontFamily:"'Bebas Neue',sans-serif", fontSize:26, letterSpacing:3, color:'var(--red2)' }}>Ğ“ĞĞ›ĞĞ¡ĞĞ’ĞĞĞ˜Ğ•</div>
          <div className="mono" style={{ fontSize:9, letterSpacing:2, color:'var(--dim)', marginTop:2 }}>ĞšĞ¢Ğ ĞŸĞĞšĞ˜ĞĞ•Ğ¢ Ğ‘Ğ£ĞĞšĞ•Ğ ?</div>
          <div className="mono" style={{ fontSize:10, color:'var(--txt)', marginTop:6 }}>ĞŸÑ€Ğ¾Ğ³Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ğ°Ğ»Ğ¸: {totalVoted} / {alive.length}</div>
        </div>
        <div className="scroller">
          <div className="mono" style={{ fontSize:9, letterSpacing:2, color:'var(--dim)', textAlign:'center', margin:'4px 0 12px' }}>Ğ’Ğ«Ğ‘Ğ•Ğ Ğ˜Ğ¢Ğ• Ğ˜Ğ“Ğ ĞĞšĞ Ğ˜ ĞŸĞĞ”Ğ¢Ğ’Ğ•Ğ Ğ”Ğ˜Ğ¢Ğ• Ğ“ĞĞ›ĞĞ¡</div>
          <div className="vgrid">
            {alive.map(p => {
              const isMe = p.username === user.username;
              const vcnt = Object.values(votes).filter(v => v === p.username).length;
              const iVoted = !isMe && myVote === p.username;
              const iSel = !isMe && selectedVote === p.username;
              const revText = (p.revealed||[]).map(k => { const m = CARD_META.find(c=>c.key===k); return `${m?.icon||''} ${p.cards?.[k]||''}`; }).join(' Â· ') || 'ĞºĞ°Ñ€Ñ‚Ñ‹ Ğ½Ğµ Ñ€Ğ°ÑĞºÑ€Ñ‹Ñ‚Ñ‹';
              return (
                <div key={p.username}
                  className={`vcard${(iVoted||iSel)?' sel':''}${alreadyVoted?' voted':''}`}
                  onClick={() => { if (alreadyVoted) return showToast('Ğ’Ñ‹ ÑƒĞ¶Ğµ Ğ¿Ñ€Ğ¾Ğ³Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ğ°Ğ»Ğ¸', 'err'); if (isMe) return showToast('ĞĞµĞ»ÑŒĞ·Ñ Ğ·Ğ° ÑĞµĞ±Ñ', 'err'); setSelectedVote(p.username); }}>
                  {vcnt > 0 && <div style={{ position:'absolute', top:8, right:8, fontFamily:"'Bebas Neue',sans-serif", fontSize:18, color:'var(--red2)' }}>{'ğŸ’€'.repeat(Math.min(vcnt,3))}</div>}
                  <div style={{ fontSize:13, fontWeight:700, position:'relative' }}>{p.name}{isMe?<small style={{color:'var(--dim)'}}> (Ğ²Ñ‹)</small>:''}</div>
                  <div style={{ fontSize:10, color:'var(--dim)', marginTop:4, lineHeight:1.4, position:'relative' }}>{revText}</div>
                  {iVoted && <div style={{ position:'absolute', bottom:8, right:8, fontSize:16, color:'var(--red2)' }}>â˜…</div>}
                </div>
              );
            })}
            <div className={`vcard abstain${selectedVote===null?' sel':''}${alreadyVoted?' voted':''}`}
              onClick={() => { if (!alreadyVoted) setSelectedVote(null); }}>
              <div style={{ fontSize:13, fontWeight:700 }}>ğŸ¤ Ğ’Ğ¾Ğ·Ğ´ĞµÑ€Ğ¶Ğ°Ñ‚ÑŒÑÑ</div>
              <div style={{ fontSize:10, color:'var(--dim)', marginTop:4 }}>ĞĞµ Ğ²Ğ»Ğ¸ÑĞµÑ‚ Ğ½Ğ° Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚</div>
              {myVote === null && alreadyVoted && <div style={{ position:'absolute', bottom:8, right:8, fontSize:16, color:'var(--cyn)' }}>â˜…</div>}
            </div>
          </div>
        </div>
        <div className="fixbot">
          <Btn cls="btn-red" disabled={selectedVote===undefined || alreadyVoted}
            onClick={() => { if (selectedVote===undefined) return; castVote(selectedVote); }}>
            {alreadyVoted ? 'âœ… Ğ“ĞĞ›ĞĞ¡ Ğ—ĞĞ¡Ğ§Ğ˜Ğ¢ĞĞ' : selectedVote===null ? 'ğŸ¤ Ğ’ĞĞ—Ğ”Ğ•Ğ Ğ–ĞĞ¢Ğ¬Ğ¡Ğ¯' : 'â˜  ĞŸĞĞ”Ğ¢Ğ’Ğ•Ğ Ğ”Ğ˜Ğ¢Ğ¬ Ğ“ĞĞ›ĞĞ¡'}
          </Btn>
          {isCreator && <Btn cls="btn-ghost" small onClick={tally}>ğŸ“Š ĞŸĞĞ”Ğ’Ğ•Ğ¡Ğ¢Ğ˜ Ğ˜Ğ¢ĞĞ“Ğ˜ (ÑĞ¾Ğ·Ğ´Ğ°Ñ‚ĞµĞ»ÑŒ)</Btn>}
        </div>
      </div>
    );
  }

  /* â”€â”€â”€ SUBSCREEN: Elim â”€â”€â”€ */
  if (subScreen === 'elim') {
    const ep = game.lastEliminated;
    const nextSub = game.phase === 'finished' ? 'over' : game.phase === 'voting' ? 'vote' : 'round';
    return (
      <div className="screen anim-in" style={{ overflowY:'auto', paddingBottom:80 }}>
        <HazardBar red />
        <div className="topbar">
          <div className="topbar-title" style={{ color:'var(--red2)' }}>Ğ˜Ğ¡ĞšĞ›Ğ®Ğ§Ğ•ĞĞ˜Ğ•</div>
          <div className="mono" style={{ fontSize:10, letterSpacing:2, color:'var(--dim)' }}>Ğ ĞĞ£ĞĞ” {game.round > 1 ? game.round-1 : 1}</div>
        </div>
        <div style={{ overflowY:'auto', flex:1, padding:'12px 14px 100px' }}>
          <div style={{ textAlign:'center', padding:'30px 16px 20px' }}>
            <div style={{ fontSize:64, animation:'shake .25s ease infinite alternate' }}>ğŸ’€</div>
            <div style={{ fontFamily:"'Bebas Neue',sans-serif", fontSize:13, letterSpacing:5, color:'var(--red2)', marginTop:12, animation:'flicker 2s infinite' }}>â˜  Ğ˜Ğ¡ĞšĞ›Ğ®Ğ§ĞĞ Ğ˜Ğ— Ğ‘Ğ£ĞĞšĞ•Ğ Ğ â˜ </div>
            <div style={{ fontFamily:"'Bebas Neue',sans-serif", fontSize:36, letterSpacing:3, color:'var(--txt)', marginTop:4, textShadow:'0 0 20px rgba(255,36,68,.4)' }}>{ep?.name || 'â€”'}</div>
          </div>
          <div style={{ height:1, background:'var(--dbrd)', margin:'0 0 12px' }} />
          <div className="lbl">Ğ’Ğ¡Ğ• ĞšĞĞ Ğ¢Ğ« Ğ’Ğ«Ğ‘Ğ«Ğ’Ğ¨Ğ•Ğ“Ğ</div>
          {ep && CARD_META.map(({ key, icon, label }) => (
            <div key={key} className="elim-fcard">
              <div style={{ fontSize:16, flexShrink:0, marginTop:1 }}>{icon}</div>
              <div>
                <div className="mono" style={{ fontSize:8, letterSpacing:2, color:'var(--dim)', textTransform:'uppercase' }}>{label}</div>
                <div style={{ fontSize:12, color:'var(--txt)', marginTop:2 }}>{ep.allCards?.[key] || 'â€”'}</div>
              </div>
            </div>
          ))}
        </div>
        <div className="fixbot">
          <Btn cls="btn-ghost" onClick={() => setSubScreen(nextSub)}>ĞŸĞ ĞĞ”ĞĞ›Ğ–Ğ˜Ğ¢Ğ¬ â†’</Btn>
        </div>
      </div>
    );
  }

  /* â”€â”€â”€ SUBSCREEN: Over â”€â”€â”€ */
  if (subScreen === 'over') {
    const survivors = Object.values(game.players||{}).filter(p => !p.isEliminated);
    const eliminated = Object.values(game.players||{}).filter(p => p.isEliminated);
    return (
      <div className="screen anim-in" style={{ overflowY:'auto' }}>
        <div className="topbar"><div className="topbar-title" style={{ color:'var(--grn)' }}>Ğ˜Ğ¢ĞĞ“ Ğ˜Ğ“Ğ Ğ«</div></div>
        <div style={{ overflowY:'auto', flex:1, padding:'12px 14px 40px' }}>
          <div style={{ padding:'32px 16px 20px', textAlign:'center' }}>
            <div style={{ fontSize:52, marginBottom:8 }}>ğŸš</div>
            <div style={{ fontFamily:"'Bebas Neue',sans-serif", fontSize:48, letterSpacing:4, color:'var(--grn)', textShadow:'0 0 30px rgba(29,255,142,.5)' }}>Ğ’Ğ«Ğ–Ğ˜Ğ’Ğ¨Ğ˜Ğ•</div>
            <div className="mono" style={{ fontSize:10, letterSpacing:2, color:'var(--dim)', marginTop:4 }}>{ap.emoji} {ap.name} â€” {ap.victory}</div>
          </div>
          <div className="lbl">ğŸ† Ğ’ Ğ‘Ğ£ĞĞšĞ•Ğ Ğ•</div>
          {survivors.map(p => (
            <div key={p.username} className="surv-row">
              <div style={{ fontSize:22 }}>ğŸ†</div>
              <div>
                <div style={{ fontSize:15, fontWeight:700, color:'var(--grn)' }}>{p.name}</div>
                <div style={{ fontSize:11, color:'var(--dim)', marginTop:2 }}>{p.cards?.profession || 'â€”'}</div>
              </div>
            </div>
          ))}
          <div className="lbl">ğŸ’€ Ğ’Ğ«Ğ‘Ğ«Ğ›Ğ˜</div>
          {eliminated.map(p => (
            <div key={p.username} className="loser-row">
              <span>ğŸ’€</span>
              <div style={{ fontSize:13, color:'var(--dim)', textDecoration:'line-through' }}>{p.name}</div>
            </div>
          ))}
          <div style={{ marginTop:20 }}><Btn onClick={onExit} cls="btn-ghost">â†© Ğ’Ğ•Ğ ĞĞ£Ğ¢Ğ¬Ğ¡Ğ¯ Ğ’ ĞœĞ•ĞĞ®</Btn></div>
        </div>
      </div>
    );
  }

  /* â”€â”€â”€ DEFAULT: Round Screen â”€â”€â”€ */
  const spotsRow = alive.map((_, i) => (
    <div key={i} className={`sspot ${i < game.bunkerSpots ? 'free' : 'taken'}`} />
  ));

  const feedItems = alive.flatMap(p =>
    (p.revealed||[]).map(k => {
      const m = CARD_META.find(c => c.key === k) || {};
      return (
        <div key={`${p.username}-${k}`} className="rfeed-item">
          <div style={{ fontSize:12, fontWeight:700, color:'var(--acc2)', minWidth:72 }}>{p.name}</div>
          <div style={{ flex:1 }}>
            <div className="mono" style={{ fontSize:8, color:'var(--dim)', letterSpacing:1 }}>{m.icon||''} {m.label||k}</div>
            <div style={{ fontSize:12, color:'var(--txt)', marginTop:2 }}>{p.cards?.[k] || 'â€”'}</div>
          </div>
        </div>
      );
    })
  );

  return (
    <div className="screen anim-in">
      <div style={{ height:5, flexShrink:0, background:'repeating-linear-gradient(-45deg,var(--acc),var(--acc) 8px,var(--bg) 8px,var(--bg) 16px)', opacity:.65 }} />
      <div style={{ display:'flex', alignItems:'center', gap:12, padding:'12px 14px', background:'var(--bg2)', borderBottom:'1px solid var(--brd)', flexShrink:0 }}>
        <div style={{ fontFamily:"'Bebas Neue',sans-serif", fontSize:48, color:'var(--acc)', lineHeight:1, minWidth:60 }}>{game.round}</div>
        <div style={{ flex:1 }}>
          <div className="mono" style={{ fontSize:9, letterSpacing:2, color:'var(--dim)' }}>ĞĞŸĞĞšĞĞ›Ğ˜ĞŸĞ¡Ğ˜Ğ¡</div>
          <div style={{ fontSize:15, fontWeight:600 }}>{ap.emoji} {ap.name}</div>
          <div className="mono" style={{ fontSize:9, letterSpacing:2, color:'var(--dim)', marginTop:3 }}>Ğ–Ğ˜Ğ’Ğ«Ğ¥ / ĞœĞ•Ğ¡Ğ¢ Ğ’ Ğ‘Ğ£ĞĞšĞ•Ğ Ğ•</div>
          <div style={{ fontSize:15, fontWeight:600 }}>{alive.length} / {game.bunkerSpots}</div>
        </div>
        <button onClick={() => setSubScreen('cards')} style={{ background:'none', border:'1px solid var(--brd)', color:'var(--dim)', padding:'5px 10px', fontFamily:"'Share Tech Mono',monospace", fontSize:13, cursor:'pointer' }}>ğŸƒ</button>
      </div>
      <div className="scroller">
        <div style={{ display:'flex', gap:5, flexWrap:'wrap', marginBottom:12 }}>{spotsRow}</div>
        <div className="lbl">Ğ ĞĞ¡ĞšĞ Ğ«Ğ¢Ğ«Ğ• ĞšĞĞ Ğ¢Ğ«</div>
        {feedItems.length > 0 ? feedItems : (
          <div className="mono" style={{ fontSize:10, color:'var(--dim)', textAlign:'center', padding:'16px 0' }}>ĞŸĞ¾ĞºĞ° Ğ½Ğ¸Ñ‡ĞµĞ³Ğ¾ Ğ½Ğµ Ñ€Ğ°ÑĞºÑ€Ñ‹Ñ‚Ğ¾</div>
        )}
      </div>
      <div className="fixbot">
        <div className="btn-row">
          <Btn onClick={() => setSubScreen('cards')} cls="btn-ghost" small>ğŸƒ ĞœĞĞ˜ ĞšĞĞ Ğ¢Ğ«</Btn>
          <Btn onClick={() => setSubScreen('pick')} cls="btn-cyan" small
            disabled={!me || me.isEliminated || revLeft <= 0}>
            {me?.isEliminated ? 'ğŸ’€ Ğ’Ğ«Ğ‘Ğ«Ğ›Ğ˜' : revLeft <= 0 ? `âœ… Ğ ĞĞ¡ĞšĞ Ğ«Ğ¢Ğ (${maxRev}/${maxRev})` : revLeft < maxRev ? `â†— Ğ•Ğ©Ğ (${revLeft})` : 'â†— Ğ ĞĞ¡ĞšĞ Ğ«Ğ¢Ğ¬'}
          </Btn>
        </div>
        {isCreator && <Btn onClick={startVote} cls="btn-red" small>ğŸ—³ ĞĞĞ§ĞĞ¢Ğ¬ Ğ“ĞĞ›ĞĞ¡ĞĞ’ĞĞĞ˜Ğ•</Btn>}
      </div>
    </div>
  );
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ROOT APP
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function App() {
  const [user, setUser] = useState(null);
  const [screen, setScreen] = useState('auth'); // auth | home | profile | leaderboard | admin | createGame | joinGame | lobby | game
  const [gameId, setGameId] = useState(null);
  const [toast, showToast] = useToast();

  // Refresh user data from Firebase every 10s
  useEffect(() => {
    if (!user) return;
    const t = setInterval(async () => {
      const fresh = await DB.getUser(user.username);
      if (fresh) setUser(fresh);
    }, 10000);
    return () => clearInterval(t);
  }, [user?.username]);

  // On home screen, check if user is already in an active game
  useEffect(() => {
    if (screen !== 'home' || !user) return;
    (async () => {
      const games = await DB.getAllGames();
      const myGame = Object.values(games).find(g => g.players?.[user.username] && g.phase !== 'finished');
      if (myGame) { setGameId(myGame.id); setScreen(myGame.phase === 'lobby' ? 'lobby' : 'game'); }
    })();
  }, [screen]);

  const nav = s => setScreen(s);

  return (
    <div id="root" style={{ position:'fixed', inset:0 }}>
      <ToastEl toast={toast} />

      {screen === 'auth' && <AuthScreen onLogin={u => { setUser(u); nav('home'); }} showToast={showToast} />}

      {screen === 'home' && user && (
        <div className="screen">
          <HazardBar />
          <div className="topbar">
            <div className="led led-grn" />
            <div className="topbar-title">Ğ‘Ğ£ĞĞšĞ•Ğ  Ğ¤Ğ¢Ğ˜</div>
            <div className="mono" style={{ fontSize:9, letterSpacing:2, color:'var(--dim)' }}>WEB</div>
          </div>
          <HomeScreen user={user} onNavigate={nav} />
          <div className="nav-bar">
            <button className="nav-btn active"><span className="nav-icon">ğŸš</span>Ğ“Ğ›ĞĞ’ĞĞĞ¯</button>
            <button className="nav-btn" onClick={() => nav('leaderboard')}><span className="nav-icon">ğŸ†</span>Ğ Ğ•Ğ™Ğ¢Ğ˜ĞĞ“</button>
            <button className="nav-btn" onClick={() => nav('profile')}><span className="nav-icon">ğŸ‘¤</span>ĞŸĞ ĞĞ¤Ğ˜Ğ›Ğ¬</button>
            <button className="nav-btn" onClick={() => { setUser(null); setGameId(null); nav('auth'); }}><span className="nav-icon">â›”</span>Ğ’Ğ«Ğ¥ĞĞ”</button>
          </div>
        </div>
      )}

      {screen === 'profile' && user && <ProfileScreen user={user} onBack={() => nav('home')} showToast={showToast} onUpdateUser={u => setUser(u)} />}
      {screen === 'leaderboard' && user && <LeaderboardScreen currentUser={user} onBack={() => nav('home')} />}
      {screen === 'admin' && user?.isAdmin && <AdminScreen currentUser={user} onBack={() => nav('home')} showToast={showToast} />}

      {screen === 'createGame' && user && (
        <CreateGameScreen user={user} onBack={() => nav('home')}
          onCreated={id => { setGameId(id); nav('lobby'); }} showToast={showToast} />
      )}
      {screen === 'joinGame' && user && (
        <JoinGameScreen user={user} onBack={() => nav('home')}
          onJoined={id => { setGameId(id); nav('lobby'); }} showToast={showToast} />
      )}
      {screen === 'lobby' && user && gameId && (
        <LobbyScreen gameId={gameId} user={user} onBack={() => { setGameId(null); nav('home'); }}
          onStarted={() => nav('game')} showToast={showToast} />
      )}
      {screen === 'game' && user && gameId && (
        <GameWrapper gameId={gameId} user={user}
          onExit={() => { setGameId(null); nav('home'); }} showToast={showToast} />
      )}
    </div>
  );
}

ReactDOM.createRoot(document.getElementById('root')).render(<App />);
</script>
</body>
</html>