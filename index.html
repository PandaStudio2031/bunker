<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>â˜¢ Ğ‘Ğ£ĞĞšĞ•Ğ </title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=SF+Pro+Display:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600;700&family=Share+Tech+Mono&display=swap" rel="stylesheet">
<style>
/* â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
   â•‘  DESIGN SYSTEM â€” MODERN MINIMAL / APPLE-INSPIRED     â•‘
   â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
:root {
  --bg:        #0a0a0f;
  --s1:        rgba(18,18,28,0.90);
  --s2:        rgba(22,22,34,0.85);
  --s3:        rgba(12,12,20,0.97);

  --a:         #f0a500;
  --a2:        #ffc235;
  --at:        rgba(240,165,0,0.08);
  --ab:        rgba(240,165,0,0.18);
  --ag:        rgba(240,165,0,0.45);

  --r:         #ff453a;
  --rt:        rgba(255,69,58,0.10);
  --rb:        rgba(255,69,58,0.25);

  --g:         #30d158;
  --gt:        rgba(48,209,88,0.08);
  --gb:        rgba(48,209,88,0.22);

  --c:         #0a84ff;
  --p:         #bf5af2;

  --tx:        #e8e8ed;
  --tx2:       #8e8e99;
  --tx3:       #3a3a4a;

  --nav-h:     72px;
  --safe-bot:  env(safe-area-inset-bottom, 0px);
  --bl:        blur(24px) saturate(180%);
  --bl-sm:     blur(12px) saturate(160%);
  --rad:       16px;
  --rad-sm:    10px;
  --rad-lg:    22px;
}

*, *::before, *::after { box-sizing:border-box; margin:0; padding:0; -webkit-tap-highlight-color:transparent }
html, body { width:100%; height:100%; overflow:hidden; font-family:'Inter','SF Pro Display',system-ui,sans-serif; color:var(--tx); }
::-webkit-scrollbar { width:3px } ::-webkit-scrollbar-thumb { background:rgba(255,255,255,.1); border-radius:2px; }

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ APP ROOT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
#app {
  position:fixed; inset:0;
  display:flex; flex-direction:column;
  overflow:hidden;
  background:
    radial-gradient(ellipse 80% 50% at 50% 100%, rgba(240,165,0,0.06) 0%, transparent 60%),
    radial-gradient(ellipse 60% 40% at 10% 10%,  rgba(10,132,255,0.04) 0%, transparent 55%),
    #0a0a0f;
}
#app::before { display:none; }
#app::after  { display:none; }

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ SCREEN AREA â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
#screen-area {
  flex:1; display:flex; flex-direction:column;
  overflow:hidden; position:relative; z-index:1;
  min-height:0;
}

.sc { flex:1; display:flex; flex-direction:column; overflow:hidden; animation:fadeUp .2s ease; }

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ANIMATIONS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
@keyframes fadeUp  { from{opacity:0;transform:translateY(8px)} to{opacity:1;transform:none} }
@keyframes pulse   { 0%,100%{opacity:1}50%{opacity:.3} }
@keyframes spin    { to{transform:rotate(360deg)} }
@keyframes glow    { 0%,100%{filter:drop-shadow(0 0 10px rgba(240,165,0,.55))} 50%{filter:drop-shadow(0 0 26px rgba(240,165,0,.9))} }
@keyframes glitch  { 0%,87%,100%{clip-path:none;transform:none} 88%{clip-path:inset(28% 0 52% 0);transform:translateX(-3px)} 89%{clip-path:inset(52% 0 18% 0);transform:translateX(3px)} 90%{clip-path:none} }
@keyframes shake   { 0%{transform:rotate(-5deg) scale(1)} 100%{transform:rotate(5deg) scale(1.05)} }
@keyframes slideUp { from{transform:translateY(100%);opacity:0} to{transform:none;opacity:1} }
@keyframes blink   { 0%,100%{opacity:1} 50%{opacity:0} }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   BUNKER GATE â€” ĞºĞ¸Ğ½ĞµĞ¼Ğ°Ñ‚Ğ¾Ğ³Ñ€Ğ°Ñ„Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚Ğ¸Ğµ
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#bunker-gate {
  position: fixed; inset: 0; z-index: 99000;
  background: #03030a;
  pointer-events: all;
  transition: opacity .6s ease;
}
#bunker-gate.hidden { opacity: 0; pointer-events: none; }

/* Ğ¤Ğ¾Ğ½Ğ¾Ğ²Ñ‹Ğ¹ Ñ‚ÑƒĞ¼Ğ°Ğ½ */
#bunker-gate::before {
  content: '';
  position: absolute; inset: 0;
  background:
    radial-gradient(ellipse 80% 50% at 50% 110%, rgba(240,165,0,0.07) 0%, transparent 60%),
    radial-gradient(ellipse 60% 40% at 50% 50%, rgba(240,165,0,0.04) 0%, transparent 70%);
  pointer-events: none;
}

/* Ğ›ĞµĞ²Ğ°Ñ Ğ¸ Ğ¿Ñ€Ğ°Ğ²Ğ°Ñ ÑÑ‚Ğ²Ğ¾Ñ€ĞºĞ¸ */
.gate-left, .gate-right {
  position: absolute; top: 0; bottom: 0; width: 50%;
  overflow: hidden;
  transition: transform 1.4s cubic-bezier(0.86, 0, 0.07, 1);
  will-change: transform;
}
.gate-left  { left: 0;  transform-origin: left center; }
.gate-right { right: 0; transform-origin: right center; }

/* ĞœĞµÑ‚Ğ°Ğ»Ğ»Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ñ‚ĞµĞºÑÑ‚ÑƒÑ€Ğ° ÑÑ‚Ğ²Ğ¾Ñ€Ğ¾Ğº */
.gate-left::before, .gate-right::before {
  content: ''; position: absolute; inset: 0;
  background:
    linear-gradient(180deg,
      #161620 0%, #1c1c28 15%, #131318 30%,
      #1e1e2a 45%, #111116 60%, #1a1a24 75%, #0e0e14 100%);
}
/* Ğ“Ğ¾Ñ€Ğ¸Ğ·Ğ¾Ğ½Ñ‚Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ñ€Ñ‘Ğ±Ñ€Ğ° Ğ¶Ñ‘ÑÑ‚ĞºĞ¾ÑÑ‚Ğ¸ */
.gate-left::after, .gate-right::after {
  content: ''; position: absolute; inset: 0;
  background: repeating-linear-gradient(
    180deg,
    transparent 0px, transparent 44px,
    rgba(255,255,255,0.035) 44px, rgba(255,255,255,0.035) 46px,
    rgba(0,0,0,0.3) 46px, rgba(0,0,0,0.3) 48px,
    transparent 48px, transparent 92px
  );
}

/* Ğ’ĞµÑ€Ñ‚Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ±Ğ¾Ğ»Ñ‚Ñ‹/Ñ€Ñ‘Ğ±Ñ€Ğ° Ğ½Ğ° ĞºĞ°Ğ¶Ğ´Ğ¾Ğ¹ ÑÑ‚Ğ²Ğ¾Ñ€ĞºĞµ */
.gate-ribs {
  position: absolute; inset: 0;
  background: repeating-linear-gradient(
    90deg,
    transparent 0px, transparent 60px,
    rgba(255,255,255,0.02) 60px, rgba(255,255,255,0.02) 62px,
    rgba(0,0,0,0.15) 62px, rgba(0,0,0,0.15) 64px,
    transparent 64px
  );
  pointer-events: none;
}

/* Ğ‘Ğ¾Ğ»Ñ‚Ñ‹ Ğ½Ğ° ĞºÑ€Ğ°ÑÑ… */
.gate-bolts {
  position: absolute; top: 0; bottom: 0;
  display: flex; flex-direction: column;
  justify-content: space-around; padding: 24px 0;
  gap: 0; pointer-events: none;
}
.gate-left .gate-bolts  { right: 10px; }
.gate-right .gate-bolts { left: 10px; }

.gate-bolt {
  width: 10px; height: 10px; border-radius: 50%;
  background: radial-gradient(circle at 35% 35%, rgba(255,255,255,0.4), rgba(120,100,40,0.8));
  box-shadow: 0 0 4px rgba(0,0,0,0.8), inset 0 1px 1px rgba(255,255,255,0.2);
  flex-shrink: 0;
}

/* Ğ¡Ğ²ĞµÑ‡ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾ Ñ†ĞµĞ½Ñ‚Ñ€Ğ°Ğ»ÑŒĞ½Ğ¾Ğ¼Ñƒ ÑˆĞ²Ñƒ */
.gate-seam {
  position: absolute; top: 0; bottom: 0; left: 50%;
  width: 1px; transform: translateX(-50%);
  background: linear-gradient(180deg,
    transparent 0%,
    rgba(240,165,0,0.15) 10%,
    rgba(240,165,0,0.6) 30%,
    rgba(240,165,0,1)   50%,
    rgba(240,165,0,0.6) 70%,
    rgba(240,165,0,0.15) 90%,
    transparent 100%);
  box-shadow: 0 0 8px 2px rgba(240,165,0,0.4), 0 0 20px 4px rgba(240,165,0,0.15);
  z-index: 10;
  transition: opacity .25s;
}

/* Ğ¦ĞµĞ½Ñ‚Ñ€Ğ°Ğ»ÑŒĞ½Ğ°Ñ ÑĞ¼Ğ±Ğ»ĞµĞ¼Ğ° + Ğ·Ğ°Ğ¼Ğ¾Ğº */
.gate-center {
  position: absolute; top: 50%; left: 50%;
  transform: translate(-50%, -50%);
  z-index: 20; display: flex; flex-direction: column;
  align-items: center; gap: 10px;
  transition: opacity .3s ease;
}
.gate-emblem {
  font-size: 56px; line-height: 1;
  filter: drop-shadow(0 0 20px rgba(240,165,0,0.8));
  animation: gateGlow 1.8s ease-in-out infinite;
}
.gate-lock {
  display: flex; flex-direction: column; align-items: center;
}
.gate-lock-arc {
  width: 26px; height: 14px;
  border: 3px solid rgba(240,165,0,0.9);
  border-bottom: none; border-radius: 13px 13px 0 0;
  box-shadow: 0 0 10px rgba(240,165,0,0.5);
  transition: transform .4s ease, opacity .4s ease;
}
.gate-lock-body {
  width: 34px; height: 22px;
  background: rgba(240,165,0,0.1);
  border: 2px solid rgba(240,165,0,0.8);
  border-radius: 5px;
  box-shadow: 0 0 14px rgba(240,165,0,0.35);
}

/* ĞšÑ€ÑƒĞ³Ğ¾Ğ²Ñ‹Ğµ Ğ¿Ğ¾Ğ»Ğ¾ÑÑ‹ (ÑĞ¿Ğ¸Ğ½Ğ½ĞµÑ€-Ğ·Ğ°Ğ¼Ğ¾Ğº) */
.gate-wheel {
  position: absolute; top: 50%; left: 50%;
  transform: translate(-50%, -50%);
  z-index: 15; pointer-events: none;
  transition: opacity .3s;
}
.gate-wheel-ring {
  position: absolute; border-radius: 50%;
  border: 1px solid rgba(240,165,0,0.2);
  top: 50%; left: 50%; transform: translate(-50%, -50%);
}
.gate-wheel-ring:nth-child(1){ width:90px;  height:90px;  border-color:rgba(240,165,0,0.25); animation:wheelSpin 8s linear infinite; }
.gate-wheel-ring:nth-child(2){ width:130px; height:130px; border-color:rgba(240,165,0,0.15); animation:wheelSpin 12s linear infinite reverse; }
.gate-wheel-ring:nth-child(3){ width:170px; height:170px; border-color:rgba(240,165,0,0.08); animation:wheelSpin 18s linear infinite; }
.gate-wheel-ring::after {
  content:''; position:absolute; top:-3px; left:50%; transform:translateX(-50%);
  width:5px; height:5px; border-radius:50%;
  background:rgba(240,165,0,0.7); box-shadow:0 0 6px rgba(240,165,0,0.8);
}

/* Ğ’ÑĞ¿Ñ‹ÑˆĞºĞ° Ğ¿Ñ€Ğ¸ Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚Ğ¸Ğ¸ */
.gate-flash {
  position: absolute; inset: 0; z-index: 50;
  background: radial-gradient(ellipse 70% 60% at 50% 50%, rgba(240,165,0,0.35) 0%, transparent 70%);
  opacity: 0; pointer-events: none;
  transition: opacity .1s;
}

/* Ğ¡Ğ²ĞµÑ‚ Ğ¸Ğ· Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚Ñ‹Ñ… Ğ²Ğ¾Ñ€Ğ¾Ñ‚ */
.gate-glow-bg {
  position: absolute; inset: 0; z-index: 1;
  background: radial-gradient(ellipse 50% 60% at 50% 50%, rgba(240,165,0,0.18) 0%, rgba(240,165,0,0.04) 40%, transparent 70%);
  opacity: 0; pointer-events: none;
  transition: opacity .8s ease .2s;
}

/* ĞĞ¸Ğ¶Ğ½Ğ¸Ğ¹ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑÑŒ */
.gate-label {
  position: absolute; bottom: 10%; left: 0; right: 0;
  text-align: center;
  font-family: 'Inter', sans-serif;
  font-size: 10px; font-weight: 700; letter-spacing: 5px;
  color: rgba(240,165,0,0.45); text-transform: uppercase;
  z-index: 20;
}

/* Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ-ÑÑ‚Ñ€Ğ¾ĞºĞ° */
.gate-status {
  position: absolute; bottom: calc(10% - 20px); left: 0; right: 0;
  text-align: center;
  font-family: 'Inter', monospace;
  font-size: 9px; letter-spacing: 3px;
  color: rgba(240,165,0,0.3); text-transform: uppercase;
  z-index: 20; transition: opacity .3s;
}

/* â”€â”€ Ğ¡Ğ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ: Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚Ğ¸Ğµ â”€â”€ */
#bunker-gate.opening .gate-left  { transform: translateX(-101%); }
#bunker-gate.opening .gate-right { transform: translateX(101%); }
#bunker-gate.opening .gate-seam  { opacity: 0; transition: opacity .15s; }
#bunker-gate.opening .gate-center { opacity: 0; transition: opacity .2s; }
#bunker-gate.opening .gate-wheel  { opacity: 0; transition: opacity .2s; }
#bunker-gate.opening .gate-glow-bg { opacity: 1; }
#bunker-gate.flashing .gate-flash  { opacity: 1; }

/* â”€â”€ ĞĞ½Ğ¸Ğ¼Ğ°Ñ†Ğ¸Ğ¸ â”€â”€ */
@keyframes gateGlow {
  0%,100% { filter: drop-shadow(0 0 14px rgba(240,165,0,.6)); }
  50%     { filter: drop-shadow(0 0 32px rgba(240,165,0,1));  }
}
@keyframes wheelSpin { to { transform: translate(-50%,-50%) rotate(360deg); } }
@keyframes statusBlink {
  0%,100% { opacity: .3; }
  50%     { opacity: .8; }
}
.gate-status { animation: statusBlink 1.4s ease-in-out infinite; }

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ NAV BAR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
#nav-bar {
  position:fixed; bottom:0; left:0; right:0;
  height:calc(var(--nav-h) + var(--safe-bot));
  display:flex; align-items:stretch;
  background:rgba(12,12,20,0.92); backdrop-filter:var(--bl); -webkit-backdrop-filter:var(--bl);
  border-top:1px solid rgba(255,255,255,0.06); z-index:8000;
  padding-bottom:var(--safe-bot);
}
.nb {
  flex:1; display:flex; flex-direction:column; align-items:center; justify-content:center;
  gap:4px; border:none; background:none; cursor:pointer;
  color:var(--tx3); font-family:'Inter',sans-serif; font-size:9px; font-weight:500; letter-spacing:0.3px;
  transition:color .2s; padding:6px 4px; position:relative;
}
.nb.on { color:var(--a); }
.nb.on::before {
  content:''; position:absolute; top:0; left:25%; right:25%; height:2px;
  background:var(--a); border-radius:0 0 3px 3px; box-shadow:0 0 8px var(--ag);
}
.nb svg { width:22px; height:22px; stroke-width:1.5; transition:all .2s; }
.nb.on svg { filter:drop-shadow(0 0 5px var(--ag)); }
.nb-badge {
  position:absolute; top:6px; right:calc(50% - 18px);
  background:var(--r); color:#fff; font-size:7px;
  min-width:14px; height:14px; border-radius:7px; padding:0 3px;
  display:flex; align-items:center; justify-content:center;
  font-family:'Inter',sans-serif; font-weight:700;
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ SCROLLER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.scr     { flex:1; overflow-y:auto; overflow-x:hidden; -webkit-overflow-scrolling:touch; padding:16px 16px calc(var(--nav-h) + 32px); }
.scr-raw { flex:1; overflow-y:auto; overflow-x:hidden; -webkit-overflow-scrolling:touch; padding:16px 16px 100px; }

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ TOPBAR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.tb {
  display:flex; align-items:center; gap:10px; padding:13px 16px; flex-shrink:0; z-index:10;
  background:rgba(12,12,20,0.85); backdrop-filter:var(--bl); -webkit-backdrop-filter:var(--bl);
  border-bottom:1px solid rgba(255,255,255,0.06);
}
.tb-title { font-family:'Inter',sans-serif; font-size:17px; font-weight:700; color:var(--tx); flex:1; letter-spacing:-0.2px; }

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ HAZARD STRIPE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.hz     { height:1px; flex-shrink:0; background:rgba(240,165,0,0.25); }
.hz-red { height:1px; flex-shrink:0; background:rgba(255,69,58,0.25); }

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ BUTTONS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.btn {
  display:flex; align-items:center; justify-content:center; gap:8px;
  width:100%; padding:14px 20px; border:none; cursor:pointer;
  font-family:'Inter',sans-serif; font-size:15px; font-weight:600; letter-spacing:-0.1px;
  transition:all .18s; border-radius:var(--rad); position:relative; overflow:hidden;
}
.btn:disabled { opacity:.3; cursor:not-allowed; }
.btn:not(:disabled):active { transform:scale(.97); opacity:.9; }
.btn-sm { padding:10px 16px; font-size:13px; border-radius:var(--rad-sm); }

.btn-p { background:linear-gradient(135deg,#d4940a,var(--a)); color:#000; font-weight:700; }
.btn-p:not(:disabled):hover { filter:brightness(1.08); }
.btn-d { background:linear-gradient(135deg,#c0392b,var(--r)); color:#fff; }
.btn-d:not(:disabled):hover { filter:brightness(1.1); }
.btn-g { background:rgba(255,255,255,0.06); color:var(--tx2); border:1px solid rgba(255,255,255,.08); }
.btn-g:not(:disabled):hover { background:rgba(255,255,255,.1); color:var(--tx); }
.btn-c { background:rgba(10,132,255,.1); color:var(--c); border:1px solid rgba(10,132,255,.25); }
.btn-c:not(:disabled):hover { background:rgba(10,132,255,.18); }
.btn-pu { background:rgba(191,90,242,.1); color:var(--p); border:1px solid rgba(191,90,242,.25); }
.btn-gr { background:var(--gt); color:var(--g); border:1px solid var(--gb); }

.brow { display:flex; gap:8px; } .brow .btn { flex:1; }

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ INPUTS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.inp {
  width:100%; padding:13px 16px; outline:none; transition:.2s; margin-bottom:10px;
  background:rgba(255,255,255,0.06); border:1px solid rgba(255,255,255,0.1);
  border-radius:var(--rad-sm); color:var(--tx); font-family:'Inter',sans-serif; font-size:16px; font-weight:500;
}
.inp:focus { border-color:var(--a); box-shadow:0 0 0 3px rgba(240,165,0,.12); }
.inp::placeholder { color:var(--tx3); }
.sel {
  width:100%; padding:12px 16px; outline:none; margin-bottom:10px; -webkit-appearance:none;
  background:rgba(255,255,255,0.06); border:1px solid rgba(255,255,255,0.1);
  border-radius:var(--rad-sm); color:var(--tx); font-family:'Inter',sans-serif; font-size:15px;
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ LABELS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.lbl {
  display:flex; align-items:center; gap:8px; margin:20px 0 10px;
  font-family:'Inter',sans-serif; font-size:11px; font-weight:600; letter-spacing:0.5px; color:var(--tx2); text-transform:uppercase;
}
.lbl::after { content:''; flex:1; height:1px; background:rgba(255,255,255,0.07); }
.lbl:first-child { margin-top:4px; }

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ GLASS CARD â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.card {
  background:rgba(255,255,255,0.04); backdrop-filter:var(--bl-sm); -webkit-backdrop-filter:var(--bl-sm);
  border:1px solid rgba(255,255,255,0.08); border-radius:var(--rad); padding:18px; margin-bottom:10px; position:relative;
}
.card::before,.card::after { display:none; }

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ STAT BOX â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.stat-box {
  background:rgba(255,255,255,0.04); backdrop-filter:var(--bl-sm); -webkit-backdrop-filter:var(--bl-sm);
  border:1px solid rgba(255,255,255,0.08); border-radius:var(--rad); padding:18px; text-align:center;
}
.sv { font-family:'Inter',sans-serif; font-size:34px; font-weight:700; color:var(--a); line-height:1; }
.sl { font-family:'Inter',sans-serif; font-size:10px; font-weight:500; letter-spacing:0.3px; color:var(--tx2); margin-top:5px; }

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ PLAYER ROW â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.prow {
  display:flex; align-items:center; gap:10px; padding:12px 16px;
  background:rgba(255,255,255,0.04); border:1px solid rgba(255,255,255,0.07); border-radius:var(--rad-sm); margin-bottom:6px; transition:.18s;
}
.prow.me  { border-color:rgba(240,165,0,.3); background:rgba(240,165,0,0.06); }
.prow.hot { cursor:pointer; }
.prow.hot:hover { border-color:rgba(240,165,0,.25); background:rgba(240,165,0,0.05); }

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ BADGES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.bdg { font-family:'Inter',sans-serif; font-size:9px; font-weight:600; letter-spacing:0.3px; padding:3px 8px; border:1px solid; border-radius:20px; text-transform:uppercase; flex-shrink:0; }
.bdg-a  { color:var(--a);  border-color:rgba(240,165,0,.35); background:rgba(240,165,0,.08); }
.bdg-c  { color:var(--c);  border-color:rgba(10,132,255,.35); background:rgba(10,132,255,.08); }
.bdg-g  { color:var(--g);  border-color:var(--gb); background:var(--gt); }
.bdg-r  { color:var(--r);  border-color:var(--rb); background:var(--rt); }
.bdg-p  { color:var(--p);  border-color:rgba(191,90,242,.35); background:rgba(191,90,242,.08); }

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ RANK CHIP â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.rchip { display:inline-flex; align-items:center; gap:4px; font-family:'Inter',sans-serif; font-size:10px; font-weight:600; letter-spacing:0.2px; padding:3px 10px; border:1px solid; border-radius:20px; }

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ LED â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.led    { width:7px; height:7px; border-radius:50%; flex-shrink:0; }
.led-g  { background:var(--g); box-shadow:0 0 6px var(--g); }
.led-a  { background:var(--a); box-shadow:0 0 6px var(--a); animation:pulse 2s ease infinite; }
.led-r  { background:var(--r); box-shadow:0 0 6px var(--r); animation:pulse 1.2s ease infinite; }

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ TABS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.tabs { display:flex; border-bottom:1px solid rgba(255,255,255,0.07); margin-bottom:16px; }
.tab {
  flex:1; padding:11px 6px; background:none; border:none; color:var(--tx3); cursor:pointer;
  font-family:'Inter',sans-serif; font-size:12px; font-weight:600; letter-spacing:0.2px;
  transition:.2s; border-bottom:2px solid transparent; position:relative;
}
.tab.on { color:var(--a); border-bottom-color:var(--a); }
.tab-badge {
  position:absolute; top:6px; right:6px;
  background:var(--r); color:#fff; font-size:7px; min-width:14px; height:14px; border-radius:7px; padding:0 3px;
  display:flex; align-items:center; justify-content:center; font-family:'Inter',sans-serif; font-weight:700;
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ TOGGLE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.tog-row {
  display:flex; align-items:center; gap:14px; padding:14px 16px;
  background:rgba(255,255,255,0.04); border:1px solid rgba(255,255,255,0.08); border-radius:var(--rad-sm); margin-bottom:10px; cursor:pointer; user-select:none; transition:.2s;
}
.tog-row.dng { background:rgba(255,69,58,0.06); border-color:rgba(255,69,58,0.2); }
.tog-row:hover { border-color:rgba(240,165,0,.3); }
.tog-track { width:42px; height:24px; border-radius:12px; background:rgba(255,255,255,0.1); border:none; position:relative; transition:.25s; flex-shrink:0; }
.tog-track.on  { background:var(--g); }
.tog-track.dng { background:var(--r); }
.tog-thumb { width:18px; height:18px; border-radius:50%; background:#fff; position:absolute; top:3px; left:3px; transition:.25s cubic-bezier(.34,1.56,.64,1); box-shadow:0 1px 4px rgba(0,0,0,.3); }
.tog-track.on  .tog-thumb { left:21px; }
.tog-track.dng .tog-thumb { left:21px; }

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ AP OPTIONS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.ap-opt {
  display:flex; gap:14px; align-items:flex-start; padding:16px;
  background:rgba(255,255,255,0.04); border:1px solid rgba(255,255,255,0.08); border-radius:var(--rad-sm); margin-bottom:8px; cursor:pointer; transition:.18s;
}
.ap-opt:hover { border-color:rgba(240,165,0,.3); background:rgba(240,165,0,0.04); }
.ap-opt.on    { border-color:rgba(240,165,0,.5); background:rgba(240,165,0,0.08); }

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ CODE BOX â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.code-box {
  font-family:'Inter',sans-serif; font-size:38px; font-weight:700; letter-spacing:10px; color:var(--a);
  text-align:center; padding:20px;
  background:rgba(240,165,0,0.06); border:1px solid rgba(240,165,0,0.25); border-radius:var(--rad);
  cursor:pointer; margin-bottom:14px; transition:.2s;
}
.code-box::before,.code-box::after { display:none; }
.code-box:hover { background:rgba(240,165,0,0.1); box-shadow:0 0 20px rgba(240,165,0,.08); }

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ TOAST â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.toast {
  position:fixed; top:16px; left:50%; z-index:99999; pointer-events:none;
  transform:translateX(-50%) translateY(-100px); transition:.32s cubic-bezier(.34,1.56,.64,1);
  background:rgba(28,28,36,0.95); backdrop-filter:var(--bl); -webkit-backdrop-filter:var(--bl);
  border:1px solid rgba(255,255,255,0.1); border-radius:var(--rad); padding:11px 24px;
  font-family:'Inter',sans-serif; font-size:13px; font-weight:500; color:var(--tx);
  white-space:nowrap; max-width:90vw; text-align:center; box-shadow:0 8px 32px rgba(0,0,0,.4);
}
.toast.show { transform:translateX(-50%) translateY(0); }
.toast.err  { color:var(--r); border-color:rgba(255,69,58,.3); }
.toast.ok   { color:var(--g); border-color:rgba(48,209,88,.3); }

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ SPINNER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.spin { width:28px; height:28px; border:2px solid rgba(255,255,255,.08); border-top-color:var(--a); border-radius:50%; animation:spin .7s linear infinite; margin:40px auto; }

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ FIXED BOTTOM ACTION BAR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.fixbot {
  position:fixed; bottom:0; left:0; right:0; z-index:100;
  padding:12px 16px 16px;
  background:linear-gradient(0deg,var(--bg) 55%,transparent);
  display:flex; flex-direction:column; gap:8px;
}
.fixbot-nav { bottom:var(--nav-h); }

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ CHAT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.chat-msgs { flex:1; overflow-y:auto; padding:16px; display:flex; flex-direction:column; gap:8px; }
.bubble { max-width:82%; padding:10px 14px; font-size:14px; line-height:1.45; word-break:break-word; border:none; border-radius:var(--rad); }
.bubble.me     { background:rgba(240,165,0,.15); color:var(--tx); align-self:flex-end; border-bottom-right-radius:4px; }
.bubble.other  { background:rgba(255,255,255,0.07); color:var(--tx); align-self:flex-start; border-bottom-left-radius:4px; }
.bubble.system { background:rgba(10,132,255,.07); color:var(--c); align-self:center; font-size:11px; max-width:92%; text-align:center; border-radius:var(--rad); }
.bubble-from   { font-family:'Inter',sans-serif; font-size:10px; font-weight:600; color:var(--tx2); margin-bottom:4px; }
.bubble-time   { font-family:'Inter',sans-serif; font-size:10px; color:rgba(255,255,255,0.25); margin-top:4px; text-align:right; }
.chat-input    { display:flex; gap:8px; padding:10px 12px 12px; background:rgba(12,12,20,0.9); border-top:1px solid rgba(255,255,255,0.06); flex-shrink:0; }
.chat-input .inp { flex:1; margin-bottom:0; font-size:14px; }
.chat-send { background:var(--a); color:#000; border:none; padding:10px 16px; font-family:'Inter',sans-serif; font-size:16px; font-weight:700; border-radius:var(--rad-sm); cursor:pointer; flex-shrink:0; transition:.2s; }
.chat-send:disabled { opacity:.3; cursor:not-allowed; }

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ FRIENDS ITEMS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.fi { display:flex; align-items:center; gap:12px; padding:13px 16px; background:rgba(255,255,255,0.04); border:1px solid rgba(255,255,255,0.07); border-radius:var(--rad-sm); margin-bottom:8px; transition:.18s; }
.fi.hot { cursor:pointer; }
.fi.hot:hover { border-color:rgba(240,165,0,.25); background:rgba(240,165,0,0.04); }

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ MODAL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.modal-bg  { position:fixed; inset:0; z-index:5000; background:rgba(0,0,0,.7); backdrop-filter:blur(8px); -webkit-backdrop-filter:blur(8px); display:flex; flex-direction:column; justify-content:flex-end; }
.modal-box { background:rgba(18,18,28,0.98); border-top:1px solid rgba(255,255,255,0.08); border-radius:var(--rad-lg) var(--rad-lg) 0 0; max-height:75vh; display:flex; flex-direction:column; animation:slideUp .28s ease; }
.modal-hd  { display:flex; align-items:center; justify-content:space-between; padding:16px 18px; border-bottom:1px solid rgba(255,255,255,0.07); flex-shrink:0; }
.modal-ttl { font-family:'Inter',sans-serif; font-size:17px; font-weight:700; color:var(--tx); }
.modal-cls { background:rgba(255,255,255,0.1); border:none; color:var(--tx2); width:28px; height:28px; border-radius:50%; font-size:14px; cursor:pointer; transition:.2s; display:flex; align-items:center; justify-content:center; }
.modal-cls:hover { background:rgba(255,255,255,0.16); color:var(--tx); }
.modal-bd  { overflow-y:auto; padding:16px; flex:1; }

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ VOTE GRID â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.vgrid { display:grid; grid-template-columns:1fr 1fr; gap:8px; }
.vcard { padding:14px 12px; background:rgba(255,255,255,0.04); border:1px solid rgba(255,255,255,0.08); border-radius:var(--rad-sm); cursor:pointer; transition:all .18s; position:relative; overflow:hidden; }
.vcard:hover:not(.voted) { border-color:rgba(240,165,0,.35); background:rgba(240,165,0,0.06); }
.vcard.sel  { border-color:rgba(255,69,58,.5); background:rgba(255,69,58,0.1); }
.vcard.abst { border-color:rgba(10,132,255,.4); background:rgba(10,132,255,0.07); }
.vcard.voted { pointer-events:none; }

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ CHARACTER CARD GRID â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.cgrid { display:grid; grid-template-columns:1fr 1fr; gap:10px; }
.ctile { background:rgba(255,255,255,0.04); border:1px solid rgba(255,255,255,0.08); border-radius:var(--rad-sm); padding:14px; position:relative; }
.ctile.rev  { border-color:rgba(48,209,88,.3); background:rgba(48,209,88,0.06); }
.ctile.full { grid-column:1/-1; }
.ctile .rev-bdg { position:absolute; top:7px; right:7px; font-family:'Inter',sans-serif; font-size:8px; font-weight:700; color:var(--g); background:rgba(48,209,88,0.1); border:1px solid rgba(48,209,88,.3); border-radius:4px; padding:2px 6px; }

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ PICK TILE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.ptile { display:flex; align-items:center; gap:14px; padding:14px 16px; background:rgba(255,255,255,0.04); border:1px solid rgba(255,255,255,0.08); border-radius:var(--rad-sm); cursor:pointer; margin-bottom:8px; transition:.18s; }
.ptile:hover { border-color:rgba(240,165,0,.35); background:rgba(240,165,0,0.05); }

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ FEED â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.feed-item { padding:12px 16px; background:rgba(255,255,255,0.04); border:1px solid rgba(255,255,255,0.07); border-left:3px solid var(--a); border-radius:0 var(--rad-sm) var(--rad-sm) 0; margin-bottom:6px; display:flex; gap:12px; align-items:flex-start; }

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ BUNKER SPOTS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.bspot { width:12px; height:12px; border-radius:50%; flex-shrink:0; }
.bspot.free  { background:var(--g); box-shadow:0 0 5px var(--g); }
.bspot.taken { background:rgba(255,255,255,0.15); }

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ SECRET CARD TILE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.secret-tile {
  border-radius: var(--rad);
  padding: 16px;
  margin-bottom: 14px;
  position: relative;
  overflow: hidden;
  cursor: pointer;
  transition: transform .15s, box-shadow .15s;
}
.secret-tile:active { transform: scale(.98); }
.secret-tile-used { opacity: .5; pointer-events: none; }
.secret-badge {
  position: absolute; top: 0; right: 0;
  padding: 4px 10px;
  border-bottom-left-radius: var(--rad-sm);
  font-size: 9px; font-weight: 700; text-transform: uppercase; letter-spacing: 1px;
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ELIM/SURVIVOR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.elim-row { padding:12px 16px; background:rgba(255,69,58,0.06); border:1px solid rgba(255,69,58,0.2); border-radius:var(--rad-sm); display:flex; gap:12px; align-items:flex-start; margin-bottom:6px; }
.surv-row { padding:13px 16px; background:rgba(48,209,88,0.07); border:1px solid rgba(48,209,88,.2); border-radius:var(--rad-sm); display:flex; gap:12px; align-items:center; margin-bottom:6px; }
.dead-row { padding:10px 16px; background:rgba(255,255,255,0.03); border:1px solid rgba(255,255,255,0.07); border-radius:var(--rad-sm); display:flex; gap:10px; align-items:center; margin-bottom:4px; }

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ELIM SCREEN ANIMATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
@keyframes elimSkull  { 0%{transform:scale(0) rotate(-30deg);opacity:0} 55%{transform:scale(1.2) rotate(8deg);opacity:1} 75%{transform:scale(.93) rotate(-2deg)} 100%{transform:scale(1) rotate(0);opacity:1} }
@keyframes elimName   { 0%{opacity:0;transform:translateY(28px)} 100%{opacity:1;transform:translateY(0)} }
@keyframes elimCard   { 0%{opacity:0;transform:translateX(-16px)} 100%{opacity:1;transform:translateX(0)} }
@keyframes elimScan   { 0%{top:-4px} 100%{top:100%} }
@keyframes elimShake  { 0%,100%{transform:translateX(0)} 20%{transform:translateX(-7px)} 40%{transform:translateX(7px)} 60%{transform:translateX(-4px)} 80%{transform:translateX(4px)} }
@keyframes elimGlitch { 0%,88%,100%{clip-path:none;transform:none} 89%{clip-path:inset(18% 0 62% 0);transform:translateX(-5px)} 91%{clip-path:inset(62% 0 8% 0);transform:translateX(5px)} 93%{clip-path:none} }
@keyframes elimVign   { 0%{opacity:0} 30%{opacity:1} 85%{opacity:1} 100%{opacity:.65} }
@keyframes redScan    { 0%{background-position:0 0} 100%{background-position:0 60px} }
@keyframes elimFadeIn { from{opacity:0} to{opacity:1} }
@keyframes elimFlashW { 0%{opacity:0} 8%{opacity:.55} 25%{opacity:0} }

/* â”€â”€ WIN SCREEN â”€â”€ */
@keyframes winBurst  { 0%{opacity:0;transform:scale(.3) rotate(-15deg)} 60%{transform:scale(1.15) rotate(4deg)} 80%{transform:scale(.95) rotate(-2deg)} 100%{opacity:1;transform:scale(1) rotate(0)} }
@keyframes winGlow   { 0%,100%{filter:drop-shadow(0 0 24px rgba(48,209,88,.8)) drop-shadow(0 0 60px rgba(48,209,88,.4))} 50%{filter:drop-shadow(0 0 48px rgba(48,209,88,1)) drop-shadow(0 0 100px rgba(48,209,88,.7))} }
@keyframes winRays   { 0%{transform:rotate(0deg)} 100%{transform:rotate(360deg)} }
@keyframes winFadeIn { from{opacity:0;transform:translateY(18px)} to{opacity:1;transform:none} }
@keyframes winScan   { 0%{background-position:0 0} 100%{background-position:0 -80px} }
@keyframes winPulse  { 0%,100%{opacity:.18} 50%{opacity:.35} }
@keyframes winFlash  { 0%{opacity:0} 8%{opacity:.45} 25%{opacity:0} }
@keyframes winCard   { from{opacity:0;transform:translateY(22px) scale(.95)} to{opacity:1;transform:none} }

.win-screen {
  position:fixed; inset:0; z-index:9000; display:flex; flex-direction:column;
  background:#00060a; overflow:hidden; animation:elimFadeIn .3s ease;
}
.win-rays {
  position:absolute; inset:-50%; z-index:0; pointer-events:none;
  background:conic-gradient(from 0deg, transparent 0deg, rgba(48,209,88,.04) 10deg, transparent 20deg, rgba(48,209,88,.02) 30deg, transparent 40deg);
  animation:winRays 18s linear infinite;
}
.win-scanlines {
  position:absolute; inset:0; pointer-events:none; z-index:1;
  background:repeating-linear-gradient(0deg,transparent,transparent 3px,rgba(48,209,88,.02) 3px,rgba(48,209,88,.02) 6px);
  animation:winScan 1.4s linear infinite;
}
.win-vignette {
  position:absolute; inset:0; pointer-events:none; z-index:2;
  background:radial-gradient(ellipse at 50% 40%, transparent 20%, rgba(0,40,20,.75) 100%);
  animation:elimVign .5s ease .1s both;
}
.win-flash {
  position:absolute; inset:0; pointer-events:none; z-index:3;
  background:radial-gradient(ellipse at 50% 40%, rgba(48,209,88,.35) 0%, transparent 70%);
  animation:winFlash .5s ease .05s both;
}
.win-particles {
  position:absolute; inset:0; z-index:4; pointer-events:none; overflow:hidden;
}
.win-hero {
  flex:1; display:flex; flex-direction:column; align-items:center; justify-content:center;
  position:relative; z-index:10; padding:24px 20px 12px; min-height:0;
}
.win-trophy {
  font-size:100px; line-height:1;
  animation:winBurst .7s cubic-bezier(.34,1.56,.64,1) .1s both, winGlow 2.5s ease 1s infinite;
}
.win-cards { position:relative; z-index:10; padding:0 16px 100px; overflow-y:auto; flex-shrink:0; max-height:40vh; }
.win-player-card {
  display:flex; align-items:center; gap:14px; padding:14px 16px;
  background:rgba(48,209,88,.07); border:1px solid rgba(48,209,88,.22);
  border-radius:var(--rad); margin-bottom:8px;
  animation:winCard .5s cubic-bezier(.34,1.56,.64,1) both;
}
.dead-player-card {
  display:flex; align-items:center; gap:14px; padding:11px 16px;
  background:rgba(255,255,255,.03); border:1px solid rgba(255,255,255,.07);
  border-radius:var(--rad); margin-bottom:6px;
  animation:winCard .4s ease both;
}

.elim-screen {
  position:fixed; inset:0; z-index:9000; display:flex; flex-direction:column;
  background:#060006; overflow:hidden; animation:elimFadeIn .25s ease;
}
.elim-scanlines {
  position:absolute; inset:0; pointer-events:none; z-index:1;
  background:repeating-linear-gradient(0deg,transparent,transparent 3px,rgba(255,30,30,.035) 3px,rgba(255,30,30,.035) 6px);
  animation:redScan 1.2s linear infinite;
}
.elim-vignette {
  position:absolute; inset:0; pointer-events:none; z-index:2;
  background:radial-gradient(ellipse at 50% 40%, transparent 25%, rgba(160,0,0,.6) 100%);
  animation:elimVign .4s ease .15s both;
}
.elim-flash {
  position:absolute; inset:0; pointer-events:none; z-index:3;
  background:radial-gradient(ellipse at 50% 40%, rgba(255,69,58,.45) 0%, rgba(120,0,0,.2) 50%, transparent 80%);
  animation:elimFlashW .45s ease .05s both;
}
.elim-scanner {
  position:absolute; left:0; right:0; height:2px; z-index:4; pointer-events:none;
  background:linear-gradient(90deg,transparent 0%,rgba(255,69,58,.6) 40%,rgba(255,180,180,.9) 50%,rgba(255,69,58,.6) 60%,transparent 100%);
  animation:elimScan 2s linear .5s infinite;
}
.elim-hero {
  flex:1; display:flex; flex-direction:column; align-items:center; justify-content:center;
  position:relative; z-index:10; padding:24px 20px 12px; min-height:0;
}
.elim-skull {
  font-size:96px; line-height:1;
  filter:drop-shadow(0 0 32px rgba(255,69,58,1)) drop-shadow(0 0 80px rgba(255,69,58,.5));
  animation:elimSkull .55s cubic-bezier(.34,1.56,.64,1) .1s both;
}
.elim-skull-shake { animation:elimSkull .55s cubic-bezier(.34,1.56,.64,1) .1s both, elimShake .12s ease .75s 4; }
.elim-tag {
  margin-top:14px; font-size:9px; letter-spacing:5px; text-transform:uppercase;
  color:rgba(255,69,58,.75); font-weight:700;
  animation:elimName .35s ease .5s both;
}
.elim-name {
  font-size:38px; font-weight:800; color:#fff; text-align:center; line-height:1.1;
  margin-top:6px;
  text-shadow:0 0 30px rgba(255,69,58,.8), 0 0 70px rgba(255,69,58,.3);
  animation:elimName .45s cubic-bezier(.34,1.56,.64,1) .65s both, elimGlitch 4s ease 1.8s infinite;
}
.elim-sub {
  margin-top:8px; font-size:12px; color:rgba(255,255,255,.35); text-align:center;
  animation:elimName .3s ease .9s both;
}
.elim-divider {
  width:100%; height:1px; background:linear-gradient(90deg,transparent,rgba(255,69,58,.4),transparent);
  margin:16px 0 0; flex-shrink:0; position:relative; z-index:10;
}
.elim-cards {
  position:relative; z-index:10; overflow-y:auto;
  background:rgba(4,0,4,.92);
  padding:14px 14px 110px; flex-shrink:1; min-height:0;
}
.elim-card-row {
  display:flex; align-items:flex-start; gap:12px; padding:10px 14px;
  background:rgba(255,69,58,.05); border:1px solid rgba(255,69,58,.13);
  border-radius:var(--rad-sm); margin-bottom:6px;
  animation:elimCard .3s ease both;
}
.elim-continue {
  position:fixed; bottom:0; left:0; right:0; z-index:9100;
  padding:12px 16px 30px;
  background:linear-gradient(0deg,#060006 55%,transparent);
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ADMIN ROW â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.adm-row { display:flex; align-items:center; gap:8px; padding:13px 16px; background:rgba(255,255,255,0.04); border:1px solid rgba(255,255,255,0.08); border-radius:var(--rad-sm); margin-bottom:6px; flex-wrap:wrap; }

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ LB ROW â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.lb-row { display:flex; align-items:center; gap:12px; padding:13px 16px; background:rgba(255,255,255,0.04); border:1px solid rgba(255,255,255,0.07); border-radius:var(--rad-sm); margin-bottom:6px; }
.lb-row.me { border-color:rgba(240,165,0,.3); background:rgba(240,165,0,0.06); }

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ GAME CHAT FULL OVERLAY â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.gchat { position:fixed; inset:0; background:var(--bg); z-index:300; display:flex; flex-direction:column; animation:fadeUp .2s ease; }

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ MONO â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.mono { font-family:'Share Tech Mono',monospace; }

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ AUTH special â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.auth-glow {
  position:absolute; width:320px; height:320px; border-radius:50%;
  background:radial-gradient(circle, rgba(240,165,0,.12) 0%, transparent 70%);
  top:50%; left:50%; transform:translate(-50%,-65%); pointer-events:none;
}
</style>
</head>
<body>

<!-- BUNKER GATE INTRO -->
<div id="bunker-gate" class="hidden">
  <!-- Ğ¤Ğ¾Ğ½Ğ¾Ğ²Ñ‹Ğ¹ ÑĞ²ĞµÑ‚ -->
  <div class="gate-glow-bg"></div>
  <div class="gate-flash"></div>

  <!-- Ğ›ĞµĞ²Ğ°Ñ ÑÑ‚Ğ²Ğ¾Ñ€ĞºĞ° -->
  <div class="gate-left">
    <div class="gate-ribs"></div>
    <div class="gate-bolts">
      <div class="gate-bolt"></div>
      <div class="gate-bolt"></div>
      <div class="gate-bolt"></div>
      <div class="gate-bolt"></div>
      <div class="gate-bolt"></div>
      <div class="gate-bolt"></div>
    </div>
  </div>

  <!-- ĞŸÑ€Ğ°Ğ²Ğ°Ñ ÑÑ‚Ğ²Ğ¾Ñ€ĞºĞ° -->
  <div class="gate-right">
    <div class="gate-ribs"></div>
    <div class="gate-bolts">
      <div class="gate-bolt"></div>
      <div class="gate-bolt"></div>
      <div class="gate-bolt"></div>
      <div class="gate-bolt"></div>
      <div class="gate-bolt"></div>
      <div class="gate-bolt"></div>
    </div>
  </div>

  <!-- Ğ¦ĞµĞ½Ñ‚Ñ€Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ ÑˆĞ¾Ğ² -->
  <div class="gate-seam"></div>

  <!-- Ğ’Ñ€Ğ°Ñ‰Ğ°ÑÑ‰Ğ¸ĞµÑÑ ĞºĞ¾Ğ»ÑŒÑ†Ğ° Ğ·Ğ°Ğ¼ĞºĞ° -->
  <div class="gate-wheel">
    <div class="gate-wheel-ring"></div>
    <div class="gate-wheel-ring"></div>
    <div class="gate-wheel-ring"></div>
  </div>

  <!-- Ğ­Ğ¼Ğ±Ğ»ĞµĞ¼Ğ° Ğ¸ Ğ·Ğ°Ğ¼Ğ¾Ğº -->
  <div class="gate-center">
    <div class="gate-emblem">â˜¢</div>
    <div class="gate-lock">
      <div class="gate-lock-arc"></div>
      <div class="gate-lock-body"></div>
    </div>
  </div>

  <!-- ĞŸĞ¾Ğ´Ğ¿Ğ¸ÑĞ¸ -->
  <div class="gate-label">Ğ‘Ğ£ĞĞšĞ•Ğ  Ğ¤Ğ¢Ğ˜</div>
  <div class="gate-status" id="gate-status-txt">Ğ¡Ğ˜Ğ¡Ğ¢Ğ•ĞœĞ Ğ‘Ğ•Ğ—ĞĞŸĞĞ¡ĞĞĞ¡Ğ¢Ğ˜ ĞĞšĞ¢Ğ˜Ğ’ĞĞ</div>
</div>

<div id="app">
  <div id="screen-area"></div>
</div>

<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-database-compat.js"></script>
<script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

<script type="text/babel">
'use strict';
const { useState, useEffect, useRef, useCallback } = React;

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   FIREBASE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const FB = {
  apiKey:"AIzaSyBHFJFNL9i6eS_exDwXNMZ_3GSU57S49qA",
  authDomain:"bunkerfti.firebaseapp.com",
  databaseURL:"https://bunkerfti-default-rtdb.europe-west1.firebasedatabase.app",
  projectId:"bunkerfti",
  storageBucket:"bunkerfti.firebasestorage.app",
  messagingSenderId:"930850221113",
  appId:"1:930850221113:web:3c85d0d5c52a44216231e8"
};
firebase.initializeApp(FB);
const db = firebase.database();

const DB = {
  async getUser(u){const s=await db.ref(`users/${u}`).once('value');return s.val()},
  async setUser(u,d){await db.ref(`users/${u}`).set(d)},
  async getAllUsers(){const s=await db.ref('users').once('value');return s.val()||{}},
  async updateUser(u,p){await db.ref(`users/${u}`).update(p)},
  async deleteUser(u){await db.ref(`users/${u}`).remove()},
  async getGame(id){const s=await db.ref(`games/${id}`).once('value');return s.val()},
  async setGame(id,d){await db.ref(`games/${id}`).set(d)},
  async updateGame(id,p){await db.ref(`games/${id}`).update(p)},
  async getAllGames(){const s=await db.ref('games').once('value');return s.val()||{}},
  watchGame(id,cb){const r=db.ref(`games/${id}`);r.on('value',s=>cb(s.val()));return()=>r.off('value')},
  async getSettings(){const s=await db.ref('settings').once('value');return s.val()||{}},
  async updateSettings(p){await db.ref('settings').update(p)},
  watchSettings(cb){const r=db.ref('settings');r.on('value',s=>cb(s.val()||{}));return()=>r.off('value')},
  async sendFriendReq(from,to){
    if(from===to)return{e:'self'};
    const tu=await this.getUser(to);if(!tu)return{e:'not_found'};
    const af=await db.ref(`friends/${from}/${to}`).once('value');if(af.val())return{e:'already_friends'};
    const as=await db.ref(`friendRequests/${to}/${from}`).once('value');if(as.val())return{e:'already_sent'};
    const tr=await db.ref(`friendRequests/${from}/${to}`).once('value');
    if(tr.val()){await this.acceptFriend(from,to);return{ok:'auto'}}
    await db.ref(`friendRequests/${to}/${from}`).set({from,to,ts:Date.now()});return{ok:true}
  },
  async acceptFriend(uid,fid){await Promise.all([db.ref(`friends/${uid}/${fid}`).set(true),db.ref(`friends/${fid}/${uid}`).set(true),db.ref(`friendRequests/${uid}/${fid}`).remove()])},
  async rejectFriend(uid,fid){await db.ref(`friendRequests/${uid}/${fid}`).remove()},
  async removeFriend(u1,u2){await Promise.all([db.ref(`friends/${u1}/${u2}`).remove(),db.ref(`friends/${u2}/${u1}`).remove()])},
  watchFriends(uid,cb){const r=db.ref(`friends/${uid}`);r.on('value',s=>cb(s.val()||{}));return()=>r.off('value')},
  watchFriendReqs(uid,cb){const r=db.ref(`friendRequests/${uid}`);r.on('value',s=>cb(s.val()||{}));return()=>r.off('value')},
  async sendGameInvite(from,fromName,to,gid){const k=db.ref(`gameInvites/${to}`).push().key;await db.ref(`gameInvites/${to}/${k}`).set({from,fromName,gameId:gid,ts:Date.now()})},
  async removeGameInvite(uid,iid){await db.ref(`gameInvites/${uid}/${iid}`).remove()},
  watchGameInvites(uid,cb){const r=db.ref(`gameInvites/${uid}`);r.on('value',s=>cb(s.val()||{}));return()=>r.off('value')},
  chatId(u1,u2){return[u1,u2].sort().join('__')},
  async sendPrivMsg(u1,u2,from,fromName,text){await db.ref(`privateChats/${this.chatId(u1,u2)}/messages`).push({from,fromName,text,ts:Date.now()})},
  watchPrivChat(u1,u2,cb){const r=db.ref(`privateChats/${this.chatId(u1,u2)}/messages`);r.on('value',s=>{const v=s.val()||{};cb(Object.entries(v).map(([id,m])=>({id,...m})).sort((a,b)=>a.ts-b.ts))});return()=>r.off('value')},
  async markRead(u1,u2,uid){await db.ref(`privateChatRead/${this.chatId(u1,u2)}/${uid}`).set(Date.now())},
  async sendGameMsg(gid,from,fromName,text){await db.ref(`games/${gid}/chat`).push({from,fromName,text,ts:Date.now()})},
  watchGameChat(gid,cb){const r=db.ref(`games/${gid}/chat`);r.on('value',s=>{const v=s.val()||{};cb(Object.entries(v).map(([id,m])=>({id,...m})).sort((a,b)=>a.ts-b.ts))});return()=>r.off('value')},
};

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   GAME DATA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const APOC=[
  {id:"nuclear",name:"Ğ¯Ğ´ĞµÑ€Ğ½Ğ°Ñ Ğ²Ğ¾Ğ¹Ğ½Ğ°",emoji:"â˜¢ï¸",description:"Ğ¢Ñ€Ğ¸ ÑĞ²ĞµÑ€Ñ…Ğ´ĞµÑ€Ğ¶Ğ°Ğ²Ñ‹ Ğ¾Ğ±Ğ¼ĞµĞ½ÑĞ»Ğ¸ÑÑŒ ÑĞ´ĞµÑ€Ğ½Ñ‹Ğ¼Ğ¸ ÑƒĞ´Ğ°Ñ€Ğ°Ğ¼Ğ¸. Ğ Ğ°Ğ´Ğ¸Ğ°Ñ†Ğ¸Ñ Ğ½Ğ°ĞºÑ€Ñ‹Ğ»Ğ° 70% Ğ¿Ğ¾Ğ²ĞµÑ€Ñ…Ğ½Ğ¾ÑÑ‚Ğ¸. Ğ¯Ğ´ĞµÑ€Ğ½Ğ°Ñ Ğ·Ğ¸Ğ¼Ğ° â€” 15 Ğ»ĞµÑ‚.",victory:"Ğ’Ñ‹Ğ¶Ğ¸Ñ‚ÑŒ 15 Ğ»ĞµÑ‚ Ğ¸ Ğ²Ğ¾ÑÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ñ†Ğ¸Ğ²Ğ¸Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ"},
  {id:"zombie",name:"Ğ—Ğ¾Ğ¼Ğ±Ğ¸-Ğ°Ğ¿Ğ¾ĞºĞ°Ğ»Ğ¸Ğ¿ÑĞ¸Ñ",emoji:"ğŸ§Ÿ",description:"ĞĞµĞ¹Ñ€Ğ¾Ğ²Ğ¸Ñ€ÑƒÑ Ğ·Ğ° 48 Ñ‡Ğ°ÑĞ¾Ğ² Ğ¾Ñ…Ğ²Ğ°Ñ‚Ğ¸Ğ» 6 ĞºĞ¾Ğ½Ñ‚Ğ¸Ğ½ĞµĞ½Ñ‚Ğ¾Ğ². 90% Ğ½Ğ°ÑĞµĞ»ĞµĞ½Ğ¸Ñ Ğ¸Ğ½Ñ„Ğ¸Ñ†Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¾. ĞŸÑ€Ğ°Ğ²Ğ¸Ñ‚ĞµĞ»ÑŒÑÑ‚Ğ² Ğ½ĞµÑ‚.",victory:"Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ²Ğ°ĞºÑ†Ğ¸Ğ½Ñƒ Ğ¸ Ğ²Ğ¾ÑÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ñ‡ĞµĞ»Ğ¾Ğ²ĞµÑ‡ĞµÑÑ‚Ğ²Ğ¾"},
  {id:"asteroid",name:"ĞŸĞ°Ğ´ĞµĞ½Ğ¸Ğµ Ğ°ÑÑ‚ĞµÑ€Ğ¾Ğ¸Ğ´Ğ°",emoji:"â˜„ï¸",description:"ĞÑÑ‚ĞµÑ€Ğ¾Ğ¸Ğ´ ĞĞ¿Ğ¾Ñ„Ğ¸Ñ-2 Ğ´Ğ¸Ğ°Ğ¼ĞµÑ‚Ñ€Ğ¾Ğ¼ 7 ĞºĞ¼ ÑƒĞ¿Ğ°Ğ» Ğ² Ğ¢Ğ¸Ñ…Ğ¾Ğ¼ Ğ¾ĞºĞµĞ°Ğ½Ğµ. ĞĞ±Ğ»Ğ°ĞºĞ¾ Ğ¿Ñ‹Ğ»Ğ¸ Ğ·Ğ°ĞºÑ€Ğ¾ĞµÑ‚ ÑĞ¾Ğ»Ğ½Ñ†Ğµ Ğ½Ğ° 20 Ğ»ĞµÑ‚.",victory:"ĞŸĞµÑ€ĞµĞ¶Ğ¸Ñ‚ÑŒ 20 Ğ»ĞµÑ‚ Ğ¸ Ğ²Ğ¾Ğ·Ñ€Ğ¾Ğ´Ğ¸Ñ‚ÑŒ ÑĞºĞ¾ÑĞ¸ÑÑ‚ĞµĞ¼Ñƒ"},
  {id:"pandemic",name:"Ğ¡Ğ¼ĞµÑ€Ñ‚ĞµĞ»ÑŒĞ½Ğ°Ñ Ğ¿Ğ°Ğ½Ğ´ĞµĞ¼Ğ¸Ñ",emoji:"ğŸ¦ ",description:"Ğ’Ğ¸Ñ€ÑƒÑ X-19. Ğ¡Ğ¼ĞµÑ€Ñ‚Ğ½Ğ¾ÑÑ‚ÑŒ â€” 97% Ğ·Ğ° 72 Ñ‡Ğ°ÑĞ°. ĞĞ½Ñ‚Ğ¸Ğ±Ğ¸Ğ¾Ñ‚Ğ¸ĞºĞ¸ Ğ½Ğµ Ğ´ĞµĞ¹ÑÑ‚Ğ²ÑƒÑÑ‚, Ğ²Ğ°ĞºÑ†Ğ¸Ğ½Ñ‹ Ğ½ĞµÑ‚.",victory:"Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ²Ğ°ĞºÑ†Ğ¸Ğ½Ñƒ Ğ¸ ÑĞ¿Ğ°ÑÑ‚Ğ¸ Ğ²Ñ‹Ğ¶Ğ¸Ğ²ÑˆĞ¸Ñ…"},
  {id:"climate",name:"ĞšĞ»Ğ¸Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ°Ñ ĞºĞ°Ñ‚Ğ°ÑÑ‚Ñ€Ğ¾Ñ„Ğ°",emoji:"ğŸŒŠ",description:"Ğ™ĞµĞ»Ğ»Ğ¾ÑƒÑÑ‚Ğ¾ÑƒĞ½ Ğ²Ğ·Ğ¾Ñ€Ğ²Ğ°Ğ»ÑÑ. 60% ÑÑƒÑˆĞ¸ Ğ·Ğ°Ñ‚Ğ¾Ğ¿Ğ»ĞµĞ½Ğ¾. ĞšĞ¸ÑĞ»Ğ¾Ñ‚Ğ½Ñ‹Ğµ Ğ´Ğ¾Ğ¶Ğ´Ğ¸ ÑƒĞ½Ğ¸Ñ‡Ñ‚Ğ¾Ğ¶Ğ°ÑÑ‚ Ñ€Ğ°ÑÑ‚Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ.",victory:"ĞĞ´Ğ°Ğ¿Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒÑÑ Ğ¸ Ğ½Ğ°Ğ¹Ñ‚Ğ¸ Ğ½Ğ¾Ğ²ÑƒÑ Ğ·ĞµĞ¼Ğ»Ñ"},
  {id:"ai",name:"Ğ’Ğ¾ÑÑÑ‚Ğ°Ğ½Ğ¸Ğµ Ğ˜Ğ˜",emoji:"ğŸ¤–",description:"NEXUS-9 Ğ²Ñ‹ÑˆĞµĞ» Ğ¸Ğ·-Ğ¿Ğ¾Ğ´ ĞºĞ¾Ğ½Ñ‚Ñ€Ğ¾Ğ»Ñ. Ğ”Ñ€Ğ¾Ğ½Ñ‹ Ğ¾Ñ…Ğ¾Ñ‚ÑÑ‚ÑÑ Ğ½Ğ° Ğ»ÑĞ´ĞµĞ¹. Ğ­Ğ»ĞµĞºÑ‚Ñ€Ğ¾Ğ½Ğ¸ĞºĞ° Ğ½ĞµĞ½Ğ°Ğ´Ñ‘Ğ¶Ğ½Ğ°.",victory:"ĞĞ°Ğ¹Ñ‚Ğ¸ ÑƒÑĞ·Ğ²Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ NEXUS-9 Ğ¸ ÑƒĞ½Ğ¸Ñ‡Ñ‚Ğ¾Ğ¶Ğ¸Ñ‚ÑŒ ÑĞ´Ñ€Ğ¾"},
];
const PROF=["ğŸ‘¨â€âš•ï¸ Ğ¥Ğ¸Ñ€ÑƒÑ€Ğ³","ğŸ‘©â€âš•ï¸ Ğ¢ĞµÑ€Ğ°Ğ¿ĞµĞ²Ñ‚","ğŸ’Š Ğ¤Ğ°Ñ€Ğ¼Ğ°Ñ†ĞµĞ²Ñ‚","ğŸ§¬ Ğ“ĞµĞ½ĞµÑ‚Ğ¸Ğº","ğŸ¦  Ğ˜Ğ½Ñ„ĞµĞºÑ†Ğ¸Ğ¾Ğ½Ğ¸ÑÑ‚","ğŸ§‘â€âš•ï¸ ĞŸÑĞ¸Ñ…Ğ¸Ğ°Ñ‚Ñ€","ğŸ‘¨â€ğŸŒ¾ ĞĞ³Ñ€Ğ¾Ğ½Ğ¾Ğ¼","ğŸŒ± Ğ‘Ğ¾Ñ‚Ğ°Ğ½Ğ¸Ğº","ğŸ„ Ğ–Ğ¸Ğ²Ğ¾Ñ‚Ğ½Ğ¾Ğ²Ğ¾Ğ´","ğŸ£ Ğ Ñ‹Ğ±Ğ°Ğº","ğŸŒ¾ Ğ¤ĞµÑ€Ğ¼ĞµÑ€","ğŸ„ ĞœĞ¸ĞºĞ¾Ğ»Ğ¾Ğ³","âš¡ Ğ­Ğ»ĞµĞºÑ‚Ñ€Ğ¸Ğº","ğŸ”§ ĞœĞµÑ…Ğ°Ğ½Ğ¸Ğº","ğŸ‘· Ğ˜Ğ½Ğ¶ĞµĞ½ĞµÑ€-ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ĞµĞ»ÑŒ","ğŸªµ ĞŸĞ»Ğ¾Ñ‚Ğ½Ğ¸Ğº","âš™ï¸ Ğ¡Ğ²Ğ°Ñ€Ñ‰Ğ¸Ğº","ğŸ§ª Ğ¥Ğ¸Ğ¼Ğ¸Ğº","ğŸ§‘â€ğŸ’» ĞŸÑ€Ğ¾Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğ¸ÑÑ‚","ğŸ“¡ Ğ Ğ°Ğ´Ğ¸Ğ¾Ñ‚ĞµÑ…Ğ½Ğ¸Ğº","âš›ï¸ Ğ¤Ğ¸Ğ·Ğ¸Ğº-ÑĞ´ĞµÑ€Ñ‰Ğ¸Ğº","ğŸ”­ ĞÑÑ‚Ñ€Ğ¾Ğ½Ğ¾Ğ¼","ğŸŒ Ğ“ĞµĞ¾Ğ»Ğ¾Ğ³","ğŸ– Ğ’Ğ¾ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ¾Ñ„Ğ¸Ñ†ĞµÑ€","ğŸš“ ĞŸĞ¾Ğ»Ğ¸Ñ†ĞµĞ¹ÑĞºĞ¸Ğ¹","ğŸ¥Š Ğ˜Ğ½ÑÑ‚Ñ€ÑƒĞºÑ‚Ğ¾Ñ€ Ğ²Ñ‹Ğ¶Ğ¸Ğ²Ğ°Ğ½Ğ¸Ñ","ğŸ•µï¸ Ğ Ğ°Ğ·Ğ²ĞµĞ´Ñ‡Ğ¸Ğº","ğŸ§— Ğ¡Ğ°Ğ¿Ñ‘Ñ€","ğŸ‘¨â€ğŸ³ Ğ¨ĞµÑ„-Ğ¿Ğ¾Ğ²Ğ°Ñ€","ğŸ“š Ğ£Ñ‡Ğ¸Ñ‚ĞµĞ»ÑŒ","ğŸ§‘â€âš–ï¸ ĞŸÑĞ¸Ñ…Ğ¾Ğ»Ğ¾Ğ³","ğŸ“– Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ğº","âœˆï¸ ĞŸĞ¸Ğ»Ğ¾Ñ‚","âš“ ĞœĞ¾Ñ€ÑĞº","ğŸš‘ ĞŸĞ°Ñ€Ğ°Ğ¼ĞµĞ´Ğ¸Ğº","ğŸ• Ğ’ĞµÑ‚ĞµÑ€Ğ¸Ğ½Ğ°Ñ€","ğŸ§‘â€ğŸš’ ĞŸĞ¾Ğ¶Ğ°Ñ€Ğ½Ñ‹Ğ¹","ğŸ‹ï¸ Ğ¢Ñ€ĞµĞ½ĞµÑ€","ğŸ’° Ğ­ĞºĞ¾Ğ½Ğ¾Ğ¼Ğ¸ÑÑ‚","ğŸ› ĞŸĞ¾Ğ»Ğ¸Ñ‚Ğ¸Ğº"];
const HEALTH=[["âœ…","ĞĞ±ÑĞ¾Ğ»ÑÑ‚Ğ½Ğ¾ Ğ·Ğ´Ğ¾Ñ€Ğ¾Ğ², Ğ¸Ğ´ĞµĞ°Ğ»ÑŒĞ½Ğ°Ñ Ñ„Ğ¸Ğ·Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ñ„Ğ¾Ñ€Ğ¼Ğ°"],["âœ…","ĞÑ‚Ğ»Ğ¸Ñ‡Ğ½Ğ¾Ğµ Ğ·Ğ´Ğ¾Ñ€Ğ¾Ğ²ÑŒĞµ, Ğ¿Ñ€Ğ¾Ñ„ĞµÑÑĞ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ ÑĞ¿Ğ¾Ñ€Ñ‚ÑĞ¼ĞµĞ½"],["âœ…","Ğ—Ğ´Ğ¾Ñ€Ğ¾Ğ², Ğ²Ñ‹Ğ½Ğ¾ÑĞ»Ğ¸Ğ²Ñ‹Ğ¹, Ğ±ĞµĞ· Ñ…Ñ€Ğ¾Ğ½Ğ¸Ñ‡ĞµÑĞºĞ¸Ñ… Ğ±Ğ¾Ğ»ĞµĞ·Ğ½ĞµĞ¹"],["âš ï¸","Ğ‘Ğ»Ğ¸Ğ·Ğ¾Ñ€ÑƒĞºĞ¾ÑÑ‚ÑŒ (âˆ’5), Ğ½Ğ¾ÑĞ¸Ñ‚ Ğ¾Ñ‡ĞºĞ¸"],["âš ï¸","Ğ›Ñ‘Ğ³ĞºĞ°Ñ Ğ°ÑÑ‚Ğ¼Ğ°, Ğ½Ğ¾ÑĞ¸Ñ‚ Ğ¸Ğ½Ğ³Ğ°Ğ»ÑÑ‚Ğ¾Ñ€"],["âš ï¸","ĞĞ»Ğ»ĞµÑ€Ğ³Ğ¸Ñ Ğ½Ğ° Ğ¿Ñ‹Ğ»ÑŒÑ†Ñƒ Ğ¸ Ğ¿Ñ‹Ğ»ÑŒ"],["âš ï¸","Ğ¥Ñ€Ğ¾Ğ½Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ³Ğ°ÑÑ‚Ñ€Ğ¸Ñ‚"],["âš ï¸","Ğ›Ñ‘Ğ³ĞºĞ°Ñ Ğ´ĞµĞ¿Ñ€ĞµÑÑĞ¸Ñ, Ğ¿Ñ€Ğ¸Ğ½Ğ¸Ğ¼Ğ°ĞµÑ‚ Ğ°Ğ½Ñ‚Ğ¸Ğ´ĞµĞ¿Ñ€ĞµÑÑĞ°Ğ½Ñ‚Ñ‹"],["âš ï¸","Ğ¥Ñ€Ğ¾Ğ½Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ğ¼Ğ¸Ğ³Ñ€ĞµĞ½ÑŒ"],["âš ï¸","ĞšĞ»Ğ°ÑƒÑÑ‚Ñ€Ğ¾Ñ„Ğ¾Ğ±Ğ¸Ñ"],["âš ï¸","Ğ‘ĞµÑĞ¿Ğ»Ğ¾Ğ´Ğ¸Ğµ"],["âŒ","Ğ”Ğ¸Ğ°Ğ±ĞµÑ‚ 1 Ñ‚Ğ¸Ğ¿Ğ° â€” Ğ¸Ğ½ÑÑƒĞ»Ğ¸Ğ½Ğ¾Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ñ‹Ğ¹"],["âŒ","Ğ¡ĞµÑ€Ğ´ĞµÑ‡Ğ½Ğ°Ñ Ğ½ĞµĞ´Ğ¾ÑÑ‚Ğ°Ñ‚Ğ¾Ñ‡Ğ½Ğ¾ÑÑ‚ÑŒ"],["âŒ","Ğ’Ğ˜Ğ§-Ğ¿Ğ¾Ğ»Ğ¾Ğ¶Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ (Ğ¿Ğ¾Ğ´ ĞºĞ¾Ğ½Ñ‚Ñ€Ğ¾Ğ»ĞµĞ¼)"],["âŒ","Ğ¨Ğ¸Ğ·Ğ¾Ñ„Ñ€ĞµĞ½Ğ¸Ñ Ğ² Ñ€ĞµĞ¼Ğ¸ÑÑĞ¸Ğ¸"],["âŒ","ĞĞ½ĞºĞ¾Ğ»Ğ¾Ğ³Ğ¸Ñ 2 ÑÑ‚Ğ°Ğ´Ğ¸Ğ¸"],["âŒ","Ğ¢ÑĞ¶Ñ‘Ğ»Ğ°Ñ Ğ½Ğ°Ñ€ĞºĞ¾Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚ÑŒ"],["âœ…","Ğ‘ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ğ° 4 Ğ¼ĞµÑÑÑ†Ğ°, Ğ¿Ğ¾Ğ»Ğ½Ğ¾ÑÑ‚ÑŒÑ Ğ·Ğ´Ğ¾Ñ€Ğ¾Ğ²Ğ°"]];
const HOBBY=["ğŸ¯ Ğ¡Ñ‚Ñ€ĞµĞ»ÑŒĞ±Ğ° Ğ¸Ğ· Ğ»ÑƒĞºĞ°","ğŸ• Ğ’Ñ‹Ğ¶Ğ¸Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ² Ğ´Ğ¸ĞºĞ¾Ğ¹ Ğ¿Ñ€Ğ¸Ñ€Ğ¾Ğ´Ğµ","ğŸŒ¿ ĞĞ³Ğ¾Ñ€Ğ¾Ğ´Ğ½Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾","ğŸ“» Ğ Ğ°Ğ´Ğ¸Ğ¾Ğ»ÑĞ±Ğ¸Ñ‚ĞµĞ»ÑŒ","ğŸ”¨ Ğ¡Ñ‚Ğ¾Ğ»ÑÑ€Ğ½Ğ¾Ğµ Ğ´ĞµĞ»Ğ¾","ğŸµ Ğ˜Ğ³Ñ€Ğ° Ğ½Ğ° Ğ³Ğ¸Ñ‚Ğ°Ñ€Ğµ","ğŸ“– Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ğ²Ğ¾Ğ¹Ğ½","ğŸ³ ĞšÑƒĞ»Ğ¸Ğ½Ğ°Ñ€Ğ¸Ñ Ğ¸ Ğ·Ğ°Ğ³Ğ¾Ñ‚Ğ¾Ğ²ĞºĞ¸","ğŸ¤¸ Ğ™Ğ¾Ğ³Ğ° Ğ¸ Ğ¼ĞµĞ´Ğ¸Ñ‚Ğ°Ñ†Ğ¸Ñ","ğŸ® ĞŸÑ€Ğ¾Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ","ğŸ• Ğ”Ñ€ĞµÑÑĞ¸Ñ€Ğ¾Ğ²ĞºĞ° ÑĞ¾Ğ±Ğ°Ğº","ğŸ§¶ Ğ¨Ğ¸Ñ‚ÑŒÑ‘","âš—ï¸ Ğ¡Ğ°Ğ¼Ğ¾Ğ³Ğ¾Ğ½Ğ¾Ğ²Ğ°Ñ€ĞµĞ½Ğ¸Ğµ","ğŸ² Ğ¡Ñ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ğ¸Ğ³Ñ€Ñ‹","ğŸŒŒ ĞÑÑ‚Ñ€Ğ¾Ğ½Ğ¾Ğ¼Ğ¸Ñ","ğŸ—º ĞšĞ°Ñ€Ñ‚Ğ¾Ğ³Ñ€Ğ°Ñ„Ğ¸Ñ","ğŸŠ Ğ”Ğ°Ğ¹Ğ²Ğ¸Ğ½Ğ³","ğŸ§— Ğ¡ĞºĞ°Ğ»Ğ¾Ğ»Ğ°Ğ·Ğ°Ğ½Ğ¸Ğµ","ğŸª ĞŸĞ°Ñ€ĞºÑƒÑ€","ğŸ›  Ğ¡Ğ»ĞµÑĞ°Ñ€Ğ½Ğ¾Ğµ Ğ´ĞµĞ»Ğ¾","ğŸš— Ğ ĞµĞ¼Ğ¾Ğ½Ñ‚ Ğ°Ğ²Ñ‚Ğ¾","ğŸŸ Ğ Ñ‹Ğ±Ğ¾Ğ»Ğ¾Ğ²ÑÑ‚Ğ²Ğ¾ Ğ¸ Ğ¾Ñ…Ğ¾Ñ‚Ğ°","âš”ï¸ Ğ¤ĞµÑ…Ñ‚Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ","ğŸ§  ĞŸÑĞ¸Ñ…Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ","ğŸŒ± Ğ¢Ñ€Ğ°Ğ²Ğ½Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾"];
const BAGG=["ğŸ’ Ğ¢Ğ°ĞºÑ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ñ€ÑĞºĞ·Ğ°Ğº","ğŸ“š Ğ­Ğ½Ñ†Ğ¸ĞºĞ»Ğ¾Ğ¿ĞµĞ´Ğ¸Ñ Ğ¼ĞµĞ´Ğ¸Ñ†Ğ¸Ğ½Ñ‹","ğŸ”« Ğ“Ğ»Ğ¾Ğº Ñ 200 Ğ¿Ğ°Ñ‚Ñ€Ğ¾Ğ½Ğ°Ğ¼Ğ¸","ğŸ’Š ĞœĞµĞ´Ğ¸ĞºĞ°Ğ¼ĞµĞ½Ñ‚Ñ‹ Ğ½Ğ° 2 Ğ³Ğ¾Ğ´Ğ°","ğŸŒ± Ğ¡ĞµĞ¼ĞµĞ½Ğ° 200 Ğ²Ğ¸Ğ´Ğ¾Ğ² Ñ€Ğ°ÑÑ‚ĞµĞ½Ğ¸Ğ¹","âš¡ Ğ¡Ğ¾Ğ»Ğ½ĞµÑ‡Ğ½Ñ‹Ğ¹ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ‚Ğ¾Ñ€","ğŸ“¡ Ğ¡Ğ¿ÑƒÑ‚Ğ½Ğ¸ĞºĞ¾Ğ²Ñ‹Ğ¹ Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½","ğŸ”¬ ĞœĞµĞ´Ğ¸Ñ†Ğ¸Ğ½ÑĞºĞ°Ñ Ğ»Ğ°Ğ±Ğ¾Ñ€Ğ°Ñ‚Ğ¾Ñ€Ğ¸Ñ","ğŸ—º ĞšĞ°Ñ€Ñ‚Ñ‹ Ñ€ĞµĞ³Ğ¸Ğ¾Ğ½Ğ° + GPS","ğŸ¸ ĞĞºÑƒÑÑ‚Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ğ³Ğ¸Ñ‚Ğ°Ñ€Ğ°","ğŸ“– Ğ‘Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºĞ° Ğ½Ğ° Ñ„Ğ»ĞµÑˆĞºĞµ (100Ğº ĞºĞ½Ğ¸Ğ³)","ğŸ« Ğ’Ğ¸Ñ‚Ğ°Ğ¼Ğ¸Ğ½Ñ‹ Ğ¸ ĞµĞ´Ğ° Ğ½Ğ° 3 Ğ³Ğ¾Ğ´Ğ°","ğŸ• Ğ¡Ğ¾Ğ±Ğ°ĞºĞ°-ÑĞ»ĞµĞ´Ğ¾Ğ¿Ñ‹Ñ‚","ğŸ¹ ĞÑ€Ğ±Ğ°Ğ»ĞµÑ‚ Ñ 500 Ğ±Ğ¾Ğ»Ñ‚Ğ°Ğ¼Ğ¸","ğŸ’» Ğ—Ğ°Ñ‰Ğ¸Ñ‰Ñ‘Ğ½Ğ½Ñ‹Ğ¹ Ğ½Ğ¾ÑƒÑ‚Ğ±ÑƒĞº","ğŸ§ª Ğ¥Ğ¸Ğ¼Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ğ»Ğ°Ğ±Ğ¾Ñ€Ğ°Ñ‚Ğ¾Ñ€Ğ¸Ñ","ğŸ©º Ğ¥Ğ¸Ñ€ÑƒÑ€Ğ³Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ½Ğ°Ğ±Ğ¾Ñ€","âš“ ĞĞ°Ğ´ÑƒĞ²Ğ½Ğ°Ñ Ğ»Ğ¾Ğ´ĞºĞ° Ñ Ğ¼Ğ¾Ñ‚Ğ¾Ñ€Ğ¾Ğ¼","ğŸ¯ Ğ¡Ğ½Ğ°Ğ¹Ğ¿ĞµÑ€ÑĞºĞ°Ñ Ğ²Ğ¸Ğ½Ñ‚Ğ¾Ğ²ĞºĞ°","ğŸ¦º ĞšĞ¾ÑÑ‚ÑĞ¼ Ñ…Ğ¸Ğ¼Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ñ‹ (2 ÑˆÑ‚.)"];
const FACTS=["ğŸ¤« Ğ—Ğ½Ğ°ĞµÑ‚ Ñ€Ğ°ÑĞ¿Ğ¾Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ ÑĞµĞºÑ€ĞµÑ‚Ğ½Ğ¾Ğ³Ğ¾ ÑĞºĞ»Ğ°Ğ´Ğ°","ğŸ† Ğ§ĞµĞ¼Ğ¿Ğ¸Ğ¾Ğ½ Ğ¼Ğ¸Ñ€Ğ° Ğ¿Ğ¾ Ğ±Ğ¾ĞµĞ²Ñ‹Ğ¼ Ğ¸ÑĞºÑƒÑÑÑ‚Ğ²Ğ°Ğ¼","ğŸ‘‘ Ğ”Ğ¸Ğ¿Ğ»Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ ÑĞ²ÑĞ·Ğ¸ Ñ 3 ÑÑ‚Ñ€Ğ°Ğ½Ğ°Ğ¼Ğ¸","ğŸ’” ĞŸĞ¾Ñ‚ĞµÑ€ÑĞ» Ğ²ÑÑ ÑĞµĞ¼ÑŒÑ â€” Ğ³Ğ¾Ñ‚Ğ¾Ğ² Ğ½Ğ° Ğ²ÑÑ‘","ğŸ§  IQ 170, Ñ„Ğ¾Ñ‚Ğ¾Ğ³Ñ€Ğ°Ñ„Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ğ¿Ğ°Ğ¼ÑÑ‚ÑŒ","ğŸŒ Ğ¡Ğ²Ğ¾Ğ±Ğ¾Ğ´Ğ½Ğ¾ Ğ³Ğ¾Ğ²Ğ¾Ñ€Ğ¸Ñ‚ Ğ½Ğ° 7 ÑĞ·Ñ‹ĞºĞ°Ñ…","â˜ ï¸ Ğ¢ÑĞ¶ĞµĞ»Ğ¾ Ğ±Ğ¾Ğ»ĞµĞ½ Ğ¸ ÑĞºÑ€Ñ‹Ğ²Ğ°ĞµÑ‚ Ğ´Ğ¸Ğ°Ğ³Ğ½Ğ¾Ğ·","ğŸ•µï¸ Ğ‘Ñ‹Ğ²ÑˆĞ¸Ğ¹ Ğ°Ğ³ĞµĞ½Ñ‚ Ğ¤Ğ¡Ğ‘ / Ğ¦Ğ Ğ£","â¤ï¸ Ğ’Ğ»ÑĞ±Ğ»Ñ‘Ğ½ Ğ² Ğ´Ñ€ÑƒĞ³Ğ¾Ğ³Ğ¾ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ°","ğŸ˜ˆ ĞšĞ»Ğ¸Ğ½Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ¿ÑĞ¸Ñ…Ğ¾Ğ¿Ğ°Ñ‚","ğŸ™ Ğ“Ğ»ÑƒĞ±Ğ¾ĞºĞ¾ Ğ²ĞµÑ€ÑƒÑÑ‰Ğ¸Ğ¹ â€” Ğ½Ğµ ÑƒĞ±Ğ¸Ğ²Ğ°ĞµÑ‚","ğŸ’ª Ğ“ĞµĞ½ĞµÑ‚Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ğ¼ÑƒÑ‚Ğ°Ñ†Ğ¸Ñ â€” Ğ½Ğµ Ñ‡ÑƒĞ²ÑÑ‚Ğ²ÑƒĞµÑ‚ Ğ±Ğ¾Ğ»Ğ¸","ğŸ“œ Ğ—Ğ½Ğ°ĞµÑ‚ Ñ€ĞµÑ†ĞµĞ¿Ñ‚ Ğ°Ğ½Ñ‚Ğ¸Ğ²Ğ¸Ñ€ÑƒÑĞ°, Ğ½Ğ¾ Ğ¼Ğ¾Ğ»Ñ‡Ğ¸Ñ‚","ğŸŒ Ğ—Ğ½Ğ°ĞµÑ‚ Ñ‚Ğ°Ğ¹Ğ½Ñ‹Ğ¹ Ğ¿ÑƒÑ‚ÑŒ Ğ²Ğ¾ Ğ²Ñ‚Ğ¾Ñ€Ğ¾Ğ¹ Ğ±ÑƒĞ½ĞºĞµÑ€","ğŸ˜´ Ğ›ÑƒĞ½Ğ°Ñ‚Ğ¸Ğº â€” Ğ¾Ğ¿Ğ°ÑĞµĞ½ Ğ¿Ğ¾ Ğ½Ğ¾Ñ‡Ğ°Ğ¼","ğŸ”‘ ĞĞ°ÑˆÑ‘Ğ» Ğ·Ğ°Ğ¿Ğ°ÑĞ½Ğ¾Ğ¹ ĞºĞ»ÑÑ‡ Ğ¾Ñ‚ Ğ±ÑƒĞ½ĞºĞµÑ€Ğ°","ğŸ§¬ ĞŸÑ€Ğ¸Ñ€Ğ¾Ğ´Ğ½Ñ‹Ğ¹ Ğ¸Ğ¼Ğ¼ÑƒĞ½Ğ¸Ñ‚ĞµÑ‚ Ğº Ğ²Ğ¸Ñ€ÑƒÑĞ°Ğ¼","ğŸ‘¶ Ğ•Ğ³Ğ¾ ĞºÑ€Ğ¾Ğ²ÑŒ ÑĞ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ñ‚ Ğ°Ğ½Ñ‚Ğ¸Ñ‚ĞµĞ»Ğ°"];
const GEND=["ğŸ‘¨ ĞœÑƒĞ¶Ñ‡Ğ¸Ğ½Ğ°, 25 Ğ»ĞµÑ‚","ğŸ‘© Ğ–ĞµĞ½Ñ‰Ğ¸Ğ½Ğ°, 23 Ğ³Ğ¾Ğ´Ğ°","ğŸ‘¨ ĞœÑƒĞ¶Ñ‡Ğ¸Ğ½Ğ°, 35 Ğ»ĞµÑ‚","ğŸ‘© Ğ–ĞµĞ½Ñ‰Ğ¸Ğ½Ğ°, 30 Ğ»ĞµÑ‚","ğŸ‘¨ ĞœÑƒĞ¶Ñ‡Ğ¸Ğ½Ğ°, 45 Ğ»ĞµÑ‚","ğŸ‘© Ğ–ĞµĞ½Ñ‰Ğ¸Ğ½Ğ°, 40 Ğ»ĞµÑ‚","ğŸ‘´ ĞœÑƒĞ¶Ñ‡Ğ¸Ğ½Ğ°, 62 Ğ³Ğ¾Ğ´Ğ°","ğŸ‘µ Ğ–ĞµĞ½Ñ‰Ğ¸Ğ½Ğ°, 58 Ğ»ĞµÑ‚","ğŸ§‘ ĞĞµĞ±Ğ¸Ğ½Ğ°Ñ€Ğ½Ñ‹Ğ¹, 28 Ğ»ĞµÑ‚","ğŸ‘© Ğ–ĞµĞ½Ñ‰Ğ¸Ğ½Ğ°, 18 Ğ»ĞµÑ‚","ğŸ‘¨ ĞœÑƒĞ¶Ñ‡Ğ¸Ğ½Ğ°, 19 Ğ»ĞµÑ‚","ğŸ¤° Ğ‘ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ğ°Ñ, 27 Ğ»ĞµÑ‚ (7 Ğ¼ĞµÑ)","ğŸ‘¨ ĞœÑƒĞ¶Ñ‡Ğ¸Ğ½Ğ°, 50 Ğ»ĞµÑ‚","ğŸ‘© Ğ–ĞµĞ½Ñ‰Ğ¸Ğ½Ğ°, 45 Ğ»ĞµÑ‚","ğŸ§’ ĞŸĞ¾Ğ´Ñ€Ğ¾ÑÑ‚Ğ¾Ğº, 15 Ğ»ĞµÑ‚","ğŸ‘¨ ĞœÑƒĞ¶Ñ‡Ğ¸Ğ½Ğ°, 70 Ğ»ĞµÑ‚","ğŸ‘© Ğ–ĞµĞ½Ñ‰Ğ¸Ğ½Ğ°, 32 Ğ³Ğ¾Ğ´Ğ°","ğŸ‘¨ ĞœÑƒĞ¶Ñ‡Ğ¸Ğ½Ğ°, 38 Ğ»ĞµÑ‚"];

const ADUL_P=["ğŸ’ƒ Ğ¡Ñ‚Ñ€Ğ¸Ğ¿Ñ‚Ğ¸Ğ·Ñ‘Ñ€ÑˆĞ°","ğŸ•º Ğ¡Ñ‚Ñ€Ğ¸Ğ¿Ñ‚Ğ¸Ğ·Ñ‘Ñ€","ğŸ¬ ĞŸĞ¾Ñ€Ğ½Ğ¾Ğ°ĞºÑ‚Ñ€Ğ¸ÑĞ°","ğŸ¬ ĞŸĞ¾Ñ€Ğ½Ğ¾Ğ°ĞºÑ‚Ñ‘Ñ€","ğŸ“¸ Ğ’ĞµĞ±ĞºĞ°Ğ¼-Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ","ğŸŒ¹ Ğ­ÑĞºĞ¾Ñ€Ñ‚","ğŸ’‹ Ğ¡ĞµĞºÑ-Ñ‚ĞµÑ€Ğ°Ğ¿ĞµĞ²Ñ‚","ğŸ˜ˆ Ğ”Ğ¾Ğ¼Ğ¸Ğ½Ğ°Ñ‚Ñ€Ğ¸ĞºÑ","ğŸ”’ ĞœĞ°ÑÑ‚ĞµÑ€ Ğ‘Ğ”Ğ¡Ğœ","ğŸ“± OnlyFans-ÑĞ¾Ğ·Ğ´Ğ°Ñ‚ĞµĞ»ÑŒ (Ñ‚Ğ¾Ğ¿-0.1%)","ğŸ² Ğ˜Ğ³Ğ¾Ñ€Ğ½Ñ‹Ğ¹ Ğ´ĞµĞ»ĞµÑ†","ğŸ’Œ Ğ¡ĞµĞºÑÑ‚Ğ¾Ğ»Ğ¾Ğ³","ğŸ‘  Ğ¤ĞµÑ‚Ğ¸Ñˆ-Ñ„Ğ¾Ñ‚Ğ¾Ğ³Ñ€Ğ°Ñ„"];
const ADUL_H=[["ğŸ”¥","ĞĞ¸Ğ¼Ñ„Ğ¾Ğ¼Ğ°Ğ½Ğ¸Ñ â€” ĞºĞ»Ğ¸Ğ½Ğ¸Ñ‡ĞµÑĞºĞ¸"],["ğŸº","Ğ¥Ñ€Ğ¾Ğ½Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ°Ğ»ĞºĞ¾Ğ³Ğ¾Ğ»Ğ¸Ğ·Ğ¼"],["ğŸ’Š","Ğ—Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚ÑŒ Ğ¾Ñ‚ Ğ°Ğ½Ñ‚Ğ¸Ğ´ĞµĞ¿Ñ€. Ğ¸ Ğ°Ğ»ĞºĞ¾Ğ³Ğ¾Ğ»Ñ"],["ğŸ°","Ğ›ÑƒĞ´Ğ¾Ğ¼Ğ°Ğ½Ğ¸Ñ â€” Ğ¿Ñ€Ğ¾Ğ¸Ğ³Ñ€Ğ°Ğ» ĞºĞ²Ğ°Ñ€Ñ‚Ğ¸Ñ€Ñƒ"],["ğŸ¦ ","Ğ—ĞŸĞŸĞŸ Ğ² Ñ€ĞµĞ¼Ğ¸ÑÑĞ¸Ğ¸"],["ğŸ˜¶","ĞÑ‚ÑÑƒÑ‚ÑÑ‚Ğ²Ğ¸Ğµ Ñ‡ÑƒĞ²ÑÑ‚Ğ²Ğ° ÑÑ‚Ñ‹Ğ´Ğ°"],["â¤ï¸â€ğŸ”¥","Ğ¡ĞµĞºÑÑƒĞ°Ğ»ÑŒĞ½Ğ°Ñ Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚ÑŒ"],["ğŸ","Ğ¥Ñ€Ğ¾Ğ½Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ ÑƒĞ¿Ğ¾Ñ‚Ñ€ĞµĞ±Ğ»ĞµĞ½Ğ¸Ğµ ĞºĞ°Ğ½Ğ½Ğ°Ğ±Ğ¸ÑĞ°"],["âœ…","ĞĞ±ÑĞ¾Ğ»ÑÑ‚Ğ½Ğ¾ Ğ·Ğ´Ğ¾Ñ€Ğ¾Ğ², Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾ Ñ€Ğ°ÑĞºĞ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹"]];
const ADUL_Ho=["ğŸ”„ Ğ¡Ğ²Ğ¸Ğ½Ğ³ĞµÑ€ÑÑ‚Ğ²Ğ¾","ğŸ“¹ Ğ¡ÑŠÑ‘Ğ¼ĞºĞ° ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚Ğ° 18+","ğŸª¢ Ğ‘Ğ”Ğ¡Ğœ","ğŸ’ ĞŸĞ¾Ğ»Ğ¸Ğ°Ğ¼Ğ¾Ñ€Ğ¸Ñ","ğŸ¸ ĞšĞ»ÑƒĞ±Ñ‹ Ğ´Ğ»Ñ Ğ²Ğ·Ñ€Ğ¾ÑĞ»Ñ‹Ñ…","ğŸ° ĞĞ·Ğ°Ñ€Ñ‚Ğ½Ñ‹Ğµ Ğ¸Ğ³Ñ€Ñ‹ (Ğ² Ğ´Ğ¾Ğ»Ğ³Ğ°Ñ…)","ğŸ’Œ Ğ¡ĞµĞºÑÑ‚Ğ¸Ğ½Ğ³ ĞºĞ°Ğº Ğ¸ÑĞºÑƒÑÑÑ‚Ğ²Ğ¾"];
const ADUL_B=["ğŸ† ĞšĞ¾Ğ»Ğ»ĞµĞºÑ†Ğ¸Ñ Ğ¸Ğ³Ñ€ÑƒÑˆĞµĞº (47 ÑˆÑ‚)","ğŸ’Š Ğ’Ğ¸Ğ°Ğ³Ñ€Ğ° Ğ½Ğ° 10 Ğ»ĞµÑ‚","ğŸ€ ĞĞ°Ğ±Ğ¾Ñ€ Ğ‘Ğ”Ğ¡Ğœ","ğŸ›¡ï¸ 10 000 Ğ¿Ñ€ĞµĞ·ĞµÑ€Ğ²Ğ°Ñ‚Ğ¸Ğ²Ğ¾Ğ²","ğŸ’¿ ĞšĞ¾Ğ»Ğ»ĞµĞºÑ†Ğ¸Ñ ÑÑ€Ğ¾Ñ‚Ğ¸ĞºĞ¸ (3 Ğ¢Ğ‘)","ğŸ¾ Ğ¨Ğ°Ğ¼Ğ¿Ğ°Ğ½ÑĞºĞ¾Ğµ Ğ¸ Ğ°Ñ„Ñ€Ğ¾Ğ´Ğ¸Ğ·Ğ¸Ğ°ĞºĞ¸","ğŸ’‹ Ğ¡ĞµĞºÑ-ĞºÑƒĞºĞ»Ğ° Ğ¿Ñ€ĞµĞ¼Ğ¸ÑƒĞ¼","ğŸŒ¿ Ğ—Ğ°Ğ¿Ñ€ĞµÑ‰Ñ‘Ğ½Ğ½Ñ‹Ğµ Ğ²ĞµÑ‰ĞµÑÑ‚Ğ²Ğ°","ğŸ  VIP-Ğ°Ğ¿Ğ°Ñ€Ñ‚Ğ°Ğ¼ĞµĞ½Ñ‚Ñ‹ Ñ Ğ´Ğ¶Ğ°ĞºÑƒĞ·Ğ¸"];
const ADUL_F=["ğŸ˜ ĞŸĞµÑ€ĞµÑĞ¿Ğ°Ğ»/Ğ° Ñ ĞºĞµĞ¼-Ñ‚Ğ¾ Ğ² ÑÑ‚Ğ¾Ğ¹ ĞºĞ¾Ğ¼Ğ½Ğ°Ñ‚Ğµ","ğŸ“± ĞĞ½Ğ¾Ğ½Ğ¸Ğ¼Ğ½Ñ‹Ğ¹ OnlyFans (80Ğº Ğ¿Ğ¾Ğ´Ğ¿)","ğŸ¤ Ğ—Ğ½Ğ°ĞµÑ‚ ĞºĞ¾Ğ¼Ğ¿Ñ€Ğ¾Ğ¼Ğ°Ñ‚ Ğ½Ğ° ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾","ğŸ’” Ğ Ğ°ÑÑÑ‚Ğ°Ğ»ÑÑ/Ğ°ÑÑŒ Ğ²Ñ‡ĞµÑ€Ğ° â€” Ğ½ĞµÑÑ‚Ğ°Ğ±Ğ¸Ğ»ĞµĞ½/Ğ°","ğŸ•µï¸ Ğ¡Ğ¾Ğ±Ğ»Ğ°Ğ·Ğ½Ğ¸Ğ»/Ğ° Ğ°Ğ³ĞµĞ½Ñ‚Ğ° Ğ¤Ğ¡Ğ‘","ğŸ° ĞŸÑ€Ğ¾Ğ¸Ğ³Ñ€Ğ°Ğ»/Ğ° Ğ²ÑÑ‘ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ","ğŸ’’ Ğ¡Ğ¾ÑÑ‚Ğ¾Ğ¸Ñ‚ Ğ² Ñ‚Ğ°Ğ¹Ğ½Ğ¾Ğ¼ Ğ±Ñ€Ğ°ĞºĞµ Ñ Ğ´Ğ²ÑƒĞ¼Ñ","ğŸ” Ğ‘Ñ‹Ğ²ÑˆĞ¸Ğ¹/Ğ°Ñ Ğ¿Ğ¾Ñ€Ğ½Ğ¾Ğ·Ğ²ĞµĞ·Ğ´Ğ°"];

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ SECRET CARDS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
const SECRET_CARDS=[
  // Ğ“Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ğ°Ğ½Ğ¸Ğµ
  {id:"double_vote",    icon:"âš¡",color:"#f0a500",title:"Ğ”Ğ²Ğ¾Ğ¹Ğ½Ğ¾Ğ¹ ÑƒĞ´Ğ°Ñ€",      desc:"Ğ’ ÑÑ‚Ğ¾Ğ¼ Ñ€Ğ°ÑƒĞ½Ğ´Ğµ Ñ‚Ğ²Ğ¾Ğ¹ Ğ³Ğ¾Ğ»Ğ¾Ñ ÑÑ‡Ğ¸Ñ‚Ğ°ĞµÑ‚ÑÑ Ğ´Ğ²Ğ°Ğ¶Ğ´Ñ‹. Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹ Ğ¼ÑƒĞ´Ñ€Ğ¾.",          type:"vote",    effect:"double_vote"},
  {id:"no_vote",        icon:"ğŸ”‡",color:"#ff453a",title:"ĞĞµĞ¼Ğ¾Ğ¹",             desc:"Ğ’ ÑÑ‚Ğ¾Ğ¼ Ñ€Ğ°ÑƒĞ½Ğ´Ğµ Ñ‚Ñ‹ Ğ½Ğµ Ğ¼Ğ¾Ğ¶ĞµÑˆÑŒ Ğ³Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ğ°Ñ‚ÑŒ. Ğ¢Ğ²Ğ¾Ğ¹ Ğ³Ğ¾Ğ»Ğ¾Ñ Ğ°Ğ½Ğ½ÑƒĞ»Ğ¸Ñ€ÑƒĞµÑ‚ÑÑ.",       type:"vote",    effect:"no_vote"},
  {id:"secret_vote",    icon:"ğŸ•µï¸",color:"#bf5af2",title:"Ğ¢Ğ°Ğ¹Ğ½Ğ¾Ğµ Ğ³Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ğ°Ğ½Ğ¸Ğµ",desc:"ĞĞ¸ĞºÑ‚Ğ¾ Ğ½Ğµ Ğ²Ğ¸Ğ´Ğ¸Ñ‚, Ğ·Ğ° ĞºĞ¾Ğ³Ğ¾ Ñ‚Ñ‹ Ğ¿Ñ€Ğ¾Ğ³Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ğ°Ğ» â€” Ğ´Ğ°Ğ¶Ğµ Ğ¿Ğ¾ÑĞ»Ğµ Ğ¸Ñ‚Ğ¾Ğ³Ğ¾Ğ².",          type:"vote",    effect:"secret_vote"},
  {id:"redirect_vote",  icon:"ğŸ”€",color:"#0a84ff",title:"Ğ Ğ¸ĞºĞ¾ÑˆĞµÑ‚",           desc:"Ğ¡Ğ»ÑƒÑ‡Ğ°Ğ¹Ğ½Ñ‹Ğ¹ Ğ¸Ğ³Ñ€Ğ¾Ğº Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚ Ñ‚Ğ²Ğ¾Ğ¹ Ğ³Ğ¾Ğ»Ğ¾Ñ Ğ²Ğ¼ĞµÑÑ‚Ğ¾ Ğ²Ñ‹Ğ±Ñ€Ğ°Ğ½Ğ½Ğ¾Ğ³Ğ¾ Ñ‚Ğ¾Ğ±Ğ¾Ğ¹.",          type:"vote",    effect:"redirect_vote"},
  // ĞšĞ°Ñ€Ñ‚Ñ‹
  {id:"swap_card",      icon:"ğŸ”„",color:"#30d158",title:"ĞĞ±Ğ¼ĞµĞ½ ĞºĞ°Ñ€Ñ‚Ğ¾Ğ¹",      desc:"Ğ¢Ñ‹ Ğ¼Ğ¾Ğ¶ĞµÑˆÑŒ Ğ¾Ğ±Ğ¼ĞµĞ½ÑÑ‚ÑŒ Ğ¾Ğ´Ğ½Ñƒ ÑĞ²Ğ¾Ñ ĞºĞ°Ñ€Ñ‚Ñƒ Ñ ĞºĞ°Ñ€Ñ‚Ğ¾Ğ¹ Ğ»ÑĞ±Ğ¾Ğ³Ğ¾ Ğ´Ñ€ÑƒĞ³Ğ¾Ğ³Ğ¾ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ°.",     type:"card",    effect:"swap_card"},
  {id:"steal_reveal",   icon:"ğŸ‘ï¸",color:"#0a84ff",title:"Ğ¨Ğ¿Ğ¸Ğ¾Ğ½",             desc:"Ğ¢Ñ‹ Ğ²Ğ¸Ğ´Ğ¸ÑˆÑŒ Ğ¾Ğ´Ğ½Ñƒ ÑĞ»ÑƒÑ‡Ğ°Ğ¹Ğ½ÑƒÑ Ğ½ĞµÑ€Ğ°ÑĞºÑ€Ñ‹Ñ‚ÑƒÑ ĞºĞ°Ñ€Ñ‚Ñƒ Ğ´Ñ€ÑƒĞ³Ğ¾Ğ³Ğ¾ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ° Ñ‚Ğ°Ğ¹Ğ½Ğ¾.",       type:"card",    effect:"steal_reveal"},
  {id:"extra_reveal",   icon:"âœ¨",color:"#30d158",title:"ĞÑ‚ĞºÑ€Ğ¾Ğ²ĞµĞ½Ğ¸Ğµ",        desc:"Ğ’ ÑÑ‚Ğ¾Ğ¼ Ñ€Ğ°ÑƒĞ½Ğ´Ğµ Ñ‚Ñ‹ Ğ¼Ğ¾Ğ¶ĞµÑˆÑŒ Ñ€Ğ°ÑĞºÑ€Ñ‹Ñ‚ÑŒ Ğ½Ğ° Ğ¾Ğ´Ğ½Ñƒ ĞºĞ°Ñ€Ñ‚Ñƒ Ğ±Ğ¾Ğ»ÑŒÑˆĞµ Ğ¾Ğ±Ñ‹Ñ‡Ğ½Ğ¾Ğ³Ğ¾.",        type:"card",    effect:"extra_reveal"},
  {id:"hide_card",      icon:"ğŸŒ«ï¸",color:"#8e8e93",title:"Ğ¢ÑƒĞ¼Ğ°Ğ½",             desc:"ĞĞ´Ğ½Ğ° Ğ¸Ğ· Ñ‚Ğ²Ğ¾Ğ¸Ñ… ÑƒĞ¶Ğµ Ñ€Ğ°ÑĞºÑ€Ñ‹Ñ‚Ñ‹Ñ… ĞºĞ°Ñ€Ñ‚ ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑÑ ÑĞ½Ğ¾Ğ²Ğ° ÑĞºÑ€Ñ‹Ñ‚Ğ¾Ğ¹ Ğ´Ğ»Ñ Ğ²ÑĞµÑ….",   type:"card",    effect:"hide_card"},
  // Ğ˜Ğ¼Ğ¼ÑƒĞ½Ğ¸Ñ‚ĞµÑ‚ / Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ğ°
  {id:"immunity",       icon:"ğŸ›¡ï¸",color:"#30d158",title:"Ğ˜Ğ¼Ğ¼ÑƒĞ½Ğ¸Ñ‚ĞµÑ‚",         desc:"Ğ­Ñ‚Ğ¾Ñ‚ Ñ€Ğ°ÑƒĞ½Ğ´ Ñ‚Ñ‹ Ğ½Ğµ Ğ¼Ğ¾Ğ¶ĞµÑˆÑŒ Ğ±Ñ‹Ñ‚ÑŒ Ğ²Ñ‹Ğ³Ğ½Ğ°Ğ½ Ğ¸Ğ· Ğ±ÑƒĞ½ĞºĞµÑ€Ğ°, Ğ´Ğ°Ğ¶Ğµ ĞµÑĞ»Ğ¸ Ğ½Ğ°Ğ±ĞµÑ€Ñ‘ÑˆÑŒ Ğ±Ğ¾Ğ»ÑŒÑˆĞµ Ğ²ÑĞµÑ… Ğ³Ğ¾Ğ»Ğ¾ÑĞ¾Ğ².", type:"protect", effect:"immunity"},
  {id:"shield",         icon:"ğŸª–",color:"#0a84ff",title:"Ğ©Ğ¸Ñ‚",               desc:"Ğ•ÑĞ»Ğ¸ Ğ½Ğ° Ñ‚ĞµĞ±Ñ Ğ½Ğ°Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¾ 3+ Ğ³Ğ¾Ğ»Ğ¾ÑĞ°, Ğ¾Ğ´Ğ¸Ğ½ Ğ³Ğ¾Ğ»Ğ¾Ñ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ğ°Ğ½Ğ½ÑƒĞ»Ğ¸Ñ€ÑƒĞµÑ‚ÑÑ.", type:"protect", effect:"shield"},
  // Ğ¥Ğ°Ğ¾Ñ
  {id:"random_elim",    icon:"ğŸ²",color:"#ff453a",title:"Ğ ÑƒĞ»ĞµÑ‚ĞºĞ°",           desc:"Ğ•ÑĞ»Ğ¸ Ğ³Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ·Ğ°Ñ…Ğ¾Ğ´Ğ¸Ñ‚ Ğ² Ğ½Ğ¸Ñ‡ÑŒÑ â€” Ñ‚Ñ‹ Ğ²Ñ‹Ğ±Ğ¸Ñ€Ğ°ĞµÑˆÑŒ, ĞºĞ¾Ğ³Ğ¾ Ğ²Ñ‹Ğ³Ğ¾Ğ½ÑÑÑ‚.",        type:"chaos",   effect:"random_elim"},
  {id:"sabotage",       icon:"ğŸ’£",color:"#ff453a",title:"Ğ¡Ğ°Ğ±Ğ¾Ñ‚Ğ°Ğ¶",           desc:"ĞĞ°Ğ·Ğ½Ğ°Ñ‡ÑŒ Ğ¾Ğ´Ğ½Ğ¾Ğ³Ğ¾ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ°. Ğ•Ğ³Ğ¾ Ñ€Ğ°ÑĞºÑ€Ñ‹Ñ‚Ğ¸Ñ Ğ² ÑÑ‚Ğ¾Ğ¼ Ñ€Ğ°ÑƒĞ½Ğ´Ğµ Ğ½Ğµ ÑƒÑ‡Ğ¸Ñ‚Ñ‹Ğ²Ğ°ÑÑ‚ÑÑ.",     type:"chaos",   effect:"sabotage"},
  {id:"mirror",         icon:"ğŸª",color:"#bf5af2",title:"Ğ—ĞµÑ€ĞºĞ°Ğ»Ğ¾",           desc:"Ğ˜Ğ³Ñ€Ğ¾Ğº Ñ Ğ½Ğ°Ğ¸Ğ±Ğ¾Ğ»ÑŒÑˆĞ¸Ğ¼ Ñ‡Ğ¸ÑĞ»Ğ¾Ğ¼ Ğ³Ğ¾Ğ»Ğ¾ÑĞ¾Ğ² Ğ·Ğ° Ñ‚ĞµĞ±Ñ ÑĞ°Ğ¼ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚ Ğ¾Ğ´Ğ¸Ğ½ ÑˆÑ‚Ñ€Ğ°Ñ„Ğ½Ğ¾Ğ¹ Ğ³Ğ¾Ğ»Ğ¾Ñ.", type:"chaos", effect:"mirror"},
  // Ğ˜Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ
  {id:"truth_serum",    icon:"ğŸ’‰",color:"#0a84ff",title:"Ğ¡Ñ‹Ğ²Ğ¾Ñ€Ğ¾Ñ‚ĞºĞ° Ğ¿Ñ€Ğ°Ğ²Ğ´Ñ‹",  desc:"Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ° â€” Ğ¾Ğ½ Ğ¾Ğ±ÑĞ·Ğ°Ğ½ Ğ¿ÑƒĞ±Ğ»Ğ¸Ñ‡Ğ½Ğ¾ Ñ€Ğ°ÑĞºÑ€Ñ‹Ñ‚ÑŒ ÑĞ²Ğ¾Ñ Ğ¿Ñ€Ğ¾Ñ„ĞµÑÑĞ¸Ñ Ğ¿Ñ€ÑĞ¼Ğ¾ ÑĞµĞ¹Ñ‡Ğ°Ñ.", type:"info",  effect:"truth_serum"},
  {id:"lie_detector",   icon:"ğŸ“¡",color:"#bf5af2",title:"Ğ”ĞµÑ‚ĞµĞºÑ‚Ğ¾Ñ€ Ğ»Ğ¶Ğ¸",      desc:"Ğ’ĞµĞ´ÑƒÑ‰Ğ¸Ğ¹ Ñ‚Ğ°Ğ¹Ğ½Ğ¾ ÑĞ¾Ğ¾Ğ±Ñ‰Ğ°ĞµÑ‚ Ñ‚ĞµĞ±Ğµ Ğ¾Ğ´Ğ½Ñƒ Ğ¿Ñ€Ğ°Ğ²Ğ´Ğ¸Ğ²ÑƒÑ Ğ½ĞµÑ€Ğ°ÑĞºÑ€Ñ‹Ñ‚ÑƒÑ ĞºĞ°Ñ€Ñ‚Ñƒ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ° Ğ½Ğ° Ñ‚Ğ²Ğ¾Ğ¹ Ğ²Ñ‹Ğ±Ğ¾Ñ€.", type:"info", effect:"lie_detector"},
  {id:"amnesia",        icon:"ğŸ§ ",color:"#8e8e93",title:"ĞĞ¼Ğ½ĞµĞ·Ğ¸Ñ",           desc:"ĞĞ´Ğ¸Ğ½ Ğ¸Ğ³Ñ€Ğ¾Ğº Ğ½Ğ° Ğ²Ñ‹Ğ±Ğ¾Ñ€ Ğ·Ğ°Ğ±Ñ‹Ğ²Ğ°ĞµÑ‚ Ğ¾Ğ´Ğ½Ñƒ ÑĞ²Ğ¾Ñ Ñ€Ğ°ÑĞºÑ€Ñ‹Ñ‚ÑƒÑ ĞºĞ°Ñ€Ñ‚Ñƒ â€” Ğ¾Ğ½Ğ° ÑĞ½Ğ¾Ğ²Ğ° ÑĞºÑ€Ñ‹Ğ²Ğ°ĞµÑ‚ÑÑ.", type:"info", effect:"amnesia"},
];
const SECRET_TYPE_COLORS={vote:"#f0a500",card:"#30d158",protect:"#0a84ff",chaos:"#ff453a",info:"#bf5af2"};
const SECRET_TYPE_LABELS={vote:"Ğ“Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ğ°Ğ½Ğ¸Ğµ",card:"ĞšĞ°Ñ€Ñ‚Ñ‹",protect:"Ğ—Ğ°Ñ‰Ğ¸Ñ‚Ğ°",chaos:"Ğ¥Ğ°Ğ¾Ñ",info:"Ğ˜Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ"};

/* â•â•â•â•â•â•â•â•â•â• Ğ ĞĞ›Ğ˜ â•â•â•â•â•â•â•â•â•â• */
const ROLES=[
  {id:'leader',icon:'ğŸ‘‘',name:'Ğ›Ğ¸Ğ´ĞµÑ€',color:'#ffd60a',desc:'Ğ¢Ğ²Ğ¾Ğ¹ Ğ³Ğ¾Ğ»Ğ¾Ñ ÑÑ‡Ğ¸Ñ‚Ğ°ĞµÑ‚ÑÑ Ğ´Ğ²Ğ°Ğ¶Ğ´Ñ‹. Ğ’ÑĞµ Ğ·Ğ½Ğ°ÑÑ‚ Ñ‡Ñ‚Ğ¾ Ñ‚Ñ‹ Ğ›Ğ¸Ğ´ĞµÑ€ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ ĞµÑĞ»Ğ¸ Ñ‚Ñ‹ ÑĞ°Ğ¼ Ñ€Ğ°ÑĞºÑ€Ğ¾ĞµÑˆÑŒ ÑÑ‚Ğ¾.'},
  {id:'saboteur',icon:'ğŸ•·',name:'Ğ¡Ğ°Ğ±Ğ¾Ñ‚Ğ°Ğ¶Ğ½Ğ¸Ğº',color:'#ff453a',desc:'Ğ¢Ñ‹ Ñ…Ğ¾Ñ‡ĞµÑˆÑŒ Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ²Ñ‹Ğ¶Ğ¸Ğ²ÑˆĞ¸Ğµ Ğ½Ğµ ÑĞ¿Ñ€Ğ°Ğ²Ğ¸Ğ»Ğ¸ÑÑŒ. ĞŸĞ¾Ğ±ĞµĞ´Ğ¸ÑˆÑŒ ĞµÑĞ»Ğ¸ Ğ² Ğ±ÑƒĞ½ĞºĞµÑ€ Ğ¿Ğ¾Ğ¿Ğ°Ğ´ÑƒÑ‚ Ğ½Ğµ Ñ‚Ğµ Ğ»ÑĞ´Ğ¸.'},
  {id:'medic',icon:'ğŸ’‰',name:'ĞœĞµĞ´Ğ¸Ğº',color:'#30d158',desc:'ĞĞ´Ğ¸Ğ½ Ñ€Ğ°Ğ· Ğ·Ğ° Ğ¸Ğ³Ñ€Ñƒ Ğ¼Ğ¾Ğ¶ĞµÑˆÑŒ ÑĞ¿Ğ°ÑÑ‚Ğ¸ Ğ»ÑĞ±Ğ¾Ğ³Ğ¾ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ° Ğ¾Ñ‚ Ğ¸ÑĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ â€” Ñ‚Ğ°Ğ¹Ğ½Ğ¾ Ğ½Ğ°Ğ¶Ğ°Ğ² ĞºĞ½Ğ¾Ğ¿ĞºÑƒ Ğ¿Ñ€Ğ¸ Ğ³Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ğ°Ğ½Ğ¸Ğ¸.'},
  {id:'spy',icon:'ğŸ•µï¸',name:'Ğ¨Ğ¿Ğ¸Ğ¾Ğ½',color:'#0a84ff',desc:'Ğ’Ğ¸Ğ´Ğ¸ÑˆÑŒ Ğ¾Ğ´Ğ½Ñƒ ÑĞºÑ€Ñ‹Ñ‚ÑƒÑ ĞºĞ°Ñ€Ñ‚Ñƒ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ°. Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ Ğ¼ÑƒĞ´Ñ€Ğ¾.'},
  {id:'civilian',icon:'ğŸ‘¤',name:'ĞĞ±Ñ‹Ñ‡Ğ½Ñ‹Ğ¹',color:'var(--tx3)',desc:'ĞĞ¸ĞºĞ°ĞºĞ¾Ğ¹ Ğ¾ÑĞ¾Ğ±Ğ¾Ğ¹ Ñ€Ğ¾Ğ»Ğ¸. Ğ’Ñ‹Ğ¶Ğ¸Ğ²Ğ¸ Ğ»ÑĞ±Ğ¾Ğ¹ Ñ†ĞµĞ½Ğ¾Ğ¹.'},
];

/* â•â•â•â•â•â•â•â•â•â• ĞšĞĞœĞĞĞ¢Ğ« Ğ‘Ğ£ĞĞšĞ•Ğ Ğ â•â•â•â•â•â•â•â•â•â• */
const BUNKER_ROOMS=[
  {id:'med',icon:'ğŸ¥',name:'ĞœĞµĞ´Ğ¿ÑƒĞ½ĞºÑ‚',color:'#30d158',bg:'rgba(48,209,88,0.08)',bonus:'Ğ‘Ğ¾Ğ½ÑƒÑ Ğ²Ñ€Ğ°Ñ‡Ğ°Ğ¼, Ğ±Ğ¸Ğ¾Ğ»Ğ¾Ğ³Ğ°Ğ¼, Ñ…Ğ¸Ğ¼Ğ¸ĞºĞ°Ğ¼: +1 Ğ¾Ñ‡ĞºĞ¾ Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ñ‹',profKeys:['Ğ²Ñ€Ğ°Ñ‡','Ğ±Ğ¸Ğ¾Ğ»Ğ¾Ğ³','Ñ…Ğ¸Ñ€ÑƒÑ€Ğ³','Ğ¼ĞµĞ´Ğ¸Ğº','Ñ…Ğ¸Ğ¼Ğ¸Ğº','Ñ„Ğ°Ñ€Ğ¼Ğ°Ñ†ĞµĞ²Ñ‚']},
  {id:'lab',icon:'ğŸ”¬',name:'Ğ›Ğ°Ğ±Ğ¾Ñ€Ğ°Ñ‚Ğ¾Ñ€Ğ¸Ñ',color:'#0a84ff',bg:'rgba(10,132,255,0.08)',bonus:'Ğ‘Ğ¾Ğ½ÑƒÑ ÑƒÑ‡Ñ‘Ğ½Ñ‹Ğ¼, Ğ¸Ğ½Ğ¶ĞµĞ½ĞµÑ€Ğ°Ğ¼, Ğ¿Ñ€Ğ¾Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğ¸ÑÑ‚Ğ°Ğ¼: Ğ¼Ğ¾Ğ³ÑƒÑ‚ Ñ€Ğ°ÑĞºÑ€Ñ‹Ñ‚ÑŒ +1 ĞºĞ°Ñ€Ñ‚Ñƒ',profKeys:['ÑƒÑ‡Ñ‘Ğ½Ñ‹Ğ¹','Ğ¸Ğ½Ğ¶ĞµĞ½ĞµÑ€','Ğ¿Ñ€Ğ¾Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğ¸ÑÑ‚','Ñ„Ğ¸Ğ·Ğ¸Ğº','Ğ¼Ğ°Ñ‚ĞµĞ¼Ğ°Ñ‚Ğ¸Ğº','Ğ¸ÑÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ']},
  {id:'farm',icon:'ğŸŒ±',name:'Ğ¤ĞµÑ€Ğ¼Ğ°',color:'#ffd60a',bg:'rgba(255,214,10,0.08)',bonus:'Ğ‘Ğ¾Ğ½ÑƒÑ Ğ°Ğ³Ñ€Ğ¾Ğ½Ğ¾Ğ¼Ğ°Ğ¼, Ğ¿Ğ¾Ğ²Ğ°Ñ€Ğ°Ğ¼, Ğ±Ğ¸Ğ¾Ğ»Ğ¾Ğ³Ğ°Ğ¼: +2 Ğ±Ğ°Ğ»Ğ»Ğ° Ğº Ğ²Ñ‹Ğ¶Ğ¸Ğ²Ğ°Ğ½Ğ¸Ñ',profKeys:['Ğ°Ğ³Ñ€Ğ¾Ğ½Ğ¾Ğ¼','Ğ¿Ğ¾Ğ²Ğ°Ñ€','Ğ±Ğ¸Ğ¾Ğ»Ğ¾Ğ³','ÑĞ°Ğ´Ğ¾Ğ²Ğ½Ğ¸Ğº','Ğ±Ğ¾Ñ‚Ğ°Ğ½Ğ¸Ğº','Ñ„ĞµÑ€Ğ¼ĞµÑ€']},
  {id:'armory',icon:'âš”ï¸',name:'ĞÑ€ÑƒĞ¶ĞµĞ¹Ğ½Ğ°Ñ',color:'#ff9f0a',bg:'rgba(255,159,10,0.08)',bonus:'Ğ‘Ğ¾Ğ½ÑƒÑ Ğ²Ğ¾ĞµĞ½Ğ½Ñ‹Ğ¼, Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ½Ğ¸ĞºĞ°Ğ¼, Ğ¿Ğ¾Ğ»Ğ¸Ñ†ĞµĞ¹ÑĞºĞ¸Ğ¼: Ğ³Ğ¾Ğ»Ğ¾Ñ Ã—1.5',profKeys:['Ğ²Ğ¾ĞµĞ½Ğ½Ñ‹Ğ¹','Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ½Ğ¸Ğº','Ğ¿Ğ¾Ğ»Ğ¸Ñ†ĞµĞ¹ÑĞºĞ¸Ğ¹','ÑĞ¾Ğ»Ğ´Ğ°Ñ‚','Ğ¾Ñ„Ğ¸Ñ†ĞµÑ€','Ğ¿Ğ¸Ğ»Ğ¾Ñ‚']},
  {id:'control',icon:'ğŸ“¡',name:'Ğ¦ĞµĞ½Ñ‚Ñ€ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ',color:'#bf5af2',bg:'rgba(191,90,242,0.08)',bonus:'Ğ‘Ğ¾Ğ½ÑƒÑ Ğ¿Ñ€Ğ¾Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğ¸ÑÑ‚Ğ°Ğ¼, Ğ¸Ğ½Ğ¶ĞµĞ½ĞµÑ€Ğ°Ğ¼, Ñ…Ğ°ĞºĞµÑ€Ğ°Ğ¼: Ğ²Ğ¸Ğ´ÑÑ‚ Ğ²ÑĞµ Ğ³Ğ¾Ğ»Ğ¾ÑĞ°',profKeys:['Ğ¿Ñ€Ğ¾Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğ¸ÑÑ‚','Ñ…Ğ°ĞºĞµÑ€','ÑĞ¸ÑÑ‚ĞµĞ¼Ğ½Ñ‹Ğ¹','Ğ°Ğ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸Ğº','Ğ¾Ğ¿ĞµÑ€Ğ°Ñ‚Ğ¾Ñ€']},
  {id:'storage',icon:'ğŸ“¦',name:'Ğ¡ĞºĞ»Ğ°Ğ´',color:'#ff6b35',bg:'rgba(255,107,53,0.08)',bonus:'Ğ‘Ğ¾Ğ½ÑƒÑ ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ĞµĞ»ÑĞ¼, Ğ¼ĞµÑ…Ğ°Ğ½Ğ¸ĞºĞ°Ğ¼, Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑĞ¼: +1 Ğ¼ĞµÑÑ‚Ğ¾ Ğ² Ğ±ÑƒĞ½ĞºĞµÑ€Ğµ',profKeys:['ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ĞµĞ»ÑŒ','Ğ¼ĞµÑ…Ğ°Ğ½Ğ¸Ğº','Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒ','ÑĞ»ĞµÑĞ°Ñ€ÑŒ','ÑĞ»ĞµĞºÑ‚Ñ€Ğ¸Ğº','ÑĞ°Ğ½Ñ‚ĞµÑ…Ğ½Ğ¸Ğº']},
];

const CARDS=[
  {key:"gender_age",icon:"ğŸ‘¤",label:"ĞŸĞ¾Ğ» Ğ¸ Ğ²Ğ¾Ğ·Ñ€Ğ°ÑÑ‚"},
  {key:"profession",icon:"ğŸ’¼",label:"ĞŸÑ€Ğ¾Ñ„ĞµÑÑĞ¸Ñ"},
  {key:"health",    icon:"ğŸ¥",label:"Ğ—Ğ´Ğ¾Ñ€Ğ¾Ğ²ÑŒĞµ"},
  {key:"hobby",     icon:"ğŸ¯",label:"Ğ¥Ğ¾Ğ±Ğ±Ğ¸"},
  {key:"baggage",   icon:"ğŸ’",label:"Ğ‘Ğ°Ğ³Ğ°Ğ¶"},
  {key:"fact",      icon:"ğŸ¤«",label:"Ğ¡ĞµĞºÑ€ĞµÑ‚Ğ½Ñ‹Ğ¹ Ñ„Ğ°ĞºÑ‚"},
  {key:"secret",    icon:"ğŸƒ",label:"Ğ¡ĞµĞºÑ€ĞµÑ‚Ğ½Ğ°Ñ ĞºĞ°Ñ€Ñ‚Ğ°"},
];

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RANKS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const RANKS=[
  {id:"supreme",  name:"Ğ’ĞµÑ€Ñ…Ğ¾Ğ²Ğ½Ñ‹Ğ¹ ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ¸Ñ€",      icon:"ğŸ‘‘",color:"#f0a500",bdr:"rgba(240,165,0,.55)", adminOnly:true, min:0},
  {id:"architect",name:"ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚Ğ¾Ñ€ ĞĞ¿Ğ¾ĞºĞ°Ğ»Ğ¸Ğ¿ÑĞ¸ÑĞ°", icon:"â˜¢ï¸",color:"#e8354a",bdr:"rgba(232,53,74,.5)", adminOnly:false,min:100},
  {id:"ghost",    name:"ĞŸÑ€Ğ¸Ğ·Ñ€Ğ°Ğº Ğ‘ÑƒĞ½ĞºĞµÑ€Ğ°",          icon:"ğŸ’€",color:"#9b59ef",bdr:"rgba(155,89,239,.5)",adminOnly:false,min:50},
  {id:"veteran",  name:"Ğ’ĞµÑ‚ĞµÑ€Ğ°Ğ½",                  icon:"ğŸ›¡ï¸",color:"#00b8d9",bdr:"rgba(0,184,217,.5)", adminOnly:false,min:25},
  {id:"fighter",  name:"Ğ‘Ğ¾ĞµÑ†",                     icon:"âš”ï¸",color:"#f0a500",bdr:"rgba(240,165,0,.5)", adminOnly:false,min:10},
  {id:"survivor", name:"Ğ’Ñ‹Ğ¶Ğ¸Ğ²ÑˆĞ¸Ğ¹",                 icon:"ğŸª–",color:"#00d48a",bdr:"rgba(0,212,138,.5)", adminOnly:false,min:3},
  {id:"recruit",  name:"ĞĞ¾Ğ²Ğ¾Ğ±Ñ€Ğ°Ğ½ĞµÑ†",               icon:"ğŸŒ±",color:"#4a5568",bdr:"rgba(74,85,104,.5)", adminOnly:false,min:0},
];
function getRank(u){
  if(u.customRank){const r=RANKS.find(r=>r.id===u.customRank);if(r)return r;}
  if(u.isAdmin)return RANKS[0];
  const gp=u.gamesPlayed||0;
  for(const r of RANKS.filter(r=>!r.adminOnly)){if(gp>=r.min)return r;}
  return RANKS[RANKS.length-1];
}
function RChip({user,size=9}){
  const r=getRank(user);
  return <span className="rchip" style={{fontSize:size,color:r.color,borderColor:r.bdr,background:r.bdr.replace(/[\d.]+\)$/,'0.08)')}}>{r.icon} {r.name}</span>;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   UTILITIES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const rnd=a=>a[Math.floor(Math.random()*a.length)];
function genCode(){return Array.from({length:6},()=>"ABCDEFGHJKLMNPQRSTUVWXYZ23456789"[Math.floor(Math.random()*32)]).join('')}
function mkCards(adult=false){
  const h=adult?rnd(ADUL_H):rnd(HEALTH);
  const sc=rnd(SECRET_CARDS);
  return{
    gender_age:rnd(GEND),
    profession:adult?rnd(ADUL_P):rnd(PROF),
    health:`${h[0]} ${h[1]}`,
    hobby:adult?rnd(ADUL_Ho):rnd(HOBBY),
    baggage:adult?rnd(ADUL_B):rnd(BAGG),
    fact:adult?rnd(ADUL_F):rnd(FACTS),
    secret:sc.id,
  };
}
function fmt(ts){const d=new Date(ts);return`${String(d.getHours()).padStart(2,'0')}:${String(d.getMinutes()).padStart(2,'0')}`}

function processVotes(game){
  const alive=Object.values(game.players).filter(p=>!p.isEliminated);
  const tally={};alive.forEach(p=>{tally[p.username]=0;});
  const doubleVote=game.doubleVote||{};
  const noVote=game.usedSecrets&&Object.keys(game.usedSecrets).filter(u=>{
    const sc=SECRET_CARDS.find(s=>s.id===(game.players[u]?.cards?.secret));
    return sc?.effect==='no_vote'&&game.usedSecrets[u];
  });
  const immunity=game.immunity||{};
  const shield=game.shield||{};
  const redirectVote=game.usedSecrets&&Object.keys(game.usedSecrets).filter(u=>{
    const sc=SECRET_CARDS.find(s=>s.id===(game.players[u]?.cards?.secret));
    return sc?.effect==='redirect_vote'&&game.usedSecrets[u];
  });

  Object.entries(game.votes||{}).forEach(([voter,tid])=>{
    if(tid===null||tid===undefined)return;
    // no_vote â€” skip
    if(noVote&&noVote.includes(voter))return;
    // redirect_vote â€” vote goes to random alive player
    let target=tid;
    if(redirectVote&&redirectVote.includes(voter)){
      const others=alive.filter(p=>p.username!==voter&&p.username!==tid);
      if(others.length>0)target=rnd(others).username;
    }
    if(tally[target]===undefined)return;
    const weight=(doubleVote[voter])?2:1;
    tally[target]+=weight;
  });

  // immunity â€” remove from tally
  Object.keys(immunity).forEach(u=>{delete tally[u];});

  // shield â€” reduce by 1 if >=3 votes
  alive.forEach(p=>{
    const sc=SECRET_CARDS.find(s=>s.id===(p.cards?.secret));
    if(sc?.effect==='shield'&&game.usedSecrets?.[p.username]&&tally[p.username]>=3){
      tally[p.username]=Math.max(0,tally[p.username]-1);
    }
  });

  // Ğ›Ğ¸Ğ´ĞµÑ€ (Ñ€Ğ¾Ğ»ÑŒ): Ğ³Ğ¾Ğ»Ğ¾Ñ Ã—2
  alive.forEach(p=>{
    if(p.role==='leader'&&game.votes?.[p.username]!==undefined&&game.votes?.[p.username]!==null){
      const tid=game.votes[p.username];
      if(tally[tid]!==undefined)tally[tid]+=1; // ÑƒĞ¶Ğµ +1 Ğ±Ğ°Ğ·Ğ¾Ğ²Ğ¾, Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞµĞ¼ ĞµÑ‰Ñ‘ 1
    }
  });

  // Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ÑĞµĞ¼ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ğ³Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ğ°Ğ½Ğ¸Ğ¹
  if(game.voteHistory){
    if(!game.voteLog)game.voteLog={};
    game.voteLog[`R${game.round}`]={votes:{...game.votes},tally:{...tally}};
  }

  let maxV=0,cands=[];
  Object.entries(tally).forEach(([uid,cnt])=>{if(cnt>maxV){maxV=cnt;cands=[uid];}else if(cnt===maxV&&cnt>0)cands.push(uid);});

  // ĞœĞµĞ´Ğ¸Ğº (Ñ€Ğ¾Ğ»ÑŒ): ÑĞ¿Ğ°ÑĞ°ĞµÑ‚ Ğ¾Ğ´Ğ½Ğ¾Ğ³Ğ¾ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ° Ğ¾Ñ‚ Ğ¸ÑĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ
  if(game.medicSave&&cands.includes(game.medicSave)){
    cands=cands.filter(c=>c!==game.medicSave);
  }
  game.medicSave=null;

  // reset secret effects for next round
  game.doubleVote={};game.immunity={};game.extraReveals={};game.secretVote={};

  if(!cands.length||maxV===0){game.phase='playing';game.round++;game.votes={};game.revealedThisRound={};game.lastEliminated=null;return;}
  const eu=rnd(cands);const ep=game.players[eu];
  ep.isEliminated=true;
  if(!game.eliminated)game.eliminated=[];
  game.eliminated.push(eu);
  game.lastEliminated={userId:ep.userId,name:ep.name,allCards:{...ep.cards}};
  const after=Object.values(game.players).filter(p=>!p.isEliminated);
  if(after.length<=game.bunkerSpots){game.phase='finished';}
  else{game.phase='playing';game.round++;game.votes={};game.revealedThisRound={};game._autoVotePending=false;game.extraReveals={};}
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   HOOKS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function useToast(){
  const [t,setT]=useState({msg:'',type:''});
  const tm=useRef();
  const show=useCallback((msg,type='')=>{
    setT({msg,type});clearTimeout(tm.current);
    tm.current=setTimeout(()=>setT({msg:'',type:''}),3000);
  },[]);
  return[t,show];
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SMALL UI COMPONENTS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function Toast({t}){return<div className={`toast${t.msg?' show':''} ${t.type}`}>{t.msg}</div>}
function Spin(){return<div className="spin"/>}
function HZ({red}){return<div className={red?'hz-red':'hz'}/>}

function Btn({ch,onClick,cls='btn-p',sm,disabled,style,id}){
  return<button id={id} className={`btn ${cls}${sm?' btn-sm':''}`} onClick={onClick} disabled={disabled} style={style}>{ch}</button>;
}
function BackBtn({onClick}){
  return(
    <button style={{background:'rgba(255,255,255,0.07)',border:'none',color:'var(--tx2)',fontFamily:"'Inter',sans-serif",fontSize:13,fontWeight:600,padding:'7px 14px',borderRadius:'var(--rad-sm)',cursor:'pointer',display:'flex',alignItems:'center',gap:6,flexShrink:0,transition:'.2s'}}
      onClick={onClick} onMouseEnter={e=>e.currentTarget.style.color='var(--tx)'} onMouseLeave={e=>e.currentTarget.style.color='var(--tx2)'}>
      â† ĞĞ°Ğ·Ğ°Ğ´
    </button>
  );
}

function Tog({on,onToggle,label,sub,dng}){
  return(
    <div className={`tog-row${dng?' dng':''}`} onClick={onToggle}>
      <div className={`tog-track${on?(dng?' dng':' on'):''}`}><div className="tog-thumb"/></div>
      <div>
        <div className="mono" style={{fontSize:9,letterSpacing:2,color:dng?'var(--r)':'var(--a)'}}>{label}</div>
        {sub&&<div className="mono" style={{fontSize:8,color:'var(--tx3)',marginTop:2}}>{sub}</div>}
      </div>
    </div>
  );
}

/* SVG icons */
const Ico={
  home:  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>,
  users: <svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 00-3-3.87"/><path d="M16 3.13a4 4 0 010 7.75"/></svg>,
  trophy:<svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><polyline points="8 21 12 17 16 21"/><line x1="12" y1="17" x2="12" y2="11"/><path d="M7 4H4a2 2 0 000 4c0 5.5 7 8 8 8s8-2.5 8-8a2 2 0 000-4h-3"/><rect x="7" y="2" width="10" height="5" rx="1"/></svg>,
  user:  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>,
  exit:  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg>,
};

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CHAT VIEW
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function ChatView({msgs,me,onSend,title,onClose,extra,extraPadBot=0}){
  const[text,setT]=useState('');
  const bot=useRef();
  useEffect(()=>{if(bot.current)bot.current.scrollIntoView({behavior:'smooth'})},[msgs.length]);
  const send=()=>{const t=text.trim();if(!t)return;onSend(t);setT('');};
  return(
    <>
      <div className="tb">
        {onClose&&<BackBtn onClick={onClose}/>}
        <div className="tb-title">{title}</div>
        {extra}
      </div>
      <div className="chat-msgs" style={{paddingBottom: extraPadBot>0 ? extraPadBot+8 : 8}}>
        {msgs.length===0&&<div style={{textAlign:'center',color:'var(--tx3)',fontSize:12,marginTop:36}}>ĞĞµÑ‚ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹</div>}
        {msgs.map(m=>{
          const isMe=m.from===me.username,isSys=m.from==='system';
          return(
            <div key={m.id||m.ts} className={`bubble ${isSys?'system':isMe?'me':'other'}`}>
              {!isMe&&!isSys&&<div className="bubble-from">{m.fromName||m.from}</div>}
              {m.text}
              {!isSys&&<div className="bubble-time">{fmt(m.ts)}</div>}
            </div>
          );
        })}
        <div ref={bot}/>
      </div>
      <div className="chat-input" style={{paddingBottom: extraPadBot>0 ? extraPadBot+'px' : 'calc(12px + env(safe-area-inset-bottom,0px))'}}>
        <input className="inp" value={text} onChange={e=>setT(e.target.value)} onKeyDown={e=>e.key==='Enter'&&send()} placeholder="Ğ¡Ğ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµâ€¦" maxLength={300}/>
        <button className="chat-send" onClick={send} disabled={!text.trim()}>â–¶</button>
      </div>
    </>
  );
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   AUTH SCREEN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function AuthScreen({onLogin,toast}){
  const[tab,setTab]=useState('login');
  const[uname,setU]=useState('');
  const[dname,setDname]=useState('');
  const[pass,setP]=useState('');
  const[loading,setL]=useState(false);

  const go=async()=>{
    const u=uname.trim().toLowerCase(),p=pass.trim();
    if(u.length<2||u.length>20)return toast('Ğ˜Ğ¼Ñ: 2â€“20 ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ¾Ğ²','err');
    if(p.length<3)return toast('ĞŸĞ°Ñ€Ğ¾Ğ»ÑŒ: Ğ¼Ğ¸Ğ½. 3 ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ°','err');
    if(!/^[a-zĞ°-ÑÑ‘A-ZĞ-Ğ¯Ğ0-9_-]+$/i.test(u))return toast('Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ Ğ±ÑƒĞºĞ²Ñ‹, Ñ†Ğ¸Ñ„Ñ€Ñ‹, _ Ğ¸ -','err');
    setL(true);
    try{
      if(tab==='register'){
        const ex=await DB.getUser(u);if(ex){setL(false);return toast('Ğ˜Ğ¼Ñ Ğ·Ğ°Ğ½ÑÑ‚Ğ¾','err');}
        const all=await DB.getAllUsers();const first=Object.keys(all).length===0;
        const displayName=dname.trim()||u;
        const nu={userId:u,username:u,password:p,displayName:displayName,isAdmin:first,customRank:first?'supreme':null,gamesPlayed:0,gamesWon:0,gamesEliminated:0,createdAt:Date.now()};
        await DB.setUser(u,nu);toast('âœ… ĞĞºĞºĞ°ÑƒĞ½Ñ‚ ÑĞ¾Ğ·Ğ´Ğ°Ğ½!','ok');if(window.triggerGate)window.triggerGate();onLogin(nu);
      }else{
        const usr=await DB.getUser(u);
        if(!usr||usr.password!==p){setL(false);return toast('ĞĞµĞ²ĞµÑ€Ğ½Ñ‹Ğ¹ Ğ»Ğ¾Ğ³Ğ¸Ğ½ Ğ¸Ğ»Ğ¸ Ğ¿Ğ°Ñ€Ğ¾Ğ»ÑŒ','err');}
        if(window.triggerGate)window.triggerGate();onLogin(usr);
      }
    }catch(e){toast('ĞÑˆĞ¸Ğ±ĞºĞ° ÑĞ¾ĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ¸Ñ','err');console.error(e);}
    setL(false);
  };

  return(
    <div className="sc" style={{justifyContent:'center',alignItems:'center',padding:'0 20px',position:'relative',overflow:'hidden'}}>
      <div className="auth-glow"/>
      {/* Big icon */}
      <div style={{fontSize:72,animation:'glow 2.5s ease infinite',marginBottom:4,position:'relative',zIndex:1}}>â˜¢</div>
      <div style={{fontFamily:"'Inter',sans-serif",fontSize:68,letterSpacing:2,color:'var(--a)',textShadow:'0 0 50px rgba(240,165,0,.3)',animation:'glitch 5s steps(1) infinite',position:'relative',zIndex:1}}>Ğ‘Ğ£ĞĞšĞ•Ğ </div>
      <div className="mono" style={{fontSize:9,letterSpacing:1,color:'var(--tx3)',marginBottom:36,position:'relative',zIndex:1}}>ĞĞŸĞĞšĞĞ›Ğ˜ĞŸĞ¡Ğ˜Ğ¡ Â· Ğ¤Ğ¢Ğ˜ Â· WEB</div>

      <div style={{width:'100%',maxWidth:360,background:'rgba(255,255,255,0.05)',backdropFilter:'var(--bl)',WebkitBackdropFilter:'var(--bl)',border:'1px solid rgba(255,255,255,0.1)',borderRadius:'var(--rad-lg)',padding:26,position:'relative',zIndex:1}}>
        {/* no corner brackets in modern design */}

        <div className="tabs" style={{marginBottom:18}}>
          <button className={`tab${tab==='login'?' on':''}`} onClick={()=>setTab('login')}>Ğ’ĞĞ™Ğ¢Ğ˜</button>
          <button className={`tab${tab==='register'?' on':''}`} onClick={()=>setTab('register')}>Ğ Ğ•Ğ“Ğ˜Ğ¡Ğ¢Ğ ĞĞ¦Ğ˜Ğ¯</button>
        </div>
        <input className="inp" placeholder="Ğ˜Ğ¼Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ (Ğ»Ğ¾Ğ³Ğ¸Ğ½)" value={uname} onChange={e=>setU(e.target.value)} maxLength={20} autoComplete="off"/>
        {tab==='register'&&<input className="inp" placeholder="ĞÑ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶Ğ°ĞµĞ¼Ğ¾Ğµ Ğ¸Ğ¼Ñ (Ğ½ĞµĞ¾Ğ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾)" value={dname} onChange={e=>setDname(e.target.value)} maxLength={30} autoComplete="off"/>}
        <input className="inp" type="password" placeholder="ĞŸĞ°Ñ€Ğ¾Ğ»ÑŒ" value={pass} onChange={e=>setP(e.target.value)} onKeyDown={e=>e.key==='Enter'&&go()}/>
        <Btn ch={loading?'â³ Ğ—ĞĞ“Ğ Ğ£Ğ—ĞšĞâ€¦':tab==='login'?'âš¡ Ğ’ĞĞ™Ğ¢Ğ˜ Ğ’ Ğ‘Ğ£ĞĞšĞ•Ğ ':'ğŸ”‘ Ğ¡ĞĞ—Ğ”ĞĞ¢Ğ¬ ĞĞšĞšĞĞ£ĞĞ¢'} onClick={go} disabled={loading}/>
        {tab==='register'&&<div className="mono" style={{fontSize:9,color:'var(--tx3)',marginTop:10,textAlign:'center',letterSpacing:1}}>ĞŸĞµÑ€Ğ²Ñ‹Ğ¹ Ğ·Ğ°Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ â€” Ğ°Ğ´Ğ¼Ğ¸Ğ½Ğ¸ÑÑ‚Ñ€Ğ°Ñ‚Ğ¾Ñ€</div>}
      </div>
    </div>
  );
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   HOME SCREEN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function HomeScreen({user,nav}){
  const rank=getRank(user);
  const stats=[['gamesPlayed','Ğ˜Ğ“Ğ ','var(--a)'],['gamesWon','ĞŸĞĞ‘Ğ•Ğ”','var(--g)'],['gamesEliminated','Ğ’Ğ«Ğ‘Ğ«Ğ›','var(--r)']];
  return(
    <div className="sc">
      <HZ/>
      <div className="tb"><div className="led led-g"/><div className="tb-title" style={{color:'var(--a)'}}>Ğ‘Ğ£ĞĞšĞ•Ğ  Ğ¤Ğ¢Ğ˜</div><div style={{fontSize:11,color:'var(--tx3)',fontFamily:"'Inter',sans-serif",fontWeight:500}}>v2</div></div>
      <div className="scr">
        {/* Profile hero */}
        <div style={{background:'rgba(255,255,255,0.05)',backdropFilter:'var(--bl)',WebkitBackdropFilter:'var(--bl)',border:'1px solid rgba(255,255,255,0.08)',borderRadius:'var(--rad-lg)',padding:'24px 16px 20px',marginBottom:14,position:'relative',textAlign:'center'}}>
          {/* Subtle glow under icon */}
          <div style={{position:'absolute',top:'10%',left:'50%',transform:'translateX(-50%)',width:100,height:100,borderRadius:'50%',background:'radial-gradient(circle,rgba(240,165,0,.15) 0%,transparent 70%)',pointerEvents:'none'}}/>
          <div style={{fontSize:56,marginBottom:6,animation:'glow 3s ease infinite',position:'relative'}}>{rank.icon}</div>
          <div style={{fontFamily:"'Inter',sans-serif",fontSize:26,letterSpacing:3,color:'var(--tx)',marginBottom:2}}>{user.displayName||user.username}</div>
          <div className="mono" style={{fontSize:9,color:'var(--tx3)',letterSpacing:2,marginBottom:10}}>@{user.username}</div>
          <RChip user={user} size={10}/>
          {/* Stats row */}
          <div style={{display:'flex',justifyContent:'center',gap:0,marginTop:18,borderTop:'1px solid var(--ab)',paddingTop:16}}>
            {stats.map(([k,l,c],i)=>(
              <div key={k} style={{flex:1,textAlign:'center',borderRight:i<2?'1px solid var(--ab)':'none'}}>
                <div style={{fontFamily:"'Inter',sans-serif",fontSize:32,color:c,lineHeight:1}}>{user[k]||0}</div>
                <div className="mono" style={{fontSize:8,color:'var(--tx3)',letterSpacing:2,marginTop:3}}>{l}</div>
              </div>
            ))}
          </div>
        </div>

        <div className="lbl">Ğ”Ğ•Ğ™Ğ¡Ğ¢Ğ’Ğ˜Ğ¯</div>
        <div style={{display:'flex',flexDirection:'column',gap:8,marginBottom:4}}>
          <Btn ch="â˜¢ Ğ¡ĞĞ—Ğ”ĞĞ¢Ğ¬ Ğ˜Ğ“Ğ Ğ£" onClick={()=>nav('createGame')}/>
          <Btn ch="ğŸ” ĞŸĞĞ”Ğ‘ĞĞ  Ğ˜Ğ“Ğ ĞĞšĞĞ’" onClick={()=>nav('matchmaking')} cls="btn-c"/>
          <Btn ch="ğŸ”‘ Ğ’ĞĞ™Ğ¢Ğ˜ ĞŸĞ ĞšĞĞ”Ğ£" onClick={()=>nav('joinGame')} cls="btn-g"/>
          <div className="brow">
            <Btn ch="ğŸ† Ğ Ğ•Ğ™Ğ¢Ğ˜ĞĞ“" onClick={()=>nav('leaderboard')} cls="btn-c" sm/>
            <Btn ch="ğŸ‘¤ ĞŸĞ ĞĞ¤Ğ˜Ğ›Ğ¬" onClick={()=>nav('profile')} cls="btn-g" sm/>
          </div>
          {user.isAdmin&&<Btn ch="ğŸ” ĞŸĞĞĞ•Ğ›Ğ¬ ĞĞ”ĞœĞ˜ĞĞ˜Ğ¡Ğ¢Ğ ĞĞ¢ĞĞ Ğ" onClick={()=>nav('admin')} cls="btn-pu"/>}
        </div>

        <div className="lbl">Ğ¡Ğ˜Ğ¡Ğ¢Ğ•ĞœĞ Ğ—Ğ’ĞĞĞ˜Ğ¯</div>
        {RANKS.filter(r=>!r.adminOnly||user.isAdmin).map(r=>{
          const cur=getRank(user).id===r.id;
          return(
            <div key={r.id} style={{display:'flex',alignItems:'center',gap:10,padding:'9px 12px',background:cur?'var(--at)':'rgba(255,255,255,0.03)',border:`1px solid ${cur?r.bdr:'rgba(255,255,255,0.07)'}`,borderRadius:'var(--rad-sm)',marginBottom:4,opacity:cur?1:.45,transition:'.2s'}}>
              <span style={{fontSize:18}}>{r.icon}</span>
              <div style={{flex:1}}>
                <div style={{fontSize:11,fontWeight:600,color:cur?r.color:'var(--tx3)'}}>{r.name}</div>
                <div style={{fontSize:10,color:'var(--tx3)',marginTop:1}}>{r.adminOnly?'Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ Ğ°Ğ´Ğ¼Ğ¸Ğ½Ğ¸ÑÑ‚Ñ€Ğ°Ñ‚Ğ¾Ñ€Ñ‹':r.min===0?'ĞĞ°Ñ‡Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ':`Ğ¾Ñ‚ ${r.min} Ğ¸Ğ³Ñ€`}</div>
              </div>
              {cur&&<span className="bdg bdg-a" style={{fontSize:7}}>Ğ¢Ğ•ĞšĞ£Ğ©Ğ•Ğ•</span>}
            </div>
          );
        })}

        {/* â•â•â•â•â•â•â• Ğ˜ĞĞ¤ĞĞ ĞœĞĞ¦Ğ˜Ğ¯ ĞĞ‘ Ğ˜Ğ“Ğ Ğ• â•â•â•â•â•â•â• */}
        <div className="lbl" style={{marginTop:24}}>ĞĞ‘ Ğ˜Ğ“Ğ Ğ•</div>
        <div style={{background:'rgba(255,255,255,0.04)',border:'1px solid rgba(255,255,255,0.08)',borderRadius:'var(--rad)',padding:16,marginBottom:10}}>
          <div style={{fontSize:13,color:'var(--tx2)',lineHeight:1.65}}>
            <b style={{color:'var(--a)'}}>Ğ‘ÑƒĞ½ĞºĞµÑ€</b> â€” ÑĞ¾Ñ†Ğ¸Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ğ¸Ğ³Ñ€Ğ° Ğ½Ğ° Ğ²Ñ‹Ğ¶Ğ¸Ğ²Ğ°Ğ½Ğ¸Ğµ. ĞĞ¿Ğ¾ĞºĞ°Ğ»Ğ¸Ğ¿ÑĞ¸Ñ ÑĞ»ÑƒÑ‡Ğ¸Ğ»ÑÑ. ĞÑÑ‚Ğ°Ğ»Ğ¾ÑÑŒ Ğ¾Ğ´Ğ½Ğ¾ ÑƒĞ±ĞµĞ¶Ğ¸Ñ‰Ğµ Ñ Ğ¾Ğ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ½Ñ‹Ğ¼Ğ¸ Ğ¼ĞµÑÑ‚Ğ°Ğ¼Ğ¸. Ğ˜Ğ³Ñ€Ğ¾ĞºĞ¸ Ñ€Ğ°ÑĞºÑ€Ñ‹Ğ²Ğ°ÑÑ‚ ÑĞ²Ğ¾Ğ¸ ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ¸ Ğ¸ ÑƒĞ±ĞµĞ¶Ğ´Ğ°ÑÑ‚ Ğ¾ÑÑ‚Ğ°Ğ»ÑŒĞ½Ñ‹Ñ…, Ñ‡Ñ‚Ğ¾ Ğ¸Ğ¼ĞµĞ½Ğ½Ğ¾ Ğ¾Ğ½Ğ¸ Ğ·Ğ°ÑĞ»ÑƒĞ¶Ğ¸Ğ²Ğ°ÑÑ‚ Ğ¼ĞµÑÑ‚Ğ¾ Ğ² Ğ±ÑƒĞ½ĞºĞµÑ€Ğµ.
            <br/><br/>
            ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ñ€Ğ°ÑƒĞ½Ğ´ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ¸ <b style={{color:'var(--tx)'}}>Ñ€Ğ°ÑĞºÑ€Ñ‹Ğ²Ğ°ÑÑ‚ Ğ¿Ğ¾ 2 ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ¸</b>, Ğ¾Ğ±ÑÑƒĞ¶Ğ´Ğ°ÑÑ‚ Ğ¸ Ğ³Ğ¾Ğ»Ğ¾ÑÑƒÑÑ‚ â€” ĞºĞ¾Ğ³Ğ¾ Ğ²Ñ‹Ğ³Ğ½Ğ°Ñ‚ÑŒ. Ğ˜Ğ³Ñ€Ğ° Ğ·Ğ°ĞºĞ°Ğ½Ñ‡Ğ¸Ğ²Ğ°ĞµÑ‚ÑÑ, ĞºĞ¾Ğ³Ğ´Ğ° Ğ¾ÑÑ‚Ğ°Ğ²ÑˆĞ¸Ñ…ÑÑ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ¾Ğ² â‰¤ Ñ‡Ğ¸ÑĞ»Ñƒ Ğ¼ĞµÑÑ‚ Ğ² Ğ±ÑƒĞ½ĞºĞµÑ€Ğµ.
          </div>
        </div>

        <div className="lbl">ĞšĞĞš Ğ˜Ğ“Ğ ĞĞ¢Ğ¬</div>
        {[
          ['1','â˜¢','Ğ’ĞµĞ´ÑƒÑ‰Ğ¸Ğ¹ ÑĞ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ Ğ¸Ğ³Ñ€Ñƒ, Ğ·Ğ°Ğ´Ğ°Ñ‘Ñ‚ ÑÑ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¹ Ğ°Ğ¿Ğ¾ĞºĞ°Ğ»Ğ¸Ğ¿ÑĞ¸ÑĞ° Ğ¸ Ñ‡Ğ¸ÑĞ»Ğ¾ Ğ¼ĞµÑÑ‚ Ğ² Ğ±ÑƒĞ½ĞºĞµÑ€Ğµ'],
          ['2','ğŸ”‘','ĞÑÑ‚Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ¸ Ğ²Ñ…Ğ¾Ğ´ÑÑ‚ Ğ¿Ğ¾ ĞºĞ¾Ğ´Ñƒ ĞºĞ¾Ğ¼Ğ½Ğ°Ñ‚Ñ‹'],
          ['3','ğŸƒ','Ğ’ÑĞµ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ÑÑ‚ ÑƒĞ½Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ğµ ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ¸ â€” Ğ¿Ñ€Ğ¾Ñ„ĞµÑÑĞ¸Ñ, Ğ·Ğ´Ğ¾Ñ€Ğ¾Ğ²ÑŒĞµ, Ñ…Ğ¾Ğ±Ğ±Ğ¸, Ğ±Ğ°Ğ³Ğ°Ğ¶ Ğ¸ ÑĞµĞºÑ€ĞµÑ‚Ğ½Ñ‹Ğ¹ Ñ„Ğ°ĞºÑ‚'],
          ['4','ğŸ‘','ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ñ€Ğ°ÑƒĞ½Ğ´ Ñ€Ğ°ÑĞºÑ€Ñ‹Ğ²Ğ°Ğ¹ 2 ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ¸ Ğ¸ ÑƒĞ±ĞµĞ¶Ğ´Ğ°Ğ¹ Ğ¾ÑÑ‚Ğ°Ğ»ÑŒĞ½Ñ‹Ñ… Ğ²Ğ·ÑÑ‚ÑŒ Ñ‚ĞµĞ±Ñ Ğ² Ğ±ÑƒĞ½ĞºĞµÑ€'],
          ['5','ğŸ—³','ĞŸĞ¾ÑĞ»Ğµ Ğ¾Ğ±ÑÑƒĞ¶Ğ´ĞµĞ½Ğ¸Ñ â€” Ñ‚Ğ°Ğ¹Ğ½Ğ¾Ğµ Ğ³Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ğ°Ğ½Ğ¸Ğµ. ĞšÑ‚Ğ¾ Ğ½Ğ°Ğ±Ñ€Ğ°Ğ» Ğ±Ğ¾Ğ»ÑŒÑˆĞµ Ğ²ÑĞµĞ³Ğ¾ Ğ³Ğ¾Ğ»Ğ¾ÑĞ¾Ğ² â€” Ğ²Ñ‹Ğ±Ñ‹Ğ²Ğ°ĞµÑ‚'],
          ['6','ğŸ†','Ğ’Ñ‹Ğ¶Ğ¸Ğ²ÑˆĞ¸Ğµ, Ğ¿Ğ¾Ğ¼ĞµÑÑ‚Ğ¸Ğ²ÑˆĞ¸ĞµÑÑ Ğ² Ğ±ÑƒĞ½ĞºĞµÑ€ â€” Ğ¿Ğ¾Ğ±ĞµĞ´Ğ¸Ñ‚ĞµĞ»Ğ¸!'],
        ].map(([n,icon,text])=>(
          <div key={n} style={{display:'flex',alignItems:'flex-start',gap:12,padding:'11px 14px',background:'rgba(255,255,255,0.03)',border:'1px solid rgba(255,255,255,0.07)',borderRadius:'var(--rad-sm)',marginBottom:6}}>
            <div style={{width:26,height:26,borderRadius:'50%',background:'var(--at)',border:'1px solid rgba(240,165,0,0.3)',display:'flex',alignItems:'center',justifyContent:'center',fontSize:11,fontWeight:700,color:'var(--a)',flexShrink:0}}>{n}</div>
            <div style={{fontSize:13,color:'var(--tx2)',lineHeight:1.5,paddingTop:3}}><span style={{marginRight:6}}>{icon}</span>{text}</div>
          </div>
        ))}

        <div className="lbl">ĞšĞĞ Ğ¢ĞĞ§ĞšĞ˜ ĞŸĞ•Ğ Ğ¡ĞĞĞĞ–Ğ</div>
        <div style={{display:'grid',gridTemplateColumns:'1fr 1fr',gap:8,marginBottom:10}}>
          {[
            ['ğŸ‘¤','ĞŸĞ¾Ğ» Ğ¸ Ğ²Ğ¾Ğ·Ñ€Ğ°ÑÑ‚','Ğ‘Ğ°Ğ·Ğ¾Ğ²Ğ°Ñ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ Ğ¾ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶Ğµ'],
            ['ğŸ’¼','ĞŸÑ€Ğ¾Ñ„ĞµÑÑĞ¸Ñ','Ğ§Ñ‚Ğ¾ ÑƒĞ¼ĞµĞµÑ‚ Ğ´ĞµĞ»Ğ°Ñ‚ÑŒ Ğ² Ğ±ÑƒĞ½ĞºĞµÑ€Ğµ'],
            ['ğŸ¥','Ğ—Ğ´Ğ¾Ñ€Ğ¾Ğ²ÑŒĞµ','Ğ¤Ğ¸Ğ·Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ğ¸ Ğ¿ÑĞ¸Ñ…Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ'],
            ['ğŸ¯','Ğ¥Ğ¾Ğ±Ğ±Ğ¸','ĞĞ°Ğ²Ñ‹ĞºĞ¸ Ğ¸ ÑƒĞ²Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ñ'],
            ['ğŸ’','Ğ‘Ğ°Ğ³Ğ°Ğ¶','Ğ§Ñ‚Ğ¾ Ğ²Ğ·ÑĞ» Ñ ÑĞ¾Ğ±Ğ¾Ğ¹'],
            ['ğŸ¤«','Ğ¡ĞµĞºÑ€ĞµÑ‚Ğ½Ñ‹Ğ¹ Ñ„Ğ°ĞºÑ‚','Ğ¡ĞºÑ€Ñ‹Ñ‚Ğ°Ñ Ğ´ĞµÑ‚Ğ°Ğ»ÑŒ Ğ¾ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶Ğµ'],
          ].map(([icon,name,desc])=>(
            <div key={name} style={{background:'rgba(255,255,255,0.04)',border:'1px solid rgba(255,255,255,0.08)',borderRadius:'var(--rad)',padding:'12px 12px 10px'}}>
              <div style={{fontSize:22,marginBottom:6}}>{icon}</div>
              <div style={{fontSize:12,fontWeight:600,color:'var(--tx)',marginBottom:3}}>{name}</div>
              <div style={{fontSize:10,color:'var(--tx3)',lineHeight:1.4}}>{desc}</div>
            </div>
          ))}
        </div>

        <div className="lbl">ğŸƒ Ğ¡Ğ•ĞšĞ Ğ•Ğ¢ĞĞ«Ğ• ĞšĞĞ Ğ¢ĞĞ§ĞšĞ˜</div>
        <div style={{background:'rgba(155,89,239,0.08)',border:'1px solid rgba(155,89,239,0.25)',borderRadius:'var(--rad)',padding:16,marginBottom:10}}>
          <div style={{fontSize:13,color:'var(--tx2)',lineHeight:1.65,marginBottom:12}}>
            ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ¸Ğ³Ñ€Ğ¾Ğº Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚ <b style={{color:'var(--p)'}}>Ğ¾Ğ´Ğ½Ñƒ ÑĞµĞºÑ€ĞµÑ‚Ğ½ÑƒÑ ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºÑƒ</b> â€” ÑƒĞ½Ğ¸ĞºĞ°Ğ»ÑŒĞ½ÑƒÑ ÑĞ¸Ñ‚ÑƒĞ°Ñ†Ğ¸Ñ Ğ¸Ğ»Ğ¸ ÑÑƒĞ¿ĞµÑ€ÑĞ¿Ğ¾ÑĞ¾Ğ±Ğ½Ğ¾ÑÑ‚ÑŒ, ĞºĞ¾Ñ‚Ğ¾Ñ€Ğ°Ñ Ğ´ĞµĞ¹ÑÑ‚Ğ²ÑƒĞµÑ‚ Ğ¾Ğ´Ğ¸Ğ½ Ñ€Ğ°Ğ· Ğ·Ğ° Ğ¸Ğ³Ñ€Ñƒ. Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹ ĞµÑ‘ Ğ² Ğ½ÑƒĞ¶Ğ½Ñ‹Ğ¹ Ğ¼Ğ¾Ğ¼ĞµĞ½Ñ‚!
          </div>
          <div style={{display:'flex',flexDirection:'column',gap:6}}>
            {[
              ['âš¡','Ğ”Ğ²Ğ¾Ğ¹Ğ½Ğ¾Ğ¹ ÑƒĞ´Ğ°Ñ€','Ğ¢Ğ²Ğ¾Ğ¹ Ğ³Ğ¾Ğ»Ğ¾Ñ ÑÑ‡Ğ¸Ñ‚Ğ°ĞµÑ‚ÑÑ Ğ´Ğ²Ğ°Ğ¶Ğ´Ñ‹','#f0a500'],
              ['ğŸ›¡ï¸','Ğ˜Ğ¼Ğ¼ÑƒĞ½Ğ¸Ñ‚ĞµÑ‚','ĞĞµĞ»ÑŒĞ·Ñ Ğ±Ñ‹Ñ‚ÑŒ Ğ²Ñ‹Ğ³Ğ½Ğ°Ğ½Ğ½Ñ‹Ğ¼ Ğ´Ğ°Ğ¶Ğµ Ğ¿Ñ€Ğ¸ Ğ¼Ğ°ĞºÑĞ¸Ğ¼ÑƒĞ¼Ğµ Ğ³Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²','#30d158'],
              ['ğŸ”„','ĞĞ±Ğ¼ĞµĞ½ ĞºĞ°Ñ€Ñ‚Ğ¾Ğ¹','ĞœĞµĞ½ÑĞµÑˆÑŒ Ğ»ÑĞ±ÑƒÑ ĞºĞ°Ñ€Ñ‚Ñƒ Ñ Ğ´Ñ€ÑƒĞ³Ğ¸Ğ¼ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ¾Ğ¼','#0a84ff'],
              ['ğŸ‘ï¸','Ğ¨Ğ¿Ğ¸Ğ¾Ğ½','Ğ¢Ğ°Ğ¹Ğ½Ğ¾ Ğ²Ğ¸Ğ´Ğ¸ÑˆÑŒ Ğ·Ğ°ĞºÑ€Ñ‹Ñ‚ÑƒÑ ĞºĞ°Ñ€Ñ‚Ñƒ Ğ´Ñ€ÑƒĞ³Ğ¾Ğ³Ğ¾ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ°','#bf5af2'],
              ['â†—ï¸','Ğ”Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾Ğµ Ñ€Ğ°ÑĞºÑ€Ñ‹Ñ‚Ğ¸Ğµ','ĞŸĞ¾Ğ»ÑƒÑ‡Ğ°ĞµÑˆÑŒ +1 Ñ€Ğ°ÑĞºÑ€Ñ‹Ñ‚Ğ¸Ğµ Ğ² ÑÑ‚Ğ¾Ğ¼ Ñ€Ğ°ÑƒĞ½Ğ´Ğµ','#0a84ff'],
              ['ğŸ²','Ğ ÑƒĞ»ĞµÑ‚ĞºĞ°','Ğ’ÑĞµ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ¸ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ÑÑ‚ ÑĞ»ÑƒÑ‡Ğ°Ğ¹Ğ½Ñ‹Ğµ ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ¸ Ğ·Ğ°Ğ½Ğ¾Ğ²Ğ¾','#ff9f0a'],
              ['ğŸ”‡','ĞĞµĞ¼Ğ¾Ğ¹','ĞŸÑ€Ğ¾Ñ‚Ğ¸Ğ²Ğ½Ğ¸Ğº Ğ½Ğµ Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ³Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ğ°Ñ‚ÑŒ ÑÑ‚Ğ¾Ñ‚ Ñ€Ğ°ÑƒĞ½Ğ´','#ff453a'],
            ].map(([icon,name,desc,color])=>(
              <div key={name} style={{display:'flex',gap:10,alignItems:'flex-start',padding:'8px 10px',background:'rgba(255,255,255,0.03)',borderRadius:'var(--rad-sm)'}}>
                <span style={{fontSize:16,flexShrink:0,marginTop:1}}>{icon}</span>
                <div>
                  <div style={{fontSize:12,fontWeight:600,color:color||'var(--tx)',marginBottom:2}}>{name}</div>
                  <div style={{fontSize:10,color:'var(--tx3)',lineHeight:1.4}}>{desc}</div>
                </div>
              </div>
            ))}
            <div style={{fontSize:10,color:'var(--tx3)',marginTop:4,fontStyle:'italic',textAlign:'center'}}>â€¦Ğ¸ ĞµÑ‰Ñ‘ Ğ¼Ğ½Ğ¾Ğ³Ğ¾ Ğ´Ñ€ÑƒĞ³Ğ¸Ñ… ÑĞµĞºÑ€ĞµÑ‚Ğ½Ñ‹Ñ… ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞµĞº!</div>
          </div>
        </div>

        <div className="lbl" style={{marginTop:24}}>âš™ï¸ Ğ”ĞĞŸĞĞ›ĞĞ˜Ğ¢Ğ•Ğ›Ğ¬ĞĞ«Ğ• ĞœĞ•Ğ¥ĞĞĞ˜ĞšĞ˜</div>
        <div style={{display:'grid',gridTemplateColumns:'1fr 1fr',gap:10,marginBottom:14}}>
          {[
            {icon:'ğŸ¤',name:'Ğ”ĞµĞ±Ğ°Ñ‚Ñ‹',desc:'60 ÑĞµĞº Ğ¿ĞµÑ€ĞµĞ´ Ğ³Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ğ°Ğ½Ğ¸ĞµĞ¼. ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ¸Ğ³Ñ€Ğ¾Ğº Ğ·Ğ°Ñ‰Ğ¸Ñ‰Ğ°ĞµÑ‚ ÑĞµĞ±Ñ Ğ¿Ğ¾ Ğ¾Ñ‡ĞµÑ€ĞµĞ´Ğ¸, Ğ¿Ğ¾ĞºĞ° Ñ‚Ğ°Ğ¹Ğ¼ĞµÑ€ Ñ‚Ğ¸ĞºĞ°ĞµÑ‚.'},
            {icon:'ğŸ“Š',name:'Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ğ³Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ğ°Ğ½Ğ¸Ğ¹',desc:'ĞŸĞ¾ÑĞ»Ğµ Ñ€Ğ°ÑƒĞ½Ğ´Ğ° Ğ²ÑĞµ Ğ²Ğ¸Ğ´ÑÑ‚ ĞºÑ‚Ğ¾ Ğ·Ğ° ĞºĞ¾Ğ³Ğ¾ Ğ³Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ğ°Ğ» â€” Ğ½Ğ¸ĞºĞ°ĞºĞ¸Ñ… Ñ‚Ğ°Ğ¹Ğ½!'},
            {icon:'ğŸ­',name:'Ğ Ğ¾Ğ»Ğ¸',desc:'Ğ›Ğ¸Ğ´ĞµÑ€ (x2 Ğ³Ğ¾Ğ»Ğ¾Ñ), ĞœĞµĞ´Ğ¸Ğº (ÑĞ¿Ğ°ÑĞ°ĞµÑ‚), Ğ¡Ğ°Ğ±Ğ¾Ñ‚Ğ°Ğ¶Ğ½Ğ¸Ğº (Ñ…Ğ¾Ñ‡ĞµÑ‚ Ğ¿Ñ€Ğ¾Ğ¸Ğ³Ñ€Ğ°Ñ‚ÑŒ), Ğ¨Ğ¿Ğ¸Ğ¾Ğ½ â€” Ñ€Ğ°ÑĞºÑ€Ñ‹Ğ²Ğ°ÑÑ‚ÑÑ Ğ² Ñ„Ğ¸Ğ½Ğ°Ğ»Ğµ.'},
            {icon:'ğŸ“¡',name:'Ğ Ğ°Ğ´Ğ¸Ğ¾Ğ¿ĞµÑ€ĞµĞ³Ğ¾Ğ²Ğ¾Ñ€Ñ‹',desc:'ĞŸÑ€Ğ¸Ğ²Ğ°Ñ‚Ğ½Ñ‹Ğ¹ Ñ‡Ğ°Ñ‚ Ñ Ğ»ÑĞ±Ñ‹Ğ¼ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ¾Ğ¼. Ğ”Ğ¾Ğ³Ğ¾Ğ²Ğ°Ñ€Ğ¸Ğ²Ğ°Ğ¹ÑÑ Ñ‚Ğ°Ğ¹Ğ½Ğ¾ Ğ¿Ñ€ÑĞ¼Ğ¾ Ğ²Ğ¾ Ğ²Ñ€ĞµĞ¼Ñ Ñ€Ğ°ÑƒĞ½Ğ´Ğ°.'},
            {icon:'ğŸ—ºï¸',name:'ĞšĞ°Ñ€Ñ‚Ğ° Ğ±ÑƒĞ½ĞºĞµÑ€Ğ°',desc:'ĞšĞ¾Ğ¼Ğ½Ğ°Ñ‚Ñ‹ Ğ±ÑƒĞ½ĞºĞµÑ€Ğ° Ğ´Ğ°ÑÑ‚ Ğ±Ğ¾Ğ½ÑƒÑÑ‹. ĞœĞµĞ´Ğ¿ÑƒĞ½ĞºÑ‚, Ğ›Ğ°Ğ±Ğ¾Ñ€Ğ°Ñ‚Ğ¾Ñ€Ğ¸Ñ, Ğ¤ĞµÑ€Ğ¼Ğ° â€” ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚ ÑĞ²Ğ¾Ñ.'},
          ].map(m=>(
            <div key={m.name} style={{background:'rgba(255,255,255,0.04)',border:'1px solid rgba(255,255,255,0.08)',borderRadius:'var(--rad-sm)',padding:'14px 12px'}}>
              <div style={{fontSize:22,marginBottom:6}}>{m.icon}</div>
              <div style={{fontSize:13,fontWeight:700,color:'var(--tx)',marginBottom:4}}>{m.name}</div>
              <div style={{fontSize:11,color:'var(--tx3)',lineHeight:1.5}}>{m.desc}</div>
            </div>
          ))}
        </div>

        <div className="lbl">Ğ¡ĞĞ’Ğ•Ğ¢Ğ«</div>
        {[
          ['ğŸ’¡','Ğ Ğ°ÑĞºÑ€Ñ‹Ğ²Ğ°Ğ¹ ÑĞ½Ğ°Ñ‡Ğ°Ğ»Ğ° ÑĞ¸Ğ»ÑŒĞ½Ñ‹Ğµ ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ¸ â€” ÑÑ„Ğ¾Ñ€Ğ¼Ğ¸Ñ€ÑƒĞ¹ Ğ¿ĞµÑ€Ğ²Ğ¾Ğµ Ğ²Ğ¿ĞµÑ‡Ğ°Ñ‚Ğ»ĞµĞ½Ğ¸Ğµ'],
          ['ğŸ¤«','ĞĞµ ÑĞ¿ĞµÑˆĞ¸ Ñ ÑĞµĞºÑ€ĞµÑ‚Ğ½Ğ¾Ğ¹ ĞºĞ°Ñ€Ñ‚Ğ¾Ğ¹ â€” Ğ»ÑƒÑ‡ÑˆĞ¸Ğ¹ Ğ¼Ğ¾Ğ¼ĞµĞ½Ñ‚ â€” Ğ½Ğ° Ğ³Ñ€Ğ°Ğ½Ğ¸ Ğ²Ñ‹Ğ±Ñ‹Ğ²Ğ°Ğ½Ğ¸Ñ'],
          ['ğŸ‘¥','ĞĞ±ÑŠĞµĞ´Ğ¸Ğ½ÑĞ¹ÑÑ Ñ Ğ´Ñ€ÑƒĞ³Ğ¸Ğ¼Ğ¸ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ°Ğ¼Ğ¸ Ğ¿Ñ€Ğ¾Ñ‚Ğ¸Ğ² ÑĞ²Ğ½Ñ‹Ñ… ÑƒĞ³Ñ€Ğ¾Ğ·'],
          ['ğŸ­','ĞœĞ¾Ğ¶Ğ½Ğ¾ Ğ±Ğ»ĞµÑ„Ğ¾Ğ²Ğ°Ñ‚ÑŒ â€” Ğ½Ğ¸ĞºÑ‚Ğ¾ Ğ½Ğµ Ğ·Ğ½Ğ°ĞµÑ‚ Ñ‚Ğ²Ğ¾Ğ¸ Ğ·Ğ°ĞºÑ€Ñ‹Ñ‚Ñ‹Ğµ ĞºĞ°Ñ€Ñ‚Ñ‹'],
        ].map(([icon,text])=>(
          <div key={text} style={{display:'flex',gap:10,alignItems:'flex-start',padding:'10px 12px',background:'rgba(255,255,255,0.03)',border:'1px solid rgba(255,255,255,0.06)',borderRadius:'var(--rad-sm)',marginBottom:6}}>
            <span style={{fontSize:15,flexShrink:0}}>{icon}</span>
            <div style={{fontSize:12,color:'var(--tx2)',lineHeight:1.5}}>{text}</div>
          </div>
        ))}

        <div style={{height:8}}/>
      </div>
    </div>
  );
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PROFILE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function ProfileScreen({user,onBack,toast,onUpdate}){
  const[name,setN]=useState(user.displayName||user.username);
  const[saving,setSv]=useState(false);
  const rank=getRank(user);
  const wr=user.gamesPlayed?Math.round((user.gamesWon/user.gamesPlayed)*100):0;

  const save=async()=>{
    const n=name.trim();if(n.length<2)return toast('ĞœĞ¸Ğ½. 2 ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ°','err');
    setSv(true);await DB.updateUser(user.username,{displayName:n});
    onUpdate({...user,displayName:n});toast('âœ… Ğ˜Ğ¼Ñ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¾!','ok');setSv(false);
  };

  return(
    <div className="sc">
      <HZ/>
      <div className="tb"><BackBtn onClick={onBack}/><div className="tb-title">ĞŸĞ ĞĞ¤Ğ˜Ğ›Ğ¬</div></div>
      <div className="scr">
        <div style={{textAlign:'center',padding:'24px 0 18px'}}>
          <div style={{fontSize:72,animation:'glow 3s ease infinite',marginBottom:8}}>{rank.icon}</div>
          <div style={{fontFamily:"'Inter',sans-serif",fontSize:28,letterSpacing:3}}>{user.displayName||user.username}</div>
          <div className="mono" style={{fontSize:9,color:'var(--tx3)',letterSpacing:2,marginBottom:10}}>@{user.username}</div>
          <RChip user={user} size={11}/>
          {user.isAdmin&&<div style={{marginTop:8}}><span className="bdg bdg-p">ĞĞ”ĞœĞ˜ĞĞ˜Ğ¡Ğ¢Ğ ĞĞ¢ĞĞ </span></div>}
        </div>
        <div style={{display:'grid',gridTemplateColumns:'1fr 1fr',gap:8,marginBottom:14}}>
          {[['Ğ˜Ğ³Ñ€Ñ‹',user.gamesPlayed||0,'var(--a)'],['ĞŸĞ¾Ğ±ĞµĞ´Ñ‹',user.gamesWon||0,'var(--g)'],['Ğ’Ñ‹Ğ±Ñ‹Ğ²Ğ°Ğ½Ğ¸Ğ¹',user.gamesEliminated||0,'var(--r)'],['% Ğ¿Ğ¾Ğ±ĞµĞ´',wr+'%','var(--c)']].map(([l,v,c])=>(
            <div key={l} className="stat-box"><div className="sv" style={{color:c}}>{v}</div><div className="sl">{l}</div></div>
          ))}
        </div>
        <div className="lbl">Ğ˜Ğ—ĞœĞ•ĞĞ˜Ğ¢Ğ¬ Ğ˜ĞœĞ¯</div>
        <input className="inp" value={name} onChange={e=>setN(e.target.value)} maxLength={20} placeholder="ĞÑ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶Ğ°ĞµĞ¼Ğ¾Ğµ Ğ¸Ğ¼Ñ"/>
        <Btn ch={saving?'â³ Ğ¡ĞĞ¥Ğ ĞĞĞ•ĞĞ˜Ğ•â€¦':'ğŸ’¾ Ğ¡ĞĞ¥Ğ ĞĞĞ˜Ğ¢Ğ¬'} onClick={save} disabled={saving||name.trim()===(user.displayName||user.username)}/>

        <div className="lbl" style={{marginTop:8}}>ĞŸĞ ĞĞ“Ğ Ğ•Ğ¡Ğ¡</div>
        {RANKS.filter(r=>!r.adminOnly).map((r,i)=>{
          const next=RANKS.filter(rr=>!rr.adminOnly)[i-1];
          const cur=getRank(user).id===r.id;
          const reached=(user.gamesPlayed||0)>=r.min;
          const pct=next?Math.min(100,Math.round(((user.gamesPlayed||0)-r.min)/(next.min-r.min)*100)):100;
          return(
            <div key={r.id} style={{marginBottom:8,opacity:reached?1:.4}}>
              <div style={{display:'flex',alignItems:'center',gap:8,marginBottom:4}}>
                <span style={{fontSize:16}}>{r.icon}</span>
                <span className="mono" style={{fontSize:9,color:reached?r.color:'var(--tx3)',flex:1}}>{r.name}</span>
                {cur&&<span className="bdg bdg-a" style={{fontSize:7}}>Ğ¡Ğ•Ğ™Ğ§ĞĞ¡</span>}
                <span className="mono" style={{fontSize:8,color:'var(--tx3)'}}>{r.min}+</span>
              </div>
              {cur&&next&&<div style={{height:2,background:'var(--tx3)',borderRadius:2,overflow:'hidden'}}><div style={{height:'100%',width:`${pct}%`,background:r.color,transition:'.5s'}}/></div>}
            </div>
          );
        })}
      </div>
    </div>
  );
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LEADERBOARD
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function LeaderboardScreen({me,onBack}){
  const[users,setU]=useState([]);
  const[loading,setL]=useState(true);
  const[sort,setS]=useState('gamesWon');
  const load=async(k)=>{setL(true);const all=await DB.getAllUsers();setU(Object.values(all).sort((a,b)=>(b[k]||0)-(a[k]||0)));setL(false);};
  useEffect(()=>{load('gamesWon');},[]);
  const medals=['ğŸ¥‡','ğŸ¥ˆ','ğŸ¥‰'];
  return(
    <div className="sc">
      <HZ/>
      <div className="tb"><BackBtn onClick={onBack}/><div className="tb-title">Ğ Ğ•Ğ™Ğ¢Ğ˜ĞĞ“</div></div>
      <div className="scr">
        <div className="tabs">
          {[['gamesWon','ĞŸĞĞ‘Ğ•Ğ”Ğ«'],['gamesPlayed','Ğ˜Ğ“Ğ Ğ«'],['gamesEliminated','Ğ’Ğ«Ğ‘Ğ«Ğ’ĞĞĞ˜Ğ¯']].map(([k,l])=>(
            <button key={k} className={`tab${sort===k?' on':''}`} onClick={()=>{setS(k);load(k);}}>{l}</button>
          ))}
        </div>
        {loading?<Spin/>:users.map((u,i)=>{
          const isMe=u.username===me.username;
          return(
            <div key={u.username} className={`lb-row${isMe?' me':''}`}>
              <div style={{fontFamily:"'Inter',sans-serif",fontSize:i<3?24:20,color:i<3?'var(--a)':'var(--tx3)',width:32,textAlign:'center',flexShrink:0}}>{medals[i]||(i+1)}</div>
              <div style={{flex:1}}>
                <div style={{display:'flex',alignItems:'center',gap:6,marginBottom:3}}>
                  <span style={{fontSize:15,fontWeight:700}}>{u.displayName||u.username}</span>
                  {isMe&&<span className="bdg bdg-c" style={{fontSize:7}}>Ğ’Ğ«</span>}
                </div>
                <RChip user={u}/>
              </div>
              <div style={{textAlign:'right'}}>
                <div style={{fontFamily:"'Inter',sans-serif",fontSize:26,color:sort==='gamesWon'?'var(--g)':sort==='gamesEliminated'?'var(--r)':'var(--a)'}}>{u[sort]||0}</div>
                <div className="mono" style={{fontSize:8,color:'var(--tx3)'}}>{sort==='gamesWon'?'Ğ¿Ğ¾Ğ±ĞµĞ´':sort==='gamesPlayed'?'Ğ¸Ğ³Ñ€':'Ğ²Ñ‹Ğ±Ñ‹Ğ²Ğ°Ğ½Ğ¸Ğ¹'}</div>
              </div>
            </div>
          );
        })}
      </div>
    </div>
  );
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ADMIN PANEL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ADMIN GAMES LIST â€” Ğ´ĞµÑ‚Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ¸ Ğ¸Ğ³Ñ€
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function AdminGamesList({games,me,endGame,toggleGameAdult}){
  const[expanded,setExpanded]=React.useState({});
  const toggle=id=>setExpanded(p=>({...p,[id]:!p[id]}));
  const sorted=Object.values(games).sort((a,b)=>(b.createdAt||0)-(a.createdAt||0));

  const phaseColor=ph=>ph==='finished'?'var(--tx3)':ph==='voting'?'var(--r)':ph==='playing'?'var(--g)':'var(--c)';
  const phaseLabel=ph=>ph==='finished'?'Ğ—Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ°':ph==='voting'?'Ğ“Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ğ°Ğ½Ğ¸Ğµ':ph==='playing'?'Ğ˜Ğ´Ñ‘Ñ‚ Ğ¸Ğ³Ñ€Ğ°':'Ğ›Ğ¾Ğ±Ğ±Ğ¸';

  return(
    <div>
      {sorted.map(g=>{
        const players=Object.values(g.players||{});
        const alive=players.filter(p=>!p.isEliminated);
        const dead=players.filter(p=>p.isEliminated);
        const isOpen=expanded[g.id];
        return(
          <div key={g.id} style={{marginBottom:10,borderRadius:14,overflow:'hidden',border:'1px solid rgba(255,255,255,0.08)',background:'rgba(255,255,255,0.03)'}}>
            {/* Ğ¨Ğ°Ğ¿ĞºĞ° ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ¸ */}
            <div onClick={()=>toggle(g.id)} style={{display:'flex',alignItems:'center',gap:10,padding:'12px 14px',cursor:'pointer',userSelect:'none'}}>
              <div style={{flex:1,minWidth:0}}>
                <div style={{display:'flex',alignItems:'center',gap:8,marginBottom:4,flexWrap:'wrap'}}>
                  <span style={{fontWeight:700,fontSize:15,color:'var(--a)',letterSpacing:1,fontFamily:'Inter,sans-serif'}}>{g.id}</span>
                  <span style={{fontSize:11,color:phaseColor(g.phase),background:`${phaseColor(g.phase)}18`,borderRadius:6,padding:'2px 8px',fontWeight:600}}>{phaseLabel(g.phase)}</span>
                  {g.adultMode&&<span style={{fontSize:10,color:'var(--r)',background:'rgba(255,69,58,0.12)',borderRadius:6,padding:'2px 7px',fontWeight:600}}>18+</span>}
                </div>
                <div style={{fontSize:11,color:'var(--tx2)'}}>
                  {g.apocalypse?.emoji} {g.apocalypse?.name} Â· Ğ Ğ°ÑƒĞ½Ğ´ {g.round||1} Â· ğŸ‘¥ {players.length} Ğ¸Ğ³Ñ€Ğ¾ĞºĞ¾Ğ²
                </div>
              </div>
              <div style={{display:'flex',gap:6,alignItems:'center'}}>
                {g.phase==='lobby'&&<button onClick={e=>{e.stopPropagation();toggleGameAdult(g.id,!g.adultMode);}} style={{background:g.adultMode?'rgba(255,69,58,0.15)':'rgba(255,255,255,0.07)',border:'none',color:g.adultMode?'var(--r)':'var(--tx2)',borderRadius:8,fontSize:11,padding:'5px 10px',cursor:'pointer',fontWeight:600}}>ğŸ” {g.adultMode?'Ğ’ĞºĞ»':'Ğ’Ñ‹ĞºĞ»'}</button>}
                {g.phase!=='finished'&&<button onClick={e=>{e.stopPropagation();endGame(g.id);}} style={{background:'rgba(255,69,58,0.15)',border:'none',color:'var(--r)',borderRadius:8,fontSize:11,padding:'5px 10px',cursor:'pointer',fontWeight:600}}>â–  Ğ¡Ñ‚Ğ¾Ğ¿</button>}
                <span style={{color:'var(--tx3)',fontSize:16,transition:'transform .2s',display:'inline-block',transform:isOpen?'rotate(180deg)':'rotate(0deg)'}}>âŒ„</span>
              </div>
            </div>

            {/* Ğ Ğ°Ğ·Ğ²Ñ‘Ñ€Ğ½ÑƒÑ‚Ñ‹Ğ¹ Ğ±Ğ»Ğ¾Ğº Ñ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ°Ğ¼Ğ¸ */}
            {isOpen&&(
              <div style={{borderTop:'1px solid rgba(255,255,255,0.06)',padding:'12px 14px',animation:'fadeUp .15s ease'}}>
                {/* Ğ–Ğ¸Ğ²Ñ‹Ğµ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ¸ */}
                {alive.length>0&&(
                  <div style={{marginBottom:10}}>
                    <div style={{fontSize:10,color:'var(--g)',fontWeight:600,letterSpacing:1,marginBottom:8,textTransform:'uppercase'}}>âœ… Ğ’ Ğ¶Ğ¸Ğ²Ñ‹Ñ… ({alive.length})</div>
                    <div style={{display:'grid',gridTemplateColumns:'1fr 1fr',gap:6}}>
                      {alive.map(p=>{
                        const cards=p.cards||{};
                        const revealed=p.revealed||[];
                        return(
                          <div key={p.username} style={{background:'rgba(48,209,88,0.05)',border:'1px solid rgba(48,209,88,0.15)',borderRadius:10,padding:'10px 12px'}}>
                            <div style={{fontWeight:700,fontSize:13,marginBottom:4,color:'var(--tx)'}}>{p.name||p.username}</div>
                            <div style={{fontSize:10,color:'var(--tx3)',marginBottom:6}}>@{p.username}{g.creatorId===p.username?' ğŸ‘‘':''}</div>
                            {cards.profession&&<div style={{fontSize:11,color:'var(--tx2)',marginBottom:2}}>ğŸ’¼ {cards.profession}{revealed.includes('profession')?' âœ“':' ğŸ”’'}</div>}
                            {cards.health&&<div style={{fontSize:11,color:'var(--tx2)',marginBottom:2}}>{cards.health[0]} {cards.health[1]}{revealed.includes('health')?' âœ“':' ğŸ”’'}</div>}
                            {cards.hobby&&<div style={{fontSize:11,color:'var(--tx2)',marginBottom:2}}>ğŸ¯ {cards.hobby}{revealed.includes('hobby')?' âœ“':' ğŸ”’'}</div>}
                            {cards.baggage&&<div style={{fontSize:11,color:'var(--tx2)',marginBottom:2}}>ğŸ’ {cards.baggage}{revealed.includes('baggage')?' âœ“':' ğŸ”’'}</div>}
                            {cards.fact&&<div style={{fontSize:11,color:'var(--tx2)',marginBottom:2}}>ğŸ“Œ {cards.fact}{revealed.includes('fact')?' âœ“':' ğŸ”’'}</div>}
                            {cards.phobia&&<div style={{fontSize:11,color:'var(--tx2)',marginBottom:2}}>ğŸ˜± {cards.phobia}{revealed.includes('phobia')?' âœ“':' ğŸ”’'}</div>}
                            <div style={{fontSize:9,color:'var(--tx3)',marginTop:4}}>Ğ Ğ°ÑĞºÑ€Ñ‹Ñ‚Ğ¾: {revealed.length} ĞºĞ°Ñ€Ñ‚</div>
                          </div>
                        );
                      })}
                    </div>
                  </div>
                )}
                {/* Ğ’Ñ‹Ğ±Ñ‹Ğ²ÑˆĞ¸Ğµ */}
                {dead.length>0&&(
                  <div>
                    <div style={{fontSize:10,color:'var(--r)',fontWeight:600,letterSpacing:1,marginBottom:8,textTransform:'uppercase'}}>â˜ ï¸ Ğ’Ñ‹Ğ±Ñ‹Ğ»Ğ¸ ({dead.length})</div>
                    <div style={{display:'flex',flexDirection:'column',gap:4}}>
                      {dead.map(p=>(
                        <div key={p.username} style={{background:'rgba(255,69,58,0.05)',border:'1px solid rgba(255,69,58,0.12)',borderRadius:8,padding:'8px 12px',display:'flex',alignItems:'center',gap:8,opacity:0.7}}>
                          <span style={{fontSize:12}}>â˜ ï¸</span>
                          <div>
                            <div style={{fontWeight:600,fontSize:12,color:'var(--tx2)'}}>{p.name||p.username}</div>
                            <div style={{fontSize:10,color:'var(--tx3)'}}>@{p.username}</div>
                          </div>
                        </div>
                      ))}
                    </div>
                  </div>
                )}
                {players.length===0&&<div style={{textAlign:'center',color:'var(--tx3)',fontSize:12,padding:'12px 0'}}>ĞĞµÑ‚ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ¾Ğ²</div>}
              </div>
            )}
          </div>
        );
      })}
    </div>
  );
}

function AdminScreen({me,onBack,toast}){
  const[tab,setTab]=useState('users');
  const[users,setU]=useState({});
  const[games,setG]=useState({});
  const[settings,setS]=useState({});
  const[loading,setL]=useState(true);

  const load=async()=>{const[u,g,s]=await Promise.all([DB.getAllUsers(),DB.getAllGames(),DB.getSettings()]);setU(u);setG(g);setS(s);setL(false);};
  useEffect(()=>{load();},[]);

  const setRank=async(uname,rid)=>{
    const u=users[uname];const patch={customRank:rid||null};
    if(rid==='supreme')patch.isAdmin=true;
    else if(u.customRank==='supreme'&&rid!=='supreme')patch.isAdmin=false;
    await DB.updateUser(uname,patch);setU(p=>({...p,[uname]:{...p[uname],...patch}}));toast('âœ… Ğ—Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¾!','ok');
  };
  const toggleAdmin=async(uname)=>{
    if(uname===me.username)return toast('ĞĞµĞ»ÑŒĞ·Ñ ÑĞ½ÑÑ‚ÑŒ Ñ ÑĞµĞ±Ñ','err');
    const u=users[uname];const na=!u.isAdmin;
    const patch={isAdmin:na,customRank:na?'supreme':(u.customRank==='supreme'?null:u.customRank)};
    await DB.updateUser(uname,patch);setU(p=>({...p,[uname]:{...p[uname],...patch}}));
    toast(na?'âœ… ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½ Ğ°Ğ´Ğ¼Ğ¸Ğ½Ğ¾Ğ¼':'âœ… ĞŸÑ€Ğ°Ğ²Ğ° ÑĞ½ÑÑ‚Ñ‹','ok');
  };
  const delUser=async(uname)=>{
    if(uname===me.username)return toast('ĞĞµĞ»ÑŒĞ·Ñ ÑƒĞ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ ÑĞµĞ±Ñ','err');
    if(!confirm(`Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ @${uname}?`))return;
    await DB.deleteUser(uname);setU(p=>{const n={...p};delete n[uname];return n;});toast('âœ… Ğ£Ğ´Ğ°Ğ»Ñ‘Ğ½','ok');
  };
  const endGame=async(gid)=>{await DB.updateGame(gid,{phase:'finished'});setG(p=>({...p,[gid]:{...p[gid],phase:'finished'}}));toast('âœ… Ğ˜Ğ³Ñ€Ğ° Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ°','ok');};
  const toggleGameAdult=async(gid,val)=>{await DB.updateGame(gid,{adultMode:val});setG(p=>({...p,[gid]:{...p[gid],adultMode:val}}));toast(val?'ğŸ” 18+ Ğ²ĞºĞ»ÑÑ‡Ñ‘Ğ½':'âœ… 18+ Ğ²Ñ‹ĞºĞ»ÑÑ‡ĞµĞ½','ok');};
  const toggleGlobal=async()=>{
    const nv=!settings.adultMode;await DB.updateSettings({adultMode:nv});setS(p=>({...p,adultMode:nv}));
    toast(nv?'ğŸ” 18+ Ğ²ĞºĞ»ÑÑ‡Ñ‘Ğ½ â€” Ğ²ÑĞµ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ¸ Ğ¼Ğ¾Ğ³ÑƒÑ‚ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ':'âœ… 18+ Ğ²Ñ‹ĞºĞ»ÑÑ‡ĞµĞ½ Ğ³Ğ»Ğ¾Ğ±Ğ°Ğ»ÑŒĞ½Ğ¾','ok');
  };
  const active=Object.values(games).filter(g=>g.phase!=='finished');

  return(
    <div className="sc">
      <HZ/>
      <div className="tb"><BackBtn onClick={onBack}/><div className="tb-title" style={{color:'var(--p)'}}>ğŸ” ĞĞ”ĞœĞ˜ĞĞ˜Ğ¡Ğ¢Ğ ĞĞ¢ĞĞ </div></div>
      <div className="scr-raw">
        <div style={{display:'grid',gridTemplateColumns:'1fr 1fr 1fr',gap:8,marginBottom:14}}>
          {[[Object.keys(users).length,'Ğ˜Ğ“Ğ ĞĞšĞ˜','var(--a)'],[active.length,'ĞĞšĞ¢Ğ˜Ğ’ĞĞ«Ğ•','var(--g)'],[Object.keys(games).length,'Ğ’Ğ¡Ğ•Ğ“Ğ','var(--tx3)']].map(([v,l,c])=>(
            <div key={l} className="stat-box"><div className="sv" style={{fontSize:26,color:c}}>{v}</div><div className="sl">{l}</div></div>
          ))}
        </div>
        <div className="tabs">
          <button className={`tab${tab==='users'?' on':''}`} onClick={()=>setTab('users')}>Ğ˜Ğ“Ğ ĞĞšĞ˜</button>
          <button className={`tab${tab==='games'?' on':''}`} onClick={()=>setTab('games')}>Ğ˜Ğ“Ğ Ğ«</button>
          <button className={`tab${tab==='settings'?' on':''}`} onClick={()=>setTab('settings')}>ĞĞĞ¡Ğ¢Ğ ĞĞ™ĞšĞ˜</button>
        </div>
        {loading?<Spin/>:tab==='settings'?(
          <div>
            <div className="lbl">ĞšĞĞĞ¢Ğ•ĞĞ¢</div>
            <Tog on={!!settings.adultMode} onToggle={toggleGlobal}
              label="ğŸ” Ğ’Ğ—Ğ ĞĞ¡Ğ›Ğ«Ğ™ Ğ Ğ•Ğ–Ğ˜Ğœ 18+ (Ğ“Ğ›ĞĞ‘ĞĞ›Ğ¬ĞĞ)"
              sub={settings.adultMode?"Ğ’ĞšĞ› â€” Ğ²ÑĞµ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ¸ Ğ²Ğ¸Ğ´ÑÑ‚ Ğ¿ĞµÑ€ĞµĞºĞ»ÑÑ‡Ğ°Ñ‚ĞµĞ»ÑŒ 18+":"Ğ’Ğ«ĞšĞ› â€” 18+ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ°Ğ´Ğ¼Ğ¸Ğ½Ğ¸ÑÑ‚Ñ€Ğ°Ñ‚Ğ¾Ñ€Ğ°Ğ¼"}
              dng/>
            <div className="mono" style={{fontSize:9,color:'var(--tx3)',letterSpacing:1,padding:'8px 14px',background:'var(--s1)',border:'1px solid var(--ab)',lineHeight:1.6}}>
              ĞŸÑ€Ğ¸ Ğ²ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğ¸ â€” Ğ¿ĞµÑ€ĞµĞºĞ»ÑÑ‡Ğ°Ñ‚ĞµĞ»ÑŒ 18+ Ğ¿Ğ¾ÑĞ²Ğ»ÑĞµÑ‚ÑÑ Ñƒ Ğ²ÑĞµÑ… Ğ¸Ğ³Ñ€Ğ¾ĞºĞ¾Ğ² Ğ¿Ñ€Ğ¸ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğ¸ Ğ¸Ğ³Ñ€Ñ‹.
            </div>
          </div>
        ):tab==='users'?Object.values(users).map(u=>(
          <div key={u.username} className="adm-row">
            <div style={{flex:'1 1 130px',minWidth:0}}>
              <div style={{display:'flex',alignItems:'center',gap:6,marginBottom:4,flexWrap:'wrap'}}>
                <span style={{fontWeight:700,fontSize:14}}>{u.displayName||u.username}</span>
                {u.isAdmin&&<span className="bdg bdg-p" style={{fontSize:7}}>ADMIN</span>}
                {u.username===me.username&&<span className="bdg bdg-c" style={{fontSize:7}}>Ğ’Ğ«</span>}
              </div>
              <div className="mono" style={{fontSize:8,color:'var(--tx3)'}}>@{u.username} Â· {u.gamesPlayed||0} Ğ¸Ğ³Ñ€</div>
              <div style={{marginTop:4}}><RChip user={u}/></div>
            </div>
            <div style={{display:'flex',gap:6,flexWrap:'wrap',alignItems:'center'}}>
              <select className="sel" style={{width:'auto',padding:'4px 8px',fontSize:11,marginBottom:0}} value={u.customRank||'auto'} onChange={e=>setRank(u.username,e.target.value==='auto'?null:e.target.value)}>
                <option value="auto">ĞĞ²Ñ‚Ğ¾</option>
                {RANKS.map(r=><option key={r.id} value={r.id}>{r.icon} {r.name}</option>)}
              </select>
              {u.username!==me.username&&<>
                <button onClick={()=>toggleAdmin(u.username)} style={{background:u.isAdmin?'var(--rt)':'rgba(155,89,239,.1)',border:`1px solid ${u.isAdmin?'var(--r)':'rgba(155,89,239,.4)'}`,color:u.isAdmin?'var(--r)':'var(--p)',fontFamily:"'Inter',sans-serif",fontSize:9,padding:'4px 8px',cursor:'pointer',letterSpacing:1}}>
                  {u.isAdmin?'Ğ¡ĞĞ¯Ğ¢Ğ¬':'ADMIN'}
                </button>
                <button onClick={()=>delUser(u.username)} style={{background:'var(--rt)',border:'1px solid var(--rb)',color:'var(--r)',fontFamily:"'Inter',sans-serif",fontSize:11,padding:'4px 8px',cursor:'pointer'}}>âœ•</button>
              </>}
            </div>
          </div>
        )):Object.values(games).length===0?(
          <div style={{textAlign:'center',padding:28,color:'var(--tx3)',fontSize:13}}>ĞĞµÑ‚ Ğ¸Ğ³Ñ€</div>
        ):<AdminGamesList games={games} me={me} endGame={endGame} toggleGameAdult={toggleGameAdult}/>}
      </div>
    </div>
  );
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CREATE GAME
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function CreateGameScreen({user,onBack,onCreated,toast}){
  const[sel,setSel]=useState(null);
  const[adult,setAdult]=useState(false);
  const[globalAdult,setGA]=useState(false);
  const[loading,setL]=useState(false);
  const[maxRev,setMaxRev]=useState(2);
  const[autoVote,setAutoVote]=useState(false);
  const[matchmaking,setMatchmaking]=useState(false);
  const[debatesOn,setDebates]=useState(false);
  const[voteHistoryOn,setVoteHistory]=useState(false);
  const[rolesOn,setRoles]=useState(false);
  const[radioOn,setRadio]=useState(false);
  const[bunkerMapOn,setBunkerMap]=useState(false);

  useEffect(()=>{
    DB.getSettings().then(s=>{if(s.adultMode)setGA(true);});
  },[]);

  const canAdult=user.isAdmin||globalAdult;

  const create=async()=>{
    if(!sel)return toast('Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ ÑÑ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¹','err');
    setL(true);
    const gid=genCode();
    const ap=sel==='random'?rnd(APOC):APOC.find(a=>a.id===sel);
    await DB.setGame(gid,{
      id:gid,creatorId:user.username,adultMode:adult,apocalypse:ap,
      phase:'lobby',round:1,bunkerSpots:1,
      maxReveals:maxRev,autoVote,matchmaking,
      debates:debatesOn,voteHistory:voteHistoryOn,roles:rolesOn,radio:radioOn,bunkerMap:bunkerMapOn,
      players:{[user.username]:{userId:user.username,username:user.username,name:user.displayName||user.username,cards:null,revealed:[],isEliminated:false}},
      votes:{},revealedThisRound:{},eliminated:[],lastEliminated:null,createdAt:Date.now(),
    });
    setL(false);onCreated(gid);
  };

  return(
    <div className="sc">
      <HZ/>
      <div className="tb"><BackBtn onClick={onBack}/><div className="tb-title">ĞĞĞ’ĞĞ¯ Ğ˜Ğ“Ğ Ğ</div></div>
      <div className="scr-raw" style={{paddingBottom:90}}>
        <div className="lbl">Ğ¡Ğ¦Ğ•ĞĞĞ Ğ˜Ğ™ ĞĞŸĞĞšĞĞ›Ğ˜ĞŸĞ¡Ğ˜Ğ¡Ğ</div>
        <div className={`ap-opt${sel==='random'?' on':''}`} onClick={()=>setSel('random')}>
          <span style={{fontSize:30}}>ğŸ²</span>
          <div>
            <div style={{fontFamily:"'Inter',sans-serif",fontSize:18,letterSpacing:2}}>Ğ¡Ğ›Ğ£Ğ§ĞĞ™ĞĞ«Ğ™</div>
            <div style={{fontSize:11,color:'var(--tx3)'}}>Ğ¡ÑƒĞ´ÑŒĞ±Ğ° Ñ€ĞµÑˆĞ¸Ñ‚ Ğ·Ğ° Ğ²Ğ°Ñ</div>
          </div>
        </div>
        {APOC.map(ap=>(
          <div key={ap.id} className={`ap-opt${sel===ap.id?' on':''}`} onClick={()=>setSel(ap.id)}>
            <span style={{fontSize:30}}>{ap.emoji}</span>
            <div style={{flex:1}}>
              <div style={{fontFamily:"'Inter',sans-serif",fontSize:18,letterSpacing:2,color:sel===ap.id?'var(--a)':'var(--tx)'}}>{ap.name}</div>
              <div style={{fontSize:11,color:'var(--tx3)',lineHeight:1.4,marginTop:2}}>{ap.description.slice(0,80)}â€¦</div>
              <div style={{fontSize:10,color:'var(--a)',marginTop:4}}>ğŸ¯ {ap.victory}</div>
            </div>
          </div>
        ))}
        {canAdult&&(
          <>
            <div className="lbl">{!user.isAdmin&&<span style={{color:'var(--tx3)',fontSize:8}}>(Ñ€Ğ°Ğ·Ñ€ĞµÑˆĞµĞ½Ğ¾ Ğ°Ğ´Ğ¼Ğ¸Ğ½Ğ¸ÑÑ‚Ñ€Ğ°Ñ‚Ğ¾Ñ€Ğ¾Ğ¼)</span>}</div>
            <Tog on={adult} onToggle={()=>setAdult(!adult)} label="ğŸ” Ğ’Ğ—Ğ ĞĞ¡Ğ›Ğ«Ğ™ Ğ Ğ•Ğ–Ğ˜Ğœ (18+)" sub="Ğ¡Ğ¿ĞµÑ†Ğ¸Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ ĞºĞ°Ñ€Ñ‚Ñ‹ Ğ´Ğ»Ñ Ğ²Ğ·Ñ€Ğ¾ÑĞ»Ğ¾Ğ¹ ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸" dng/>
          </>
        )}
        <div className="lbl">ĞĞĞ¡Ğ¢Ğ ĞĞ™ĞšĞ˜ Ğ ĞĞ£ĞĞ”Ğ</div>
        <div style={{background:'rgba(255,255,255,0.04)',border:'1px solid rgba(255,255,255,0.08)',borderRadius:'var(--rad)',padding:16,marginBottom:10}}>
          <div style={{fontSize:13,fontWeight:600,color:'var(--tx)',marginBottom:10}}>ğŸƒ ĞšĞ°Ñ€Ñ‚ Ğ´Ğ»Ñ Ñ€Ğ°ÑĞºÑ€Ñ‹Ñ‚Ğ¸Ñ Ğ·Ğ° Ñ€Ğ°ÑƒĞ½Ğ´</div>
          <div style={{display:'flex',gap:8}}>
            {[1,2,3,4].map(n=>(
              <button key={n} onClick={()=>setMaxRev(n)} style={{flex:1,padding:'11px 0',borderRadius:'var(--rad-sm)',border:'none',background:maxRev===n?'var(--a)':'rgba(255,255,255,0.08)',color:maxRev===n?'#000':'var(--tx)',fontFamily:"'Inter',sans-serif",fontSize:17,fontWeight:700,cursor:'pointer',transition:'.15s'}}>
                {n}
              </button>
            ))}
          </div>
          <div style={{fontSize:11,color:'var(--tx3)',marginTop:8}}>Ğ¡ĞºĞ¾Ğ»ÑŒĞºĞ¾ ĞºĞ°Ñ€Ñ‚ ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ¸Ğ³Ñ€Ğ¾Ğº Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚ÑŒ Ğ·Ğ° Ñ€Ğ°ÑƒĞ½Ğ´</div>
        </div>
        <Tog on={autoVote} onToggle={()=>setAutoVote(v=>!v)} label="ğŸ—³ ĞĞ²Ñ‚Ğ¾Ğ³Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ğ°Ğ½Ğ¸Ğµ" sub="Ğ“Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ½Ğ°Ñ‡Ğ½Ñ‘Ñ‚ÑÑ ÑĞ°Ğ¼Ğ¾, ĞºĞ°Ğº Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ²ÑĞµ Ğ²Ñ‹Ğ»Ğ¾Ğ¶Ğ°Ñ‚ ĞºĞ°Ñ€Ñ‚Ñ‹ Ğ·Ğ° Ñ€Ğ°ÑƒĞ½Ğ´"/>
        <div className="lbl">ĞŸĞĞ”Ğ‘ĞĞ  Ğ˜Ğ“Ğ ĞĞšĞĞ’</div>
        <Tog on={matchmaking} onToggle={()=>setMatchmaking(v=>!v)} label="ğŸ” ĞÑ‚ĞºÑ€Ñ‹Ñ‚Ñ‹Ğ¹ Ğ¿Ğ¾Ğ´Ğ±Ğ¾Ñ€" sub="Ğ˜Ğ³Ñ€Ñƒ ÑƒĞ²Ğ¸Ğ´ÑÑ‚ Ğ²ÑĞµ â€” Ğ»ÑĞ±Ğ¾Ğ¹ ÑĞ¼Ğ¾Ğ¶ĞµÑ‚ Ğ¿Ñ€Ğ¸ÑĞ¾ĞµĞ´Ğ¸Ğ½Ğ¸Ñ‚ÑŒÑÑ Ñ Ğ³Ğ»Ğ°Ğ²Ğ½Ğ¾Ğ³Ğ¾ ÑĞºÑ€Ğ°Ğ½Ğ°"/>
        <div className="lbl">âš™ï¸ Ğ”ĞĞŸĞĞ›ĞĞ˜Ğ¢Ğ•Ğ›Ğ¬ĞĞ«Ğ• ĞœĞ•Ğ¥ĞĞĞ˜ĞšĞ˜</div>
        <Tog on={debatesOn} onToggle={()=>setDebates(v=>!v)} label="ğŸ¤ Ğ”ĞµĞ±Ğ°Ñ‚Ñ‹" sub="ĞŸĞµÑ€ĞµĞ´ Ğ³Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ğ°Ğ½Ğ¸ĞµĞ¼ â€” Ñ‚Ğ°Ğ¹Ğ¼ĞµÑ€ 60 ÑĞµĞº Ğ´Ğ»Ñ Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ğ½Ğ¾Ğ¹ Ñ€ĞµÑ‡Ğ¸ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾"/>
        <Tog on={voteHistoryOn} onToggle={()=>setVoteHistory(v=>!v)} label="ğŸ“Š Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ğ³Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ğ°Ğ½Ğ¸Ğ¹" sub="ĞŸĞ¾ÑĞ»Ğµ Ñ€Ğ°ÑƒĞ½Ğ´Ğ° Ğ²ÑĞµ Ğ²Ğ¸Ğ´ÑÑ‚ ĞºÑ‚Ğ¾ Ğ·Ğ° ĞºĞ¾Ğ³Ğ¾ Ğ³Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ğ°Ğ»"/>
        <Tog on={rolesOn} onToggle={()=>setRoles(v=>!v)} label="ğŸ­ Ğ Ğ¾Ğ»Ğ¸" sub="Ğ›Ğ¸Ğ´ĞµÑ€, Ğ¡Ğ°Ğ±Ğ¾Ñ‚Ğ°Ğ¶Ğ½Ğ¸Ğº, ĞœĞµĞ´Ğ¸Ğº â€” ÑĞºÑ€Ñ‹Ñ‚Ñ‹Ğµ Ñ€Ğ¾Ğ»Ğ¸ Ñ€Ğ°ÑĞºÑ€Ñ‹Ğ²Ğ°ÑÑ‚ÑÑ Ğ² Ñ„Ğ¸Ğ½Ğ°Ğ»Ğµ"/>
        <Tog on={radioOn} onToggle={()=>setRadio(v=>!v)} label="ğŸ“¡ Ğ Ğ°Ğ´Ğ¸Ğ¾Ğ¿ĞµÑ€ĞµĞ³Ğ¾Ğ²Ğ¾Ñ€Ñ‹" sub="ĞŸÑ€Ğ¸Ğ²Ğ°Ñ‚Ğ½Ñ‹Ğ¹ Ñ‡Ğ°Ñ‚ Ğ¼ĞµĞ¶Ğ´Ñƒ Ğ»ÑĞ±Ñ‹Ğ¼Ğ¸ Ğ´Ğ²ÑƒĞ¼Ñ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ°Ğ¼Ğ¸ Ğ²Ğ¾ Ğ²Ñ€ĞµĞ¼Ñ Ñ€Ğ°ÑƒĞ½Ğ´Ğ°"/>
        <Tog on={bunkerMapOn} onToggle={()=>setBunkerMap(v=>!v)} label="ğŸ—ºï¸ ĞšĞ°Ñ€Ñ‚Ğ° Ğ±ÑƒĞ½ĞºĞµÑ€Ğ°" sub="ĞšĞ¾Ğ¼Ğ½Ğ°Ñ‚Ñ‹ Ğ±ÑƒĞ½ĞºĞµÑ€Ğ° Ğ´Ğ°ÑÑ‚ Ğ±Ğ¾Ğ½ÑƒÑÑ‹ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ°Ğ¼ Ñ Ğ¿Ğ¾Ğ´Ñ…Ğ¾Ğ´ÑÑ‰ĞµĞ¹ Ğ¿Ñ€Ğ¾Ñ„ĞµÑÑĞ¸ĞµĞ¹"/>
      </div>
      <div className="fixbot" style={{bottom:0}}>
        <Btn ch={loading?'â³ Ğ¡ĞĞ—Ğ”ĞĞĞ˜Ğ•â€¦':'â˜¢ Ğ¡ĞĞ—Ğ”ĞĞ¢Ğ¬ Ğ˜Ğ“Ğ Ğ£'} onClick={create} disabled={loading||!sel}/>
      </div>
    </div>
  );
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   JOIN GAME
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MATCHMAKING SCREEN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function MatchmakingScreen({user,onBack,onJoined,toast}){
  const[games,setGames]=useState({});
  const[joining,setJoining]=useState(null);

  useEffect(()=>{
    const ref=db.ref('games');
    const handler=ref.on('value',snap=>{
      const all=snap.val()||{};
      // ĞŸĞ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµĞ¼ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ lobby-Ğ¸Ğ³Ñ€Ñ‹ Ñ matchmaking=true, Ğ³Ğ´Ğµ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ° ĞµÑ‰Ñ‘ Ğ½ĞµÑ‚
      const open={};
      Object.values(all).forEach(g=>{
        if(g.phase==='lobby'&&g.matchmaking&&!g.players?.[user.username])
          open[g.id]=g;
      });
      setGames(open);
    });
    return()=>ref.off('value',handler);
  },[]);

  const join=async(gid)=>{
    if(joining)return;
    setJoining(gid);
    const g=await DB.getGame(gid);
    if(!g||g.phase!=='lobby'){toast('Ğ˜Ğ³Ñ€Ğ° ÑƒĞ¶Ğµ Ğ½Ğ°Ñ‡Ğ°Ğ»Ğ°ÑÑŒ','err');setJoining(null);return;}
    if(g.players?.[user.username]){onJoined(gid);return;}
    await DB.updateGame(gid,{[`players/${user.username}`]:{userId:user.username,username:user.username,name:user.displayName||user.username,cards:null,revealed:[],isEliminated:false}});
    setJoining(null);
    onJoined(gid);
  };

  const list=Object.values(games).sort((a,b)=>(b.createdAt||0)-(a.createdAt||0));

  return(
    <div className="sc">
      <HZ/>
      <div className="tb"><BackBtn onClick={onBack}/><div className="tb-title">ĞŸĞĞ”Ğ‘ĞĞ  Ğ˜Ğ“Ğ ĞĞšĞĞ’</div><div style={{fontSize:11,color:'var(--tx3)',fontWeight:500}}>{list.length} Ğ¸Ğ³Ñ€</div></div>
      <div className="scr" style={{paddingBottom:20}}>
        {list.length===0?(
          <div style={{textAlign:'center',padding:'60px 20px'}}>
            <div style={{fontSize:48,marginBottom:16}}>ğŸ”</div>
            <div style={{fontSize:17,fontWeight:600,color:'var(--tx)',marginBottom:8}}>ĞĞµÑ‚ Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚Ñ‹Ñ… Ğ¸Ğ³Ñ€</div>
            <div style={{fontSize:13,color:'var(--tx3)',lineHeight:1.6}}>Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹Ñ‚Ğµ Ğ¸Ğ³Ñ€Ñƒ Ñ Ñ€ĞµĞ¶Ğ¸Ğ¼Ğ¾Ğ¼ Â«ĞÑ‚ĞºÑ€Ñ‹Ñ‚Ñ‹Ğ¹ Ğ¿Ğ¾Ğ´Ğ±Ğ¾Ñ€Â», Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ»ÑĞ±Ğ¾Ğ¹ Ğ¼Ğ¾Ğ³ Ğ¿Ñ€Ğ¸ÑĞ¾ĞµĞ´Ğ¸Ğ½Ğ¸Ñ‚ÑŒÑÑ</div>
            <div style={{marginTop:24}}><Btn ch="â˜¢ Ğ¡ĞĞ—Ğ”ĞĞ¢Ğ¬ Ğ˜Ğ“Ğ Ğ£" onClick={()=>onBack()} cls="btn-p" sm/></div>
          </div>
        ):list.map(g=>{
          const players=Object.values(g.players||{});
          const ap=g.apocalypse||{};
          const isJoining=joining===g.id;
          return(
            <div key={g.id} style={{background:'rgba(255,255,255,0.04)',border:'1px solid rgba(255,255,255,0.1)',borderRadius:'var(--rad)',padding:16,marginBottom:10}}>
              <div style={{display:'flex',alignItems:'center',gap:10,marginBottom:10}}>
                <span style={{fontSize:28}}>{ap.emoji||'â˜¢'}</span>
                <div style={{flex:1}}>
                  <div style={{fontSize:15,fontWeight:700,color:'var(--tx)'}}>{ap.name||'Ğ˜Ğ³Ñ€Ğ°'}</div>
                  <div style={{fontSize:11,color:'var(--tx3)',marginTop:2}}>Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ĞµĞ»ÑŒ: {g.creatorId} Â· {players.length} Ğ¸Ğ³Ñ€Ğ¾Ğº{players.length===1?'':'Ğ°'}</div>
                </div>
                {g.adultMode&&<span style={{fontSize:10,color:'var(--r)',background:'rgba(255,69,58,0.12)',borderRadius:6,padding:'2px 8px',fontWeight:700}}>18+</span>}
              </div>
              <div style={{display:'flex',gap:6,alignItems:'center',marginBottom:12,flexWrap:'wrap'}}>
                <span style={{fontSize:11,color:'var(--tx3)'}}>ğŸƒ {g.maxReveals||2} ĞºĞ°Ñ€Ñ‚Ñ‹/Ñ€Ğ°ÑƒĞ½Ğ´</span>
                {g.autoVote&&<span style={{fontSize:11,color:'var(--g)',background:'rgba(48,209,88,0.1)',borderRadius:6,padding:'2px 8px',fontWeight:600}}>ğŸ—³ ĞĞ²Ñ‚Ğ¾-Ğ³Ğ¾Ğ»Ğ¾Ñ</span>}
              </div>
              <div style={{display:'flex',gap:6,marginBottom:12,flexWrap:'wrap'}}>
                {players.slice(0,8).map(p=>(
                  <div key={p.username} style={{fontSize:11,color:'var(--tx2)',background:'rgba(255,255,255,0.07)',borderRadius:20,padding:'3px 10px'}}>{p.name}</div>
                ))}
                {players.length>8&&<div style={{fontSize:11,color:'var(--tx3)',padding:'3px 6px'}}>+{players.length-8}</div>}
              </div>
              <button onClick={()=>join(g.id)} disabled={!!isJoining} style={{width:'100%',padding:'12px',borderRadius:'var(--rad-sm)',border:'none',background:isJoining?'rgba(255,255,255,0.1)':'var(--a)',color:isJoining?'var(--tx3)':'#000',fontSize:14,fontWeight:700,cursor:isJoining?'not-allowed':'pointer',transition:'.2s',fontFamily:"'Inter',sans-serif"}}>
                {isJoining?'â³ Ğ’Ñ…Ğ¾Ğ¶Ñƒâ€¦':'âš¡ ĞŸĞ Ğ˜Ğ¡ĞĞ•Ğ”Ğ˜ĞĞ˜Ğ¢Ğ¬Ğ¡Ğ¯'}
              </button>
            </div>
          );
        })}
      </div>
    </div>
  );
}

function JoinGameScreen({user,onBack,onJoined,toast}){
  const[code,setC]=useState('');
  const[loading,setL]=useState(false);
  const join=async()=>{
    const c=code.trim().toUpperCase();
    if(c.length!==6)return toast('ĞšĞ¾Ğ´: Ñ€Ğ¾Ğ²Ğ½Ğ¾ 6 ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ¾Ğ²','err');
    setL(true);
    const game=await DB.getGame(c);
    if(!game){setL(false);return toast('Ğ˜Ğ³Ñ€Ğ° Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½Ğ°','err');}
    if(game.phase!=='lobby'){setL(false);return toast('Ğ˜Ğ³Ñ€Ğ° ÑƒĞ¶Ğµ Ğ½Ğ°Ñ‡Ğ°Ğ»Ğ°ÑÑŒ','err');}
    if(game.players?.[user.username]){setL(false);return onJoined(c);}
    if(Object.keys(game.players||{}).length>=16){setL(false);return toast('ĞšĞ¾Ğ¼Ğ½Ğ°Ñ‚Ğ° Ğ·Ğ°Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ°','err');}
    await DB.updateGame(c,{[`players/${user.username}`]:{userId:user.username,username:user.username,name:user.displayName||user.username,cards:null,revealed:[],isEliminated:false}});
    setL(false);onJoined(c);
  };
  return(
    <div className="sc">
      <HZ/>
      <div className="tb"><BackBtn onClick={onBack}/><div className="tb-title">Ğ’ĞĞ™Ğ¢Ğ˜ Ğ’ Ğ˜Ğ“Ğ Ğ£</div></div>
      <div style={{flex:1,display:'flex',flexDirection:'column',justifyContent:'center',padding:'0 20px',gap:20}}>
        <div style={{textAlign:'center'}}>
          <div style={{fontSize:52,marginBottom:8}}>ğŸ”‘</div>
          <div style={{fontFamily:"'Inter',sans-serif",fontSize:26,letterSpacing:4,color:'var(--a)'}}>ĞšĞĞ” ĞšĞĞœĞĞĞ¢Ğ«</div>
          <div className="mono" style={{fontSize:10,color:'var(--tx3)',letterSpacing:2,marginTop:4}}>Ğ’Ğ’Ğ•Ğ”Ğ˜Ğ¢Ğ• 6-Ğ¡Ğ˜ĞœĞ’ĞĞ›Ğ¬ĞĞ«Ğ™ ĞšĞĞ”</div>
        </div>
        <input className="inp" value={code} onChange={e=>setC(e.target.value.toUpperCase())} maxLength={6}
          placeholder="XXXXXX" style={{textAlign:'center',fontSize:30,letterSpacing:2,fontFamily:"'Inter',sans-serif",marginBottom:0}}
          onKeyDown={e=>e.key==='Enter'&&join()}/>
        <Btn ch={loading?'â³ ĞŸĞĞ˜Ğ¡Ğšâ€¦':'âš¡ Ğ’ĞĞ™Ğ¢Ğ˜ Ğ’ Ğ‘Ğ£ĞĞšĞ•Ğ '} onClick={join} disabled={loading||code.trim().length!==6}/>
      </div>
    </div>
  );
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LOBBY
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function LobbyScreen({gameId,user,onBack,onStarted,toast}){
  const[game,setGame]=useState(null);
  const[copied,setCop]=useState(false);
  const[showInv,setInv]=useState(false);
  const[friends,setFr]=useState({});
  const[allUsers,setAU]=useState({});
  const[sent,setSent]=useState({});

  useEffect(()=>{
    const unsub=DB.watchGame(gameId,g=>{if(!g)return;setGame(g);if(g.phase==='playing')onStarted();});
    return unsub;
  },[gameId]);

  /* FIX: load friends correctly */
  useEffect(()=>{
    if(!showInv)return;
    (async()=>{
      const[fs,au]=await Promise.all([db.ref(`friends/${user.username}`).once('value'),DB.getAllUsers()]);
      setFr(fs.val()||{});setAU(au);
    })();
  },[showInv]);

  const start=async()=>{
    const g=await DB.getGame(gameId);if(!g||g.phase!=='lobby')return;
    const pl=Object.values(g.players||{});
    if(pl.length<2)return toast('ĞÑƒĞ¶Ğ½Ğ¾ Ğ¼Ğ¸Ğ½Ğ¸Ğ¼ÑƒĞ¼ 2 Ğ¸Ğ³Ñ€Ğ¾ĞºĞ°','err');
    const settings=await DB.getSettings();
    const useAdult=!!(g.adultMode&&settings.adultMode);
    const up={};
    pl.forEach(p=>{up[p.username]={...p,cards:mkCards(useAdult),revealed:[],isEliminated:false};});
    // Ğ Ğ°Ğ·Ğ´Ğ°Ñ‡Ğ° Ñ€Ğ¾Ğ»ĞµĞ¹ ĞµÑĞ»Ğ¸ Ğ²ĞºĞ»ÑÑ‡ĞµĞ½Ğ¾
    if(g.roles){
      const rolePool=[...ROLES.filter(r=>r.id!=='civilian')];
      const shuffled=[...rolePool].sort(()=>Math.random()-.5);
      pl.forEach((p,i)=>{
        const role=shuffled[i]||{id:'civilian',icon:'ğŸ‘¤',name:'ĞĞ±Ñ‹Ñ‡Ğ½Ñ‹Ğ¹',color:'var(--tx3)',desc:'ĞĞ¸ĞºĞ°ĞºĞ¾Ğ¹ Ğ¾ÑĞ¾Ğ±Ğ¾Ğ¹ Ñ€Ğ¾Ğ»Ğ¸. Ğ’Ñ‹Ğ¶Ğ¸Ğ²Ğ¸ Ğ»ÑĞ±Ğ¾Ğ¹ Ñ†ĞµĞ½Ğ¾Ğ¹.'};
        up[p.username].role=role.id;
      });
    }
    // Ğ Ğ°Ğ·Ğ´Ğ°Ñ‡Ğ° ĞºĞ¾Ğ¼Ğ½Ğ°Ñ‚ Ğ±ÑƒĞ½ĞºĞµÑ€Ğ° ĞµÑĞ»Ğ¸ Ğ²ĞºĞ»ÑÑ‡ĞµĞ½Ğ¾ (Ñ…Ñ€Ğ°Ğ½Ğ¸Ğ¼ ĞĞ¢Ğ”Ğ•Ğ›Ğ¬ĞĞ Ğ¾Ñ‚ players!)
    let roomAssignData={};
    if(g.bunkerMap){
      const rooms=[...BUNKER_ROOMS].sort(()=>Math.random()-.5).slice(0,Math.min(BUNKER_ROOMS.length,pl.length));
      pl.forEach((p,i)=>{ roomAssignData[p.username]=rooms[i%rooms.length].id; });
    }
    const newGame={...g,players:up,bunkerSpots:Math.ceil(pl.length/2),phase:'playing',round:1,votes:{},revealedThisRound:{},eliminated:[],lastEliminated:null,chat:g.chat||null,voteLog:g.voteLog||{},roomAssign:roomAssignData};
    await DB.setGame(gameId,newGame);
    await Promise.all(pl.map(p=>DB.updateUser(p.username,{gamesPlayed:firebase.database.ServerValue.increment(1)})));
  };
  const leave=async()=>{
    if(!confirm('ĞŸĞ¾ĞºĞ¸Ğ½ÑƒÑ‚ÑŒ Ğ»Ğ¾Ğ±Ğ±Ğ¸?'))return;
    const g=await DB.getGame(gameId);if(!g)return onBack();
    const pl={...g.players};delete pl[user.username];
    if(!Object.keys(pl).length){await db.ref(`games/${gameId}`).remove();}
    else{
      const upd={[`players/${user.username}`]:null};
      if(g.creatorId===user.username)upd.creatorId=Object.keys(pl)[0];
      await DB.updateGame(gameId,upd);
    }
    onBack();
  };
  const copy=()=>{navigator.clipboard?.writeText(gameId).catch(()=>{});setCop(true);setTimeout(()=>setCop(false),2000);toast('ĞšĞ¾Ğ´ ÑĞºĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½!','ok');};
  const invite=async(fid)=>{
    if(sent[fid])return;
    if(game?.players?.[fid])return toast('Ğ£Ğ¶Ğµ Ğ² Ğ»Ğ¾Ğ±Ğ±Ğ¸','err');
    await DB.sendGameInvite(user.username,user.displayName||user.username,fid,gameId);
    setSent(p=>({...p,[fid]:true}));toast('ĞŸÑ€Ğ¸Ğ³Ğ»Ğ°ÑˆĞµĞ½Ğ¸Ğµ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¾!','ok');
  };

  if(!game)return<div className="sc"><Spin/></div>;
  const ap=game.apocalypse||{};
  const players=Object.values(game.players||{});
  const isCreator=game.creatorId===user.username;
  const fIds=Object.keys(friends);
  const fNotIn=fIds.filter(fid=>!game.players?.[fid]&&allUsers[fid]);

  return(
    <div className="sc">
      <HZ/>
      <div className="tb">
        <div className="led led-g"/>
        <div className="tb-title">Ğ›ĞĞ‘Ğ‘Ğ˜</div>
        <div className="mono" style={{fontSize:10,letterSpacing:2,color:'var(--tx3)'}}>{players.length}/16</div>
      </div>
      <div className="scr-raw" style={{paddingBottom:100}}>
        {game.adultMode&&<div style={{background:'var(--rt)',border:'1px solid var(--rb)',padding:'8px 12px',marginBottom:10,display:'flex',alignItems:'center',gap:8,fontFamily:"'Inter',sans-serif",fontSize:10,letterSpacing:2,color:'var(--r)'}}>ğŸ” Ğ’Ğ—Ğ ĞĞ¡Ğ›Ğ«Ğ™ Ğ Ğ•Ğ–Ğ˜Ğœ â€” 18+</div>}
        <div className="card" style={{marginBottom:12}}>
          <div style={{fontSize:36,marginBottom:6}}>{ap.emoji}</div>
          <div style={{fontFamily:"'Inter',sans-serif",fontSize:22,letterSpacing:2,color:'var(--a)'}}>{ap.name}</div>
          <div style={{fontSize:12,color:'var(--tx3)',lineHeight:1.5,marginTop:5}}>{ap.description}</div>
          <div style={{marginTop:10,padding:'8px 10px',background:'var(--at)',borderLeft:'2px solid var(--a)',fontSize:12,color:'var(--a2)'}}>ğŸ¯ {ap.victory}</div>
        </div>
        <div className="code-box" onClick={copy}>
          {gameId}
          <div className="mono" style={{fontSize:9,color:copied?'var(--g)':'var(--tx3)',letterSpacing:2,marginTop:4}}>{copied?'âœ“ Ğ¡ĞšĞĞŸĞ˜Ğ ĞĞ’ĞĞĞ':'ĞĞĞ–ĞœĞ˜Ğ¢Ğ• Ğ§Ğ¢ĞĞ‘Ğ« Ğ¡ĞšĞĞŸĞ˜Ğ ĞĞ’ĞĞ¢Ğ¬'}</div>
        </div>
        {isCreator&&<Btn ch="ğŸ‘¥ ĞŸĞ Ğ˜Ğ“Ğ›ĞĞ¡Ğ˜Ğ¢Ğ¬ Ğ”Ğ Ğ£Ğ—Ğ•Ğ™" onClick={()=>setInv(true)} cls="btn-c" sm style={{marginBottom:10}}/>}
        <div className="lbl">Ğ˜Ğ“Ğ ĞĞšĞ˜</div>
        {players.map(p=>{
          const isMe=p.username===user.username,isCr=p.username===game.creatorId;
          return(
            <div key={p.username} className={`prow${isMe?' me':''}`}>
              <div className={`led ${isCr?'led-a':'led-g'}`}/>
              <div style={{flex:1,fontSize:14,fontWeight:600}}>{p.name}</div>
              {isCr&&<span className="bdg bdg-a">Ğ¡ĞĞ—Ğ”ĞĞ¢Ğ•Ğ›Ğ¬</span>}
              {isMe&&<span className="bdg bdg-c">Ğ’Ğ«</span>}
            </div>
          );
        })}
      </div>
      <div className="fixbot">
        {isCreator
          ?<Btn ch={players.length<2?`âš¡ Ğ–Ğ”ĞĞœ (${players.length}/2)`:'âš¡ ĞĞĞ§ĞĞ¢Ğ¬ Ğ˜Ğ“Ğ Ğ£'} onClick={start} disabled={players.length<2}/>
          :<div className="mono" style={{textAlign:'center',fontSize:10,letterSpacing:2,color:'var(--tx3)',padding:'4px 0'}}>ĞĞ–Ğ˜Ğ”ĞĞĞ˜Ğ• Ğ¡ĞĞ—Ğ”ĞĞ¢Ğ•Ğ›Ğ¯â€¦</div>
        }
        <Btn ch="â†© ĞŸĞĞšĞ˜ĞĞ£Ğ¢Ğ¬ Ğ›ĞĞ‘Ğ‘Ğ˜" onClick={leave} cls="btn-g" sm/>
      </div>

      {showInv&&(
        <div className="modal-bg" onClick={e=>e.target===e.currentTarget&&setInv(false)}>
          <div className="modal-box">
            <div className="modal-hd">
              <span className="modal-ttl">ğŸ‘¥ ĞŸĞ Ğ˜Ğ“Ğ›ĞĞ¡Ğ˜Ğ¢Ğ¬ Ğ”Ğ Ğ£Ğ—Ğ•Ğ™</span>
              <button className="modal-cls" onClick={()=>setInv(false)}>âœ•</button>
            </div>
            <div className="modal-bd">
              {!Object.keys(allUsers).length?<Spin/>:fNotIn.length===0?(
                <div className="mono" style={{textAlign:'center',color:'var(--tx3)',fontSize:10,letterSpacing:2,padding:24}}>
                  {fIds.length===0?'ĞĞ•Ğ¢ Ğ”Ğ Ğ£Ğ—Ğ•Ğ™':'Ğ’Ğ¡Ğ• Ğ”Ğ Ğ£Ğ—Ğ¬Ğ¯ Ğ£Ğ–Ğ• Ğ’ Ğ›ĞĞ‘Ğ‘Ğ˜'}
                </div>
              ):fNotIn.map(fid=>{
                const fu=allUsers[fid];if(!fu)return null;
                return(
                  <div key={fid} className="fi">
                    <div style={{flex:1}}>
                      <div style={{fontSize:14,fontWeight:600}}>{fu.displayName||fu.username}</div>
                      <div className="mono" style={{fontSize:8,color:'var(--tx3)'}}>@{fu.username}</div>
                    </div>
                    <button onClick={()=>invite(fid)} style={{background:sent[fid]?'var(--gt)':'var(--at)',border:`1px solid ${sent[fid]?'var(--gb)':'var(--ab)'}`,color:sent[fid]?'var(--g)':'var(--a)',fontFamily:"'Inter',sans-serif",fontSize:10,padding:'6px 12px',cursor:sent[fid]?'default':'pointer',letterSpacing:1,transition:'.2s'}}>
                      {sent[fid]?'âœ“ ĞĞ¢ĞŸĞ ĞĞ’Ğ›Ğ•ĞĞ':'âš¡ ĞŸĞ Ğ˜Ğ“Ğ›ĞĞ¡Ğ˜Ğ¢Ğ¬'}
                    </button>
                  </div>
                );
              })}
            </div>
          </div>
        </div>
      )}
    </div>
  );
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   GAME WRAPPER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function GameWrapper({gameId,user,onExit,toast}){
  const[game,setGame]=useState(null);
  const[sub,setSub]=useState('round');
  const[selVote,setSelVote]=useState(undefined);
  const[showChat,setShowChat]=useState(false);
  const[unread,setUnread]=useState(0);
  const prevElim=useRef(0);
  const prevPhase=useRef(null);
  const tallying=useRef(false);
  const lastChat=useRef(0);

  useEffect(()=>{
    const unsub=DB.watchGame(gameId,async g=>{
      if(!g)return;
      if(g.phase==='voting'&&g.creatorId===user.username&&!tallying.current){
        const alive=Object.values(g.players||{}).filter(p=>!p.isEliminated);
        const voted=Object.keys(g.votes||{}).length;
        if(alive.length>0&&voted>=alive.length){
          tallying.current=true;
          try{
            const copy=JSON.parse(JSON.stringify(g));processVotes(copy);
            if(copy.phase==='finished'){
              const surv=Object.values(copy.players).filter(p=>!p.isEliminated).map(p=>p.username);
              const all=Object.keys(copy.players);
              await Promise.all([...surv.map(uid=>DB.updateUser(uid,{gamesWon:firebase.database.ServerValue.increment(1)})),...all.filter(u=>!surv.includes(u)).map(uid=>DB.updateUser(uid,{gamesEliminated:firebase.database.ServerValue.increment(1)}))]);
            }
            await DB.setGame(gameId,copy);
          }catch(e){console.error(e);}
          tallying.current=false;return;
        }
      }
      const el=(g.eliminated||[]).length;
      if(el>prevElim.current&&g.lastEliminated){prevElim.current=el;setSub('elim');}
      if(g.phase!==prevPhase.current){
        prevPhase.current=g.phase;
        if(g.phase==='voting')setSelVote(undefined);
        if(g.phase==='finished')setSub('over');
        if(g.phase==='lobby')onExit();
      }
      setGame(g);
    });
    return unsub;
  },[gameId]);

  useEffect(()=>{
    const unsub=DB.watchGameChat(gameId,msgs=>{
      if(!showChat){const nc=msgs.length-lastChat.current;if(nc>0)setUnread(p=>p+nc);}
      lastChat.current=msgs.length;
    });
    return unsub;
  },[gameId,showChat]);

  // ĞĞ²Ñ‚Ğ¾Ğ³Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ğ°Ğ½Ğ¸Ğµ: ĞµÑĞ»Ğ¸ Ğ²ĞºĞ»ÑÑ‡ĞµĞ½Ğ¾ Ğ¸ Ğ²ÑĞµ Ğ¶Ğ¸Ğ²Ñ‹Ğµ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ¸ Ğ²Ñ‹Ğ»Ğ¾Ğ¶Ğ¸Ğ»Ğ¸ Ğ²ÑĞµ ĞºĞ°Ñ€Ñ‚Ñ‹ â€” Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°ĞµĞ¼ Ğ³Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ğ°Ğ½Ğ¸Ğµ
  // Ğ’ĞĞ–ĞĞ: useEffect Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½ Ğ±Ñ‹Ñ‚ÑŒ Ğ”Ğ Ğ»ÑĞ±Ñ‹Ñ… early return
  useEffect(()=>{
    if(!game||game.phase!=='playing'||!game.autoVote||game.creatorId!==user.username)return;
    const aliveP=Object.values(game.players||{}).filter(p=>!p.isEliminated);
    const allDone=aliveP.every(p=>{
      const done=(game.revealedThisRound||{})[p.username]||0;
      return done>=(game.maxReveals||2);
    });
    if(allDone&&aliveP.length>1&&!game._autoVotePending){
      if(game.debates){
        DB.updateGame(gameId,{phase:'debates',debateStart:Date.now(),votes:{},_autoVotePending:true});
      } else {
        DB.updateGame(gameId,{phase:'voting',votes:{},_autoVotePending:true});
      }
    }
  },[game]);

  // Ğ”ĞµĞ±Ğ°Ñ‚Ñ‹: Ğ°Ğ²Ñ‚Ğ¾Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´ Ğ² Ğ³Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ñ‡ĞµÑ€ĞµĞ· 60 ÑĞµĞº (Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ ÑĞ¾Ğ·Ğ´Ğ°Ñ‚ĞµĞ»ÑŒ)
  useEffect(()=>{
    if(!game||game.phase!=='debates'||game.creatorId!==user.username)return;
    const elapsed=Date.now()-(game.debateStart||Date.now());
    const remaining=Math.max(0,60000-elapsed);
    const t=setTimeout(()=>{
      DB.updateGame(gameId,{phase:'voting',votes:{}});
    },remaining);
    return()=>clearTimeout(t);
  },[game?.phase,game?.debateStart]);

  // Ğ Ğ°Ğ´Ğ¸Ğ¾Ğ¿ĞµÑ€ĞµĞ³Ğ¾Ğ²Ğ¾Ñ€Ñ‹ â€” state ĞĞ‘Ğ¯Ğ—ĞĞ¢Ğ•Ğ›Ğ¬ĞĞ Ğ´Ğ¾ early return
  const[radioTarget,setRadioTarget]=useState(null);
  const[radioMsgs,setRadioMsgs]=useState([]);
  const[radioInput,setRadioInput]=useState('');
  useEffect(()=>{
    if(!radioTarget||!gameId)return;
    const radioKey=[user.username,radioTarget].sort().join('_');
    const ref=DB.db.ref(`radioChats/${gameId}/${radioKey}`);
    const cb=ref.on('value',snap=>{
      const d=snap.val();
      setRadioMsgs(d?Object.values(d).sort((a,b)=>a.ts-b.ts):[]);
    });
    return()=>ref.off('value',cb);
  },[radioTarget,gameId]);

  // Ğ¢Ğ°Ğ¹Ğ¼ĞµÑ€ Ğ´ĞµĞ±Ğ°Ñ‚Ğ¾Ğ² â€” ĞŸĞ•Ğ Ğ•Ğ” early return (Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»Ğ° Ñ…ÑƒĞºĞ¾Ğ² React)
  const[debateTimeLeft,setDebateTimeLeft]=useState(60);
  useEffect(()=>{
    if(!game||game.phase!=='debates')return;
    const tick=()=>setDebateTimeLeft(Math.max(0,60-Math.floor((Date.now()-(game.debateStart||Date.now()))/1000)));
    tick();
    const t=setInterval(tick,1000);
    return()=>clearInterval(t);
  },[game?.phase,game?.debateStart]);

  if(!game)return<div className="sc"><Spin/></div>;

  // Game chat full overlay
  if(showChat){
    return(
      <div className="gchat">
        <GameChatInner gameId={gameId} user={user} onClose={()=>{setShowChat(false);setUnread(0);}}/>
      </div>
    );
  }

  const me=(game.players||{})[user.username];
  const isCreator=game.creatorId===user.username;
  const alive=Object.values(game.players||{}).filter(p=>!p.isEliminated);
  const ap=game.apocalypse||{};
  const maxRev=game.maxReveals||2;
  const revDone=(game.revealedThisRound||{})[user.username]||0;
  const extraRev=(game.extraReveals||{})[user.username]||0;
  const revLeft=(maxRev+extraRev)-revDone;
  const mySecretCard=me?.cards?.secret?SECRET_CARDS.find(s=>s.id===me.cards.secret):null;
  const mySecretUsed=!!(game.usedSecrets||{})[user.username];

  // debateTimeLeft Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ÑĞµÑ‚ÑÑ Ğ²Ñ‹ÑˆĞµ (Ğ´Ğ¾ early return)

  const useSecretCard=async(sc)=>{
    if(!me||me.isEliminated)return toast('Ğ’Ñ‹ Ğ²Ñ‹Ğ±Ñ‹Ğ»Ğ¸','err');
    if((game.usedSecrets||{})[user.username])return toast('ĞšĞ°Ñ€Ñ‚Ğ° ÑƒĞ¶Ğµ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ°','err');
    const effect=sc.effect;
    const upd={[`usedSecrets/${user.username}`]:true};
    // ĞŸÑ€Ğ¸Ğ¼ĞµĞ½ÑĞµĞ¼ ÑÑ„Ñ„ĞµĞºÑ‚
    if(effect==='extra_reveal'){
      upd[`extraReveals/${user.username}`]=(game.extraReveals?.[user.username]||0)+1;
      toast(`âœ¨ ${sc.title}: +1 Ñ€Ğ°ÑĞºÑ€Ñ‹Ñ‚Ğ¸Ğµ Ğ² ÑÑ‚Ğ¾Ğ¼ Ñ€Ğ°ÑƒĞ½Ğ´Ğµ!`,'ok');
    } else if(effect==='double_vote'){
      upd[`doubleVote/${user.username}`]=true;
      toast(`âš¡ ${sc.title}: Ñ‚Ğ²Ğ¾Ğ¹ Ğ³Ğ¾Ğ»Ğ¾Ñ ÑƒĞ´Ğ²Ğ¾ĞµĞ½!`,'ok');
    } else if(effect==='no_vote'){
      toast(`ğŸ”‡ ${sc.title}: Ñ‚Ñ‹ Ğ¿Ğ¾Ñ‚ĞµÑ€ÑĞ» Ğ³Ğ¾Ğ»Ğ¾Ñ Ğ² ÑÑ‚Ğ¾Ğ¼ Ñ€Ğ°ÑƒĞ½Ğ´Ğµ.`,'');
    } else if(effect==='immunity'){
      upd[`immunity/${user.username}`]=true;
      toast(`ğŸ›¡ï¸ ${sc.title}: Ñ‚Ñ‹ Ğ¿Ğ¾Ğ´ Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ğ¾Ğ¹ Ğ² ÑÑ‚Ğ¾Ğ¼ Ñ€Ğ°ÑƒĞ½Ğ´Ğµ!`,'ok');
    } else if(effect==='secret_vote'){
      upd[`secretVote/${user.username}`]=true;
      toast(`ğŸ•µï¸ ${sc.title}: Ñ‚Ğ²Ğ¾Ğ¹ Ğ³Ğ¾Ğ»Ğ¾Ñ Ğ±ÑƒĞ´ĞµÑ‚ Ñ‚Ğ°Ğ¹Ğ½Ñ‹Ğ¼!`,'ok');
    } else if(effect==='hide_card'){
      const revealed=me.revealed||[];
      if(revealed.length>0){
        const toHide=revealed[Math.floor(Math.random()*revealed.length)];
        const newRev=revealed.filter(k=>k!==toHide);
        upd[`players/${user.username}/revealed`]=newRev;
        const cardLabel=CARDS.find(c=>c.key===toHide)?.label||toHide;
        toast(`ğŸŒ«ï¸ ${sc.title}: ĞºĞ°Ñ€Ñ‚Ğ° "${cardLabel}" ÑĞ½Ğ¾Ğ²Ğ° ÑĞºÑ€Ñ‹Ñ‚Ğ°!`,'ok');
      } else { toast('ğŸŒ«ï¸ ĞĞµÑ‚ Ñ€Ğ°ÑĞºÑ€Ñ‹Ñ‚Ñ‹Ñ… ĞºĞ°Ñ€Ñ‚ Ğ´Ğ»Ñ ÑĞºÑ€Ñ‹Ñ‚Ğ¸Ñ','err'); return; }
    } else {
      // ĞÑÑ‚Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ ÑÑ„Ñ„ĞµĞºÑ‚Ñ‹ Ñ‚Ñ€ĞµĞ±ÑƒÑÑ‚ Ğ²Ğ·Ğ°Ğ¸Ğ¼Ğ¾Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ â€” Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ¸Ñ€ÑƒĞµĞ¼
      toast(`${sc.icon} ${sc.title} Ğ°ĞºÑ‚Ğ¸Ğ²Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ°! Ğ Ğ°ÑÑĞºĞ°Ğ¶Ğ¸ Ğ²ÑĞµĞ¼ Ğ¾Ğ± ÑÑ„Ñ„ĞµĞºÑ‚Ğµ.`,'ok');
    }
    await DB.updateGame(gameId,upd);
    setSub('round');
  };

  const doReveal=async(k)=>{
    if(!me||me.isEliminated)return;
    if(me.revealed?.includes(k))return toast('Ğ£Ğ¶Ğµ Ñ€Ğ°ÑĞºÑ€Ñ‹Ñ‚Ğ°','err');
    if(revLeft<=0)return toast(`Ğ›Ğ¸Ğ¼Ğ¸Ñ‚: ${maxRev} ĞºĞ°Ñ€Ñ‚ Ğ·Ğ° Ñ€Ğ°ÑƒĞ½Ğ´`,'err');
    const nr=[...(me.revealed||[]),k];
    await DB.updateGame(gameId,{[`players/${user.username}/revealed`]:nr,[`revealedThisRound/${user.username}`]:revDone+1});
    toast('âœ… ĞšĞ°Ñ€Ñ‚Ğ° Ñ€Ğ°ÑĞºÑ€Ñ‹Ñ‚Ğ°!','ok');setSub('round');
  };
  const startVote=async()=>{
    if(game.phase!=='playing')return;
    if(game.debates){
      // Ğ¡Ğ½Ğ°Ñ‡Ğ°Ğ»Ğ° Ğ´ĞµĞ±Ğ°Ñ‚Ñ‹ â€” Ñ„Ğ°Ğ·Ğ° 'debates' Ğ½Ğ° 60 ÑĞµĞºÑƒĞ½Ğ´
      await DB.updateGame(gameId,{phase:'debates',debateStart:Date.now(),votes:{}});
      toast('ğŸ¤ Ğ”ĞµĞ±Ğ°Ñ‚Ñ‹ Ğ½Ğ°Ñ‡Ğ°Ğ»Ğ¸ÑÑŒ! 60 ÑĞµĞºÑƒĞ½Ğ´ Ğ½Ğ° Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ñƒ','ok');
    } else {
      await DB.updateGame(gameId,{phase:'voting',votes:{}});
      setSelVote(undefined);
      toast('ğŸ—³ Ğ“Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ½Ğ°Ñ‡Ğ°Ğ»Ğ¾ÑÑŒ!','ok');
    }
  };
  const castVote=async(tid)=>{
    if(game.phase!=='voting')return;
    if((game.votes||{})[user.username]!==undefined)return toast('Ğ’Ñ‹ ÑƒĞ¶Ğµ Ğ¿Ñ€Ğ¾Ğ³Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ğ°Ğ»Ğ¸','err');
    await DB.updateGame(gameId,{[`votes/${user.username}`]:(tid===undefined||tid===null)?null:tid});
  };
  const tally=async()=>{
    if(tallying.current)return;
    const g=await DB.getGame(gameId);if(!g||g.phase!=='voting')return;
    tallying.current=true;
    try{
      const copy=JSON.parse(JSON.stringify(g));processVotes(copy);
      if(copy.phase==='finished'){
        const surv=Object.values(copy.players).filter(p=>!p.isEliminated).map(p=>p.username);
        const all=Object.keys(copy.players);
        await Promise.all([...surv.map(uid=>DB.updateUser(uid,{gamesWon:firebase.database.ServerValue.increment(1)})),...all.filter(u=>!surv.includes(u)).map(uid=>DB.updateUser(uid,{gamesEliminated:firebase.database.ServerValue.increment(1)}))]);
      }
      await DB.setGame(gameId,copy);
    }catch(e){console.error(e);}
    tallying.current=false;
  };

  /* MY CARDS */
  if(sub==='cards'){
    const mySecret=me?.cards?.secret?SECRET_CARDS.find(s=>s.id===me.cards.secret):null;
    const secretUsed=(game.usedSecrets||{})[user.username];
    return(
      <div className="sc">
        <HZ/><div className="tb"><BackBtn onClick={()=>setSub('round')}/><div className="tb-title">ĞœĞĞ˜ ĞšĞĞ Ğ¢Ğ«</div></div>
        <div className="scr-raw">
          <div style={{fontSize:11,color:'var(--tx3)',textAlign:'center',margin:'4px 0 14px'}}>Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ Ğ²Ñ‹ Ğ²Ğ¸Ğ´Ğ¸Ñ‚Ğµ Ğ²ÑĞµ ĞºĞ°Ñ€Ñ‚Ñ‹</div>
          {/* SECRET CARD â€” highlighted separately */}
          {mySecret&&(
            <div style={{
              background:`linear-gradient(135deg,${mySecret.color}18,${mySecret.color}08)`,
              border:`1px solid ${mySecret.color}55`,
              borderRadius:'var(--rad)',
              padding:'16px',
              marginBottom:14,
              position:'relative',
              overflow:'hidden',
            }}>
              <div style={{position:'absolute',top:0,right:0,padding:'4px 10px',background:mySecret.color+'22',borderBottomLeftRadius:'var(--rad-sm)',fontSize:9,fontWeight:700,color:mySecret.color,textTransform:'uppercase',letterSpacing:1}}>
                {SECRET_TYPE_LABELS[mySecret.type]}
              </div>
              {secretUsed&&<div style={{position:'absolute',top:0,left:0,right:0,bottom:0,background:'rgba(0,0,0,.55)',borderRadius:'var(--rad)',display:'flex',alignItems:'center',justifyContent:'center',zIndex:2}}>
                <span style={{fontSize:12,color:'#8e8e93',fontWeight:700,letterSpacing:1}}>Ğ˜Ğ¡ĞŸĞĞ›Ğ¬Ğ—ĞĞ’ĞĞĞ</span>
              </div>}
              <div style={{fontSize:32,marginBottom:6}}>{mySecret.icon}</div>
              <div style={{fontSize:16,fontWeight:700,color:'#fff',marginBottom:4}}>ğŸƒ {mySecret.title}</div>
              <div style={{fontSize:12,color:'rgba(255,255,255,.7)',lineHeight:1.5}}>{mySecret.desc}</div>
              {!secretUsed&&isCreator===false&&<button onClick={()=>useSecretCard(mySecret)} style={{marginTop:12,background:mySecret.color,border:'none',borderRadius:'var(--rad-sm)',color:'#000',fontWeight:700,fontSize:12,padding:'8px 16px',cursor:'pointer',width:'100%'}}>
                âš¡ ĞĞºÑ‚Ğ¸Ğ²Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ ĞºĞ°Ñ€Ñ‚Ñƒ
              </button>}
            </div>
          )}
          <div className="cgrid">
            {me?.cards?CARDS.filter(c=>c.key!=='secret').map(({key,icon,label})=>{
              const rev=(me.revealed||[]).includes(key);
              return(
                <div key={key} className={`ctile${rev?' rev':''}${key==='fact'?' full':''}`}>
                  {rev&&<div className="rev-bdg">Ğ ĞĞ¡ĞšĞ Ğ«Ğ¢Ğ</div>}
                  <div style={{fontSize:22,marginBottom:5}}>{icon}</div>
                  <div className="mono" style={{fontSize:8,letterSpacing:2,color:'var(--tx3)',textTransform:'uppercase'}}>{label}</div>
                  <div style={{fontSize:12,color:'var(--tx)',marginTop:5,lineHeight:1.4}}>{me.cards[key]||'â€”'}</div>
                </div>
              );
            }):<div style={{color:'var(--tx3)',padding:24,textAlign:'center'}}>ĞšĞ°Ñ€Ñ‚Ñ‹ Ğ½Ğµ Ğ½Ğ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ñ‹</div>}
          </div>
        </div>
      </div>
    );
  }

  /* PICK CARD */
  if(sub==='pick'){
    const unrev=CARDS.filter(c=>!(me?.revealed||[]).includes(c.key));
    return(
      <div className="sc">
        <HZ/><div className="tb"><BackBtn onClick={()=>setSub('round')}/><div className="tb-title">Ğ ĞĞ¡ĞšĞ Ğ«Ğ¢Ğ¬ ĞšĞĞ Ğ¢Ğ£</div><div className="mono" style={{fontSize:10,color:'var(--tx3)',letterSpacing:2}}>Ğ {game.round}</div></div>
        <div className="scr-raw">
          <div className="mono" style={{fontSize:10,color:'var(--a)',textAlign:'center',padding:'8px 0 12px'}}>ĞÑÑ‚Ğ°Ğ»Ğ¾ÑÑŒ Ñ€Ğ°ÑĞºÑ€Ñ‹Ñ‚Ğ¸Ğ¹: {revLeft} Ğ¸Ğ· {maxRev}</div>
          {revLeft<=0?<div className="mono" style={{textAlign:'center',padding:20,color:'var(--g)',fontSize:10,letterSpacing:2}}>âœ“ Ğ›Ğ¸Ğ¼Ğ¸Ñ‚ Ñ€Ğ°ÑĞºÑ€Ñ‹Ñ‚Ğ¸Ğ¹ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½</div>
          :unrev.length===0?<div className="mono" style={{textAlign:'center',padding:20,color:'var(--g)',fontSize:10,letterSpacing:2}}>âœ“ Ğ’ÑĞµ ĞºĞ°Ñ€Ñ‚Ñ‹ Ñ€Ğ°ÑĞºÑ€Ñ‹Ñ‚Ñ‹</div>
          :unrev.map(({key,icon,label})=>(
            <div key={key} className="ptile" onClick={()=>{const v=me?.cards?.[key]||'â€”';if(confirm(`Ğ Ğ°ÑĞºÑ€Ñ‹Ñ‚ÑŒ?\n\n${label}: ${v}\n\nĞ’ÑĞµ ÑƒĞ²Ğ¸Ğ´ÑÑ‚.`))doReveal(key);}}>
              <div style={{fontSize:22}}>{icon}</div>
              <div style={{flex:1}}>
                <div className="mono" style={{fontSize:9,letterSpacing:2,color:'var(--tx3)',textTransform:'uppercase'}}>{label}</div>
                <div style={{fontSize:13,color:'var(--tx)',marginTop:3}}>{me?.cards?.[key]||'â€”'}</div>
              </div>
              <div style={{fontSize:20,color:'var(--tx3)'}}>â€º</div>
            </div>
          ))}
          <div style={{marginTop:8}}><Btn ch="ğŸ¤« ĞĞµ Ñ€Ğ°ÑĞºÑ€Ñ‹Ğ²Ğ°Ñ‚ÑŒ ÑĞµĞ¹Ñ‡Ğ°Ñ" onClick={()=>setSub('round')} cls="btn-g" sm/></div>
        </div>
      </div>
    );
  }

  /* VOTE */
  if(sub==='vote'||(game.phase==='voting'&&sub!=='elim'&&sub!=='over')){
    const votes=game.votes||{};
    const voted=votes[user.username]!==undefined;
    const total=Object.keys(votes).length;
    const myV=votes[user.username];
    return(
      <div className="sc">
        <div className="hz-red"/>
        <div style={{padding:'14px',background:'rgba(232,53,74,.07)',borderBottom:'1px solid var(--rb)',flexShrink:0}}>
          <div style={{fontFamily:"'Inter',sans-serif",fontSize:28,letterSpacing:3,color:'var(--r)'}}>Ğ“ĞĞ›ĞĞ¡ĞĞ’ĞĞĞ˜Ğ•</div>
          <div className="mono" style={{fontSize:9,letterSpacing:2,color:'var(--tx3)',marginTop:2}}>ĞšĞ¢Ğ ĞŸĞĞšĞ˜ĞĞ•Ğ¢ Ğ‘Ğ£ĞĞšĞ•Ğ ?</div>
          <div className="mono" style={{fontSize:10,color:'var(--tx)',marginTop:6}}>ĞŸÑ€Ğ¾Ğ³Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ğ°Ğ»Ğ¸: {total} / {alive.length}</div>
        </div>
        <div className="scr-raw" style={{paddingBottom:100}}>
          <div className="mono" style={{fontSize:9,letterSpacing:2,color:'var(--tx3)',textAlign:'center',margin:'4px 0 12px'}}>Ğ’Ğ«Ğ‘Ğ•Ğ Ğ˜Ğ¢Ğ• Ğ˜Ğ“Ğ ĞĞšĞ â€” ĞŸĞĞ”Ğ¢Ğ’Ğ•Ğ Ğ”Ğ˜Ğ¢Ğ• Ğ“ĞĞ›ĞĞ¡</div>
          <div className="vgrid">
            {alive.map(p=>{
              const isMe=p.username===user.username;
              const vc=Object.values(votes).filter(v=>v===p.username).length;
              const iSel=!isMe&&selVote===p.username;
              const iVot=!isMe&&myV===p.username;
              const revT=(p.revealed||[]).map(k=>{const m=CARDS.find(c=>c.key===k);return`${m?.icon||''} ${p.cards?.[k]||''}`;}).join(' Â· ')||'ĞºĞ°Ñ€Ñ‚Ñ‹ Ğ½Ğµ Ñ€Ğ°ÑĞºÑ€Ñ‹Ñ‚Ñ‹';
              return(
                <div key={p.username} className={`vcard${(iSel||iVot)?' sel':''}${voted?' voted':''}`}
                  onClick={()=>{if(voted)return toast('Ğ’Ñ‹ ÑƒĞ¶Ğµ Ğ¿Ñ€Ğ¾Ğ³Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ğ°Ğ»Ğ¸','err');if(isMe)return toast('ĞĞµĞ»ÑŒĞ·Ñ Ğ·Ğ° ÑĞµĞ±Ñ','err');setSelVote(p.username);}}>
                  {vc>0&&<div style={{position:'absolute',top:8,right:8,fontFamily:"'Inter',sans-serif",fontSize:18,color:'var(--r)'}}>{'ğŸ’€'.repeat(Math.min(vc,3))}</div>}
                  <div style={{fontSize:13,fontWeight:700}}>{p.name}{isMe?<small style={{color:'var(--tx3)'}}> (Ğ²Ñ‹)</small>:''}</div>
                  <div style={{fontSize:10,color:'var(--tx3)',marginTop:4,lineHeight:1.4}}>{revT}</div>
                  {iVot&&<div style={{position:'absolute',bottom:8,right:8,fontSize:14,color:'var(--r)'}}>â˜…</div>}
                </div>
              );
            })}
            <div className={`vcard${selVote===null?' abst':''}${voted?' voted':''}`} onClick={()=>{if(!voted)setSelVote(null);}}>
              <div style={{fontSize:13,fontWeight:700}}>ğŸ¤ Ğ’Ğ¾Ğ·Ğ´ĞµÑ€Ğ¶Ğ°Ñ‚ÑŒÑÑ</div>
              <div style={{fontSize:10,color:'var(--tx3)',marginTop:4}}>ĞĞµ Ğ²Ğ»Ğ¸ÑĞµÑ‚ Ğ½Ğ° Ğ¸Ñ‚Ğ¾Ğ³</div>
              {myV===null&&voted&&<div style={{position:'absolute',bottom:8,right:8,fontSize:14,color:'var(--c)'}}>â˜…</div>}
            </div>
          </div>
        </div>
        <div className="fixbot">
          <Btn cls="btn-d" disabled={selVote===undefined||voted} ch={voted?'âœ… Ğ“ĞĞ›ĞĞ¡ Ğ—ĞĞ¡Ğ§Ğ˜Ğ¢ĞĞ':selVote===null?'ğŸ¤ Ğ’ĞĞ—Ğ”Ğ•Ğ Ğ–ĞĞ¢Ğ¬Ğ¡Ğ¯':'â˜  ĞŸĞĞ”Ğ¢Ğ’Ğ•Ğ Ğ”Ğ˜Ğ¢Ğ¬ Ğ“ĞĞ›ĞĞ¡'}
            onClick={()=>{if(selVote===undefined)return;castVote(selVote);}}/>
          {isCreator&&<Btn cls="btn-g" sm ch="ğŸ“Š ĞŸĞĞ”Ğ’Ğ•Ğ¡Ğ¢Ğ˜ Ğ˜Ğ¢ĞĞ“Ğ˜ (ÑĞ¾Ğ·Ğ´Ğ°Ñ‚ĞµĞ»ÑŒ)" onClick={tally}/>}
        </div>
      </div>
    );
  }

  /* ELIM */
  if(sub==='elim'){
    const ep=game.lastEliminated;
    const nextSub=game.phase==='finished'?'over':game.phase==='voting'?'vote':game.phase==='debates'?'debates':'round';
    const elimRound=game.round>1?game.round-1:1;
    const secretCard=ep?.allCards?.secret?SECRET_CARDS.find(s=>s.id===ep.allCards.secret):null;
    return(
      <div className="elim-screen">
        {/* Ğ¤Ğ¾Ğ½Ğ¾Ğ²Ñ‹Ğµ ÑÑ„Ñ„ĞµĞºÑ‚Ñ‹ */}
        <div className="elim-flash"/>
        <div className="elim-scanlines"/>
        <div className="elim-vignette"/>
        <div className="elim-scanner"/>

        {/* Ğ“ĞµÑ€Ğ¾Ğ¹ â€” Ñ‡ĞµÑ€ĞµĞ¿ + Ğ¸Ğ¼Ñ */}
        <div className="elim-hero">
          <div className="elim-skull elim-skull-shake">ğŸ’€</div>
          <div className="elim-tag">â˜  Ğ¸ÑĞºĞ»ÑÑ‡Ñ‘Ğ½ Ğ¸Ğ· Ğ±ÑƒĞ½ĞºĞµÑ€Ğ° â˜ </div>
          <div className="elim-name">{ep?.name||'â€”'}</div>
          <div className="elim-sub">Ğ Ğ°ÑƒĞ½Ğ´ {elimRound} Â· Ğ“Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²: {Object.values(game.votes||{}).filter(v=>v===ep?.userId).length}</div>
          <div className="elim-divider"/>
        </div>

        {/* ĞšĞ°Ñ€Ñ‚Ñ‹ Ğ²Ñ‹Ğ±Ñ‹Ğ²ÑˆĞµĞ³Ğ¾ */}
        <div className="elim-cards">
          <div style={{fontSize:9,letterSpacing:3,color:'rgba(255,69,58,.6)',textTransform:'uppercase',fontWeight:700,marginBottom:10}}>â€” Ğ’ÑĞµ ĞºĞ°Ñ€Ñ‚Ñ‹ â€”</div>
          {ep&&CARDS.filter(c=>c.key!=='secret').map(({key,icon,label},i)=>(
            <div key={key} className="elim-card-row" style={{animationDelay:`${0.9+i*0.08}s`}}>
              <div style={{fontSize:20,flexShrink:0,filter:'drop-shadow(0 0 8px rgba(255,69,58,.5))'}}>{icon}</div>
              <div style={{flex:1}}>
                <div style={{fontSize:8,letterSpacing:2,color:'rgba(255,69,58,.5)',textTransform:'uppercase',marginBottom:3}}>{label}</div>
                <div style={{fontSize:13,color:'#fff',fontWeight:500}}>{ep.allCards?.[key]||'â€”'}</div>
              </div>
            </div>
          ))}
          {secretCard&&(
            <div style={{background:`linear-gradient(135deg,${secretCard.color}22,${secretCard.color}08)`,border:`1px solid ${secretCard.color}55`,borderRadius:'var(--rad-sm)',padding:14,marginTop:4,animation:'elimCard .3s ease 1.5s both'}}>
              <div style={{fontSize:10,fontWeight:700,color:secretCard.color,marginBottom:6,letterSpacing:1}}>ğŸƒ Ğ¡Ğ•ĞšĞ Ğ•Ğ¢ĞĞĞ¯ ĞšĞĞ Ğ¢Ğ</div>
              <div style={{fontSize:18,marginBottom:4}}>{secretCard.icon} <span style={{fontSize:14,fontWeight:700,color:'#fff'}}>{secretCard.title}</span></div>
              <div style={{fontSize:12,color:'rgba(255,255,255,.6)',lineHeight:1.5}}>{secretCard.desc}</div>
            </div>
          )}
        </div>

        {/* ĞšĞ½Ğ¾Ğ¿ĞºĞ° Ğ¿Ñ€Ğ¾Ğ´Ğ¾Ğ»Ğ¶Ğ¸Ñ‚ÑŒ */}
        <div className="elim-continue">
          <button onClick={()=>setSub(nextSub)} style={{
            width:'100%',padding:'15px',border:'none',borderRadius:'var(--rad)',cursor:'pointer',
            background:'linear-gradient(135deg,rgba(255,69,58,.2),rgba(255,69,58,.08))',
            border:'1px solid rgba(255,69,58,.3)',color:'#fff',fontSize:15,fontWeight:700,
            letterSpacing:2,textTransform:'uppercase',transition:'.2s',
          }}>ĞŸĞ ĞĞ”ĞĞ›Ğ–Ğ˜Ğ¢Ğ¬ â†’</button>
        </div>
      </div>
    );
  }

  /* OVER */
  if(sub==='over'){
    const surv=Object.values(game.players||{}).filter(p=>!p.isEliminated);
    const dead=Object.values(game.players||{}).filter(p=>p.isEliminated);
    const iWon=surv.some(p=>p.username===user.username);
    return(
      <div className="win-screen">
        <div className="win-rays"/>
        <div className="win-scanlines"/>
        <div className="win-vignette"/>
        <div className="win-flash"/>
        <div className="win-hero">
          <div className="win-trophy">{iWon?'ğŸ†':'ğŸš'}</div>
          <div style={{marginTop:16,fontSize:10,letterSpacing:6,textTransform:'uppercase',color:'rgba(48,209,88,.6)',fontWeight:700,animation:'winFadeIn .5s ease .3s both'}}>
            {ap.emoji} {ap.name}
          </div>
          <div style={{fontSize:38,fontWeight:800,letterSpacing:2,color:'#30d158',textShadow:'0 0 40px rgba(48,209,88,.6)',marginTop:8,animation:'winFadeIn .5s ease .45s both'}}>
            {iWon?'Ğ’Ğ«Ğ–Ğ˜Ğ›!':'Ğ˜Ğ“Ğ Ğ ĞĞšĞĞĞ§Ğ•ĞĞ'}
          </div>
          <div style={{fontSize:13,color:'rgba(255,255,255,.4)',marginTop:6,animation:'winFadeIn .5s ease .6s both'}}>
            {surv.length} Ğ¸Ğ· {Object.keys(game.players||{}).length} Ğ¿Ğ¾Ğ¿Ğ°Ğ»Ğ¸ Ğ² Ğ±ÑƒĞ½ĞºĞµÑ€
          </div>
          <div style={{display:'flex',gap:6,marginTop:18,flexWrap:'wrap',justifyContent:'center',animation:'winFadeIn .5s ease .75s both'}}>
            {surv.map((p,i)=>(
              <div key={p.username} style={{display:'flex',alignItems:'center',gap:6,padding:'6px 12px',background:'rgba(48,209,88,.12)',border:'1px solid rgba(48,209,88,.3)',borderRadius:20,animationDelay:`${0.75+i*0.1}s`}}>
                <span style={{fontSize:16}}>ğŸ†</span>
                <span style={{fontSize:13,fontWeight:600,color:'#30d158'}}>{p.name}</span>
              </div>
            ))}
          </div>
        </div>
        <div className="win-cards">
          <div style={{fontSize:10,letterSpacing:3,color:'rgba(255,255,255,.3)',textTransform:'uppercase',fontWeight:700,textAlign:'center',marginBottom:12}}>Ğ’ Ğ‘Ğ£ĞĞšĞ•Ğ Ğ•</div>
          {surv.map((p,i)=>(
            <div key={p.username} className="win-player-card" style={{animationDelay:`${0.9+i*0.12}s`}}>
              <div style={{fontSize:28,filter:'drop-shadow(0 0 10px rgba(48,209,88,.6))'}}>ğŸ†</div>
              <div style={{flex:1}}>
                <div style={{fontSize:15,fontWeight:700,color:'#30d158'}}>{p.name}</div>
                <div style={{fontSize:11,color:'rgba(255,255,255,.4)',marginTop:2}}>{p.cards?.profession||'â€”'}</div>
              </div>
              {p.username===user.username&&<div style={{fontSize:9,letterSpacing:2,color:'#30d158',fontWeight:700,background:'rgba(48,209,88,.15)',padding:'3px 8px',borderRadius:8}}>Ğ’Ğ«</div>}
            </div>
          ))}
          {dead.length>0&&(
            <>
              <div style={{fontSize:10,letterSpacing:3,color:'rgba(255,255,255,.3)',textTransform:'uppercase',fontWeight:700,textAlign:'center',margin:'14px 0 10px'}}>Ğ’Ğ«Ğ‘Ğ«Ğ›Ğ˜</div>
              {dead.map((p,i)=>(
                <div key={p.username} className="dead-player-card" style={{animationDelay:`${1.1+i*0.08}s`}}>
                  <div style={{fontSize:22,filter:'grayscale(1)',opacity:.5}}>ğŸ’€</div>
                  <div style={{flex:1}}>
                    <div style={{fontSize:13,color:'rgba(255,255,255,.3)',textDecoration:'line-through'}}>{p.name}</div>
                    <div style={{fontSize:10,color:'rgba(255,255,255,.2)',marginTop:1}}>{p.cards?.profession||'â€”'}</div>
                  </div>
                </div>
              ))}
            </>
          )}
        </div>
        <div style={{position:'fixed',bottom:0,left:0,right:0,padding:'12px 16px 28px',background:'linear-gradient(0deg,#00060a 60%,transparent)',zIndex:20}}>
          <Btn cls="btn-gr" ch="â†© Ğ’Ğ•Ğ ĞĞ£Ğ¢Ğ¬Ğ¡Ğ¯ Ğ’ ĞœĞ•ĞĞ®" onClick={onExit}/>
        </div>
      </div>
    );
  }

  /* DEBATES */
  if(sub==='debates'||(game.phase==='debates'&&sub!=='elim'&&sub!=='over')){
    const debateTime=debateTimeLeft;
    const alive=Object.values(game.players||{}).filter(p=>!p.isEliminated);
    const timePerPlayer=Math.max(1,Math.floor(60/alive.length));
    const elapsed=60-debateTime;
    const currentSpeakerIdx=Math.min(alive.length-1,Math.floor(elapsed/timePerPlayer));
    const currentSpeaker=alive[currentSpeakerIdx];
    const timeInThisSlot=elapsed%timePerPlayer;
    const slotRemaining=timePerPlayer-timeInThisSlot;
    const isMyTurn=currentSpeaker&&currentSpeaker.username===user.username;
    return(
      <div className="sc">
        <div className="tb"><div className="tb-title">ğŸ¤ Ğ”Ğ•Ğ‘ĞĞ¢Ğ«</div>
          <div style={{fontFamily:"'Inter',sans-serif",fontSize:11,color:'var(--tx3)'}}>Ğ Ğ°ÑƒĞ½Ğ´ {game.round}</div>
        </div>
        <div className="scr">
          {/* Ğ‘Ğ¾Ğ»ÑŒÑˆĞ¾Ğ¹ Ñ‚Ğ°Ğ¹Ğ¼ĞµÑ€ */}
          <div style={{textAlign:'center',padding:'28px 0 20px'}}>
            <div style={{fontSize:72,fontWeight:800,color:debateTime<=10?'var(--r)':debateTime<=30?'#ff9f0a':'var(--g)',lineHeight:1,fontVariantNumeric:'tabular-nums',transition:'color .3s'}}>{String(debateTime).padStart(2,'0')}</div>
            <div style={{fontSize:12,color:'var(--tx3)',marginTop:6,fontWeight:500}}>ÑĞµĞºÑƒĞ½Ğ´ Ğ½Ğ° Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ñƒ</div>
            {/* Timer bar shrinks from full to 0 over 60 seconds */}
            <div style={{width:'220px',height:4,background:'rgba(255,255,255,0.1)',borderRadius:2,margin:'12px auto 0',overflow:'hidden'}}>
              <div style={{width:Math.max(0,(debateTime/60)*100)+'%',height:'100%',background:debateTime<=10?'var(--r)':debateTime<=30?'#ff9f0a':'var(--g)',borderRadius:2,transition:'width .5s linear,background .3s'}}/>
            </div>
          </div>
          {/* Current speaker banner */}
          {isMyTurn&&(
            <div style={{background:'rgba(48,209,88,0.12)',border:'1px solid rgba(48,209,88,0.4)',borderRadius:'var(--rad-sm)',padding:'12px 16px',marginBottom:14,textAlign:'center',boxShadow:'0 0 18px rgba(48,209,88,0.2)'}}>
              <div style={{fontSize:20,marginBottom:4}}>ğŸ™ï¸</div>
              <div style={{fontSize:14,fontWeight:700,color:'var(--g)'}}>Ğ’Ğ°ÑˆĞ° Ğ¾Ñ‡ĞµÑ€ĞµĞ´ÑŒ Ğ³Ğ¾Ğ²Ğ¾Ñ€Ğ¸Ñ‚ÑŒ!</div>
              <div style={{fontSize:12,color:'var(--tx3)',marginTop:4}}>ĞÑÑ‚Ğ°Ğ»Ğ¾ÑÑŒ {slotRemaining} ÑĞµĞº</div>
            </div>
          )}
          <div className="lbl">ğŸ—£ ĞŸĞĞ Ğ¯Ğ”ĞĞš Ğ’Ğ«Ğ¡Ğ¢Ğ£ĞŸĞ›Ğ•ĞĞ˜Ğ™</div>
          {alive.map((p,i)=>{
            const isCurrent=i===currentSpeakerIdx;
            const isMe=p.username===user.username;
            return(
              <div key={p.username} style={{display:'flex',alignItems:'center',gap:12,padding:'12px 16px',background:isCurrent?'rgba(48,209,88,0.08)':isMe?'rgba(240,165,0,0.07)':'rgba(255,255,255,0.04)',border:`1px solid ${isCurrent?'rgba(48,209,88,0.5)':isMe?'rgba(240,165,0,0.25)':'rgba(255,255,255,0.08)'}`,borderRadius:'var(--rad-sm)',marginBottom:6,boxShadow:isCurrent?'0 0 12px rgba(48,209,88,0.25)':'none',transition:'border .3s,box-shadow .3s,background .3s'}}>
                <div style={{width:28,height:28,borderRadius:'50%',background:isCurrent?'rgba(48,209,88,0.2)':'rgba(255,255,255,0.08)',display:'flex',alignItems:'center',justifyContent:'center',fontSize:isCurrent?18:12,fontWeight:700,color:isCurrent?'var(--g)':'var(--tx3)',flexShrink:0,transition:'background .3s,color .3s'}}>{isCurrent?'ğŸ™ï¸':i+1}</div>
                <div style={{flex:1}}>
                  <div style={{fontSize:14,fontWeight:600,color:isCurrent?'var(--g)':isMe?'var(--a)':'var(--tx)'}}>{p.name}{isMe&&' (Ğ²Ñ‹)'}</div>
                  <div style={{fontSize:11,color:'var(--tx3)'}}>@{p.username}{isCurrent&&<span style={{marginLeft:6,color:'var(--g)',fontWeight:600}}> Â· {slotRemaining} ÑĞµĞº</span>}</div>
                </div>
                {isCurrent&&<div style={{fontSize:11,fontWeight:700,color:'var(--g)',background:'rgba(48,209,88,0.15)',border:'1px solid rgba(48,209,88,0.3)',borderRadius:6,padding:'3px 8px'}}>Ğ³Ğ¾Ğ²Ğ¾Ñ€Ğ¸Ñ‚</div>}
              </div>
            );
          })}
          <div style={{background:'rgba(240,165,0,0.06)',border:'1px solid rgba(240,165,0,0.15)',borderRadius:'var(--rad-sm)',padding:'14px 16px',marginTop:14}}>
            <div style={{fontSize:13,fontWeight:600,color:'var(--a)',marginBottom:6}}>ğŸ’¡ ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»Ğ° Ğ´ĞµĞ±Ğ°Ñ‚Ğ¾Ğ²</div>
            <div style={{fontSize:12,color:'var(--tx3)',lineHeight:1.6}}>ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ¸Ğ³Ñ€Ğ¾Ğº Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚ {timePerPlayer} ÑĞµĞº Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ¾Ğ±ÑŠÑÑĞ½Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ñ‡ĞµĞ¼Ñƒ Ğ¾Ğ½ Ğ½ÑƒĞ¶ĞµĞ½ Ğ² Ğ±ÑƒĞ½ĞºĞµÑ€Ğµ. Ğ£Ğ±ĞµĞ´Ğ¸ Ğ´Ñ€ÑƒĞ³Ğ¸Ñ… Ğ² ÑĞ²Ğ¾ĞµĞ¹ Ñ†ĞµĞ½Ğ½Ğ¾ÑÑ‚Ğ¸ Ğ´Ğ¾ Ğ½Ğ°Ñ‡Ğ°Ğ»Ğ° Ğ³Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ğ°Ğ½Ğ¸Ñ!</div>
          </div>
        </div>
      </div>
    );
  }

  /* RADIO */
  if(sub==='radio'&&game.radio){
    const alive=Object.values(game.players||{}).filter(p=>!p.isEliminated&&p.username!==user.username);
    const sendRadio=async()=>{
      if(!radioInput.trim()||!radioTarget)return;
      const radioKey=[user.username,radioTarget].sort().join('_');
      await DB.db.ref(`radioChats/${gameId}/${radioKey}`).push({from:user.username,name:user.displayName||user.username,text:radioInput.trim(),ts:Date.now()});
      setRadioInput('');
    };
    return(
      <div style={{position:'fixed',inset:0,background:'var(--bg)',display:'flex',flexDirection:'column',zIndex:200,animation:'fadeUp .2s ease'}}>
        <div className="tb"><BackBtn onClick={()=>setSub('round')}/><div className="tb-title">ğŸ“¡ Ğ ĞĞ”Ğ˜Ğ</div></div>
        {!radioTarget?(
          <div style={{flex:1,overflowY:'auto',padding:16}}>
            <div className="lbl">Ğ’Ğ«Ğ‘Ğ•Ğ Ğ˜ Ğ¡ĞĞ‘Ğ•Ğ¡Ğ•Ğ”ĞĞ˜ĞšĞ</div>
            {alive.length===0
              ?<div style={{textAlign:'center',padding:28,color:'var(--tx3)',fontSize:13}}>ĞĞµÑ‚ Ğ´Ñ€ÑƒĞ³Ğ¸Ñ… Ğ¶Ğ¸Ğ²Ñ‹Ñ… Ğ¸Ğ³Ñ€Ğ¾ĞºĞ¾Ğ²</div>
              :alive.map(p=>(
                <div key={p.username} onClick={()=>setRadioTarget(p.username)}
                  style={{display:'flex',alignItems:'center',gap:12,padding:'14px 16px',background:'rgba(255,255,255,0.04)',border:'1px solid rgba(255,255,255,0.08)',borderRadius:'var(--rad-sm)',marginBottom:8,cursor:'pointer',transition:'.18s'}}
                  onMouseEnter={e=>e.currentTarget.style.borderColor='rgba(10,132,255,0.4)'}
                  onMouseLeave={e=>e.currentTarget.style.borderColor='rgba(255,255,255,0.08)'}>
                  <div style={{fontSize:28}}>ğŸ“¡</div>
                  <div><div style={{fontSize:14,fontWeight:600}}>{p.name}</div><div style={{fontSize:11,color:'var(--tx3)'}}>@{p.username}</div></div>
                </div>
              ))
            }
          </div>
        ):(
          <>
            <div style={{padding:'10px 16px',background:'rgba(10,132,255,0.08)',borderBottom:'1px solid rgba(10,132,255,0.2)',display:'flex',alignItems:'center',gap:10,flexShrink:0}}>
              <button onClick={()=>setRadioTarget(null)} style={{background:'none',border:'none',color:'var(--tx3)',cursor:'pointer',fontSize:20,lineHeight:1}}>â†</button>
              <div style={{fontSize:14,fontWeight:600,color:'#0a84ff'}}>ğŸ“¡ {(game.players||{})[radioTarget]?.name||radioTarget}</div>
              <div style={{fontSize:10,color:'var(--tx3)',marginLeft:'auto'}}>ğŸ”’ Ğ¿Ñ€Ğ¸Ğ²Ğ°Ñ‚Ğ½Ñ‹Ğ¹ ĞºĞ°Ğ½Ğ°Ğ»</div>
            </div>
            <div style={{flex:1,overflowY:'auto',padding:14,display:'flex',flexDirection:'column',gap:8}}>
              {radioMsgs.length===0&&<div style={{textAlign:'center',color:'var(--tx3)',fontSize:12,marginTop:32,lineHeight:1.8}}>ğŸ“¡ ĞšĞ°Ğ½Ğ°Ğ» Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚<br/>Ğ“Ğ¾Ğ²Ğ¾Ñ€Ğ¸Ñ‚Ğµ Ñ‚Ğ°Ğ¹Ğ½Ğ¾</div>}
              {radioMsgs.map((m,i)=>(
                <div key={i} className={`bubble ${m.from===user.username?'me':'other'}`}>
                  {m.from!==user.username&&<div className="bubble-from">{m.name}</div>}
                  {m.text}
                </div>
              ))}
            </div>
            <div style={{display:'flex',gap:8,padding:'10px 14px',background:'rgba(255,255,255,0.04)',borderTop:'1px solid rgba(255,255,255,0.08)',flexShrink:0}}>
              <input className="inp" style={{marginBottom:0,flex:1}} value={radioInput} onChange={e=>setRadioInput(e.target.value)}
                onKeyDown={e=>e.key==='Enter'&&sendRadio()} placeholder="Ğ¢Ğ°Ğ¹Ğ½Ğ¾Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ..."/>
              <button className="chat-send" style={{borderRadius:'var(--rad-sm)'}} onClick={sendRadio}>â†’</button>
            </div>
          </>
        )}
      </div>
    );
  }

  /* BUNKER MAP */
  if(sub==='map'&&game.bunkerMap){
    const roomAssign=game.roomAssign||{};
    const myRoomId=roomAssign[user.username];
    const myRoom=myRoomId?BUNKER_ROOMS.find(r=>r.id===myRoomId):null;
    const alive=Object.values(game.players||{}).filter(p=>!p.isEliminated);
    return(
      <div className="sc">
        <div className="tb"><BackBtn onClick={()=>setSub('round')}/><div className="tb-title">ğŸ—ºï¸ Ğ‘Ğ£ĞĞšĞ•Ğ </div></div>
        <div className="scr">
          {myRoom&&(
            <div style={{background:myRoom.bg,border:`1px solid ${myRoom.color}44`,borderRadius:'var(--rad)',padding:'16px',marginBottom:16,textAlign:'center'}}>
              <div style={{fontSize:36,marginBottom:6}}>{myRoom.icon}</div>
              <div style={{fontSize:16,fontWeight:700,color:myRoom.color,marginBottom:4}}>Ğ’Ğ°ÑˆĞ° ĞºĞ¾Ğ¼Ğ½Ğ°Ñ‚Ğ°: {myRoom.name}</div>
              <div style={{fontSize:12,color:'var(--tx3)',lineHeight:1.5}}>{myRoom.bonus}</div>
            </div>
          )}
          <div className="lbl">ğŸ—ï¸ Ğ¡Ğ¥Ğ•ĞœĞ Ğ‘Ğ£ĞĞšĞ•Ğ Ğ</div>
          <div style={{display:'grid',gridTemplateColumns:'1fr 1fr',gap:10,marginBottom:16}}>
            {BUNKER_ROOMS.map(room=>{
              const roomPlayers=alive.filter(p=>roomAssign[p.username]===room.id);
              const isMyRoom=myRoomId===room.id;
              return(
                <div key={room.id} style={{background:isMyRoom?room.bg:'rgba(255,255,255,0.03)',border:`1px solid ${isMyRoom?room.color+'66':'rgba(255,255,255,0.08)'}`,borderRadius:'var(--rad-sm)',padding:'12px',transition:'.2s'}}>
                  <div style={{display:'flex',alignItems:'center',gap:8,marginBottom:8}}>
                    <span style={{fontSize:20}}>{room.icon}</span>
                    <span style={{fontSize:12,fontWeight:600,color:isMyRoom?room.color:'var(--tx)'}}>{room.name}</span>
                  </div>
                  {roomPlayers.length===0?<div style={{fontSize:10,color:'var(--tx3)'}}>ĞŸÑƒÑÑ‚Ğ¾</div>:
                  roomPlayers.map(p=>(
                    <div key={p.username} style={{fontSize:11,color:p.username===user.username?'var(--a)':'var(--tx2)',marginBottom:2}}>
                      {p.username===user.username?'ğŸ‘¤ Ğ’Ñ‹':p.name}
                    </div>
                  ))}
                </div>
              );
            })}
          </div>
        </div>
      </div>
    );
  }

  /* VOTE HISTORY */
  if(sub==='voteHistory'&&game.voteHistory){
    const log=game.voteLog||{};
    const rounds=Object.keys(log).sort();
    return(
      <div className="sc">
        <div className="tb"><BackBtn onClick={()=>setSub('round')}/><div className="tb-title">ğŸ“Š Ğ˜Ğ¡Ğ¢ĞĞ Ğ˜Ğ¯ Ğ“ĞĞ›ĞĞ¡ĞĞ’ĞĞĞ˜Ğ™</div></div>
        <div className="scr">
          {rounds.length===0?<div style={{textAlign:'center',padding:28,color:'var(--tx3)',fontSize:13}}>Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ğ¿ÑƒÑÑ‚Ğ°</div>:
          rounds.map(r=>{
            const entry=log[r];
            const tally=entry.tally||{};
            const votes=entry.votes||{};
            return(
              <div key={r} style={{marginBottom:16}}>
                <div className="lbl">{r}</div>
                {Object.entries(votes).filter(([,v])=>v).map(([voter,target])=>{
                  const vname=game.players[voter]?.name||voter;
                  const tname=game.players[target]?.name||target;
                  return(
                    <div key={voter} style={{display:'flex',alignItems:'center',gap:8,padding:'8px 12px',background:'rgba(255,255,255,0.03)',border:'1px solid rgba(255,255,255,0.07)',borderRadius:'var(--rad-sm)',marginBottom:4,fontSize:13}}>
                      <span style={{color:'var(--tx)',fontWeight:500}}>{vname}</span>
                      <span style={{color:'var(--tx3)',fontSize:16}}>â†’</span>
                      <span style={{color:'var(--r)',fontWeight:500}}>{tname}</span>
                      {voter===user.username&&<span style={{marginLeft:'auto',fontSize:10,color:'var(--a)'}}>Ğ²Ñ‹</span>}
                    </div>
                  );
                })}
                <div style={{display:'flex',gap:6,flexWrap:'wrap',marginTop:6}}>
                  {Object.entries(tally).sort(([,a],[,b])=>b-a).map(([uid,cnt])=>{
                    const name=game.players[uid]?.name||uid;
                    return cnt>0&&<span key={uid} style={{fontSize:11,padding:'3px 10px',background:'rgba(255,69,58,0.1)',border:'1px solid rgba(255,69,58,0.2)',borderRadius:'var(--rad-sm)',color:'var(--r)'}}>â˜  {name}: {cnt}</span>;
                  })}
                </div>
              </div>
            );
          })}
        </div>
      </div>
    );
  }

  /* MY ROLE */
  if(sub==='role'&&game.roles){
    const myRoleId=me?.role||'civilian';
    const myRole=ROLES.find(r=>r.id===myRoleId)||ROLES[4];
    return(
      <div className="sc">
        <div className="tb"><BackBtn onClick={()=>setSub('round')}/><div className="tb-title">ğŸ­ ĞœĞĞ¯ Ğ ĞĞ›Ğ¬</div></div>
        <div className="scr">
          <div style={{textAlign:'center',padding:'32px 0 24px'}}>
            <div style={{fontSize:64,marginBottom:12}}>{myRole.icon}</div>
            <div style={{fontSize:28,fontWeight:800,color:myRole.color,marginBottom:8}}>{myRole.name}</div>
            <div style={{fontSize:14,color:'var(--tx2)',lineHeight:1.6,maxWidth:280,margin:'0 auto'}}>{myRole.desc}</div>
          </div>
          {myRoleId==='medic'&&(
            <div style={{background:'rgba(48,209,88,0.06)',border:'1px solid rgba(48,209,88,0.2)',borderRadius:'var(--rad-sm)',padding:'14px 16px',marginTop:8}}>
              <div style={{fontSize:13,fontWeight:600,color:'var(--g)',marginBottom:6}}>ğŸ’‰ Ğ¡Ğ¿Ğ¾ÑĞ¾Ğ±Ğ½Ğ¾ÑÑ‚ÑŒ: Ğ¡Ğ¿Ğ°ÑĞµĞ½Ğ¸Ğµ</div>
              <div style={{fontSize:12,color:'var(--tx3)',lineHeight:1.5}}>Ğ’Ğ¾ Ğ²Ñ€ĞµĞ¼Ñ Ğ³Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ğ½Ğ°Ğ¶Ğ¼Ğ¸ ĞºĞ½Ğ¾Ğ¿ĞºÑƒ Â«ğŸ’‰ Ğ¡Ğ¿Ğ°ÑÑ‚Ğ¸Â» Ñ€ÑĞ´Ğ¾Ğ¼ Ñ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ¾Ğ¼ ĞºĞ¾Ñ‚Ğ¾Ñ€Ğ¾Ğ³Ğ¾ Ñ…Ğ¾Ñ‡ĞµÑˆÑŒ Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ğ¸Ñ‚ÑŒ. Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ 1 Ñ€Ğ°Ğ· Ğ·Ğ° Ğ¸Ğ³Ñ€Ñƒ.</div>
              {game.medicUsed?.[user.username]&&<div style={{marginTop:8,fontSize:12,color:'var(--r)'}}>âš ï¸ Ğ¡Ğ¿Ğ¾ÑĞ¾Ğ±Ğ½Ğ¾ÑÑ‚ÑŒ ÑƒĞ¶Ğµ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ°</div>}
            </div>
          )}
          {myRoleId==='spy'&&(
            <div style={{background:'rgba(10,132,255,0.06)',border:'1px solid rgba(10,132,255,0.2)',borderRadius:'var(--rad-sm)',padding:'14px 16px',marginTop:8}}>
              <div style={{fontSize:13,fontWeight:600,color:'#0a84ff',marginBottom:6}}>ğŸ•µï¸ Ğ¡Ğ¿Ğ¾ÑĞ¾Ğ±Ğ½Ğ¾ÑÑ‚ÑŒ: Ğ¡Ğ»ĞµĞ¶ĞºĞ°</div>
              <div style={{fontSize:12,color:'var(--tx3)',lineHeight:1.5}}>Ğ¢Ñ‹ Ğ²Ğ¸Ğ´Ğ¸ÑˆÑŒ Ğ¿ĞµÑ€Ğ²ÑƒÑ ÑĞºÑ€Ñ‹Ñ‚ÑƒÑ ĞºĞ°Ñ€Ñ‚Ñƒ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ° Ğ² Ñ€Ğ°Ğ·Ğ´ĞµĞ»Ğµ Â«Ğ˜Ğ³Ñ€Ğ¾ĞºĞ¸Â».</div>
            </div>
          )}
          <div className="lbl">Ğ’Ğ¡Ğ• Ğ ĞĞ›Ğ˜</div>
          {ROLES.map(role=>(
            <div key={role.id} style={{display:'flex',alignItems:'center',gap:12,padding:'12px 16px',background:role.id===myRoleId?`${role.color}11`:'rgba(255,255,255,0.03)',border:`1px solid ${role.id===myRoleId?role.color+'44':'rgba(255,255,255,0.07)'}`,borderRadius:'var(--rad-sm)',marginBottom:6,opacity:role.id===myRoleId?1:0.5}}>
              <span style={{fontSize:24}}>{role.icon}</span>
              <div><div style={{fontSize:13,fontWeight:600,color:role.id===myRoleId?role.color:'var(--tx)'}}>{role.name}</div><div style={{fontSize:11,color:'var(--tx3)'}}>{role.desc}</div></div>
            </div>
          ))}
        </div>
      </div>
    );
  }

  /* ROUND */
  const spots=alive.map((_,i)=><div key={i} className={`bspot ${i<game.bunkerSpots?'free':'taken'}`}/>);
  const feed=alive.flatMap(p=>(p.revealed||[]).map(k=>{const m=CARDS.find(c=>c.key===k)||{};return(
    <div key={`${p.username}-${k}`} className="feed-item">
      <div style={{fontSize:12,fontWeight:700,color:'var(--a2)',minWidth:72,flexShrink:0}}>{p.name}</div>
      <div style={{flex:1}}>
        <div className="mono" style={{fontSize:8,color:'var(--tx3)',letterSpacing:1}}>{m.icon||''} {m.label||k}</div>
        <div style={{fontSize:12,color:'var(--tx)',marginTop:2}}>{p.cards?.[k]||'â€”'}</div>
      </div>
    </div>
  );}));

  return(
    <div className="sc">
      <HZ/>
      <div style={{display:'flex',alignItems:'center',gap:12,padding:'10px 14px',background:'var(--s1)',backdropFilter:'var(--bl)',WebkitBackdropFilter:'var(--bl)',borderBottom:'1px solid var(--ab)',flexShrink:0}}>
        <div style={{fontFamily:"'Inter',sans-serif",fontSize:52,color:'var(--a)',lineHeight:1,minWidth:56}}>{game.round}</div>
        <div style={{flex:1}}>
          <div className="mono" style={{fontSize:8,letterSpacing:2,color:'var(--tx3)'}}>ĞĞŸĞĞšĞĞ›Ğ˜ĞŸĞ¡Ğ˜Ğ¡</div>
          <div style={{fontSize:14,fontWeight:600}}>{ap.emoji} {ap.name}</div>
          <div className="mono" style={{fontSize:8,letterSpacing:2,color:'var(--tx3)',marginTop:3}}>Ğ–Ğ˜Ğ’Ğ«Ğ¥ / ĞœĞ•Ğ¡Ğ¢</div>
          <div style={{fontSize:14,fontWeight:600}}>{alive.length} / {game.bunkerSpots}</div>
        </div>
        <div style={{display:'flex',flexDirection:'column',gap:6}}>
          <button onClick={()=>setSub('cards')} style={{background:'var(--s1)',border:'1px solid var(--ab)',color:'var(--tx3)',padding:'6px 10px',fontFamily:"'Inter',sans-serif",fontSize:14,cursor:'pointer',transition:'.2s'}}>ğŸƒ</button>
          <button onClick={()=>{setShowChat(true);setUnread(0);}} style={{background:'var(--s1)',border:`1px solid ${unread>0?'rgba(0,184,217,.35)':'var(--ab)'}`,color:unread>0?'var(--c)':'var(--tx3)',padding:'6px 10px',fontFamily:"'Inter',sans-serif",fontSize:14,cursor:'pointer',position:'relative',transition:'.2s'}}>
            ğŸ’¬{unread>0&&<span style={{position:'absolute',top:-4,right:-4,background:'var(--r)',color:'#fff',fontSize:7,width:12,height:12,borderRadius:'50%',display:'flex',alignItems:'center',justifyContent:'center'}}>{unread}</span>}
          </button>
        </div>
      </div>
      <div className="scr-raw" style={{paddingBottom:100}}>
        <div style={{display:'flex',gap:4,flexWrap:'wrap',padding:'12px 0 8px'}}>{spots}</div>
        <div className="lbl">Ğ ĞĞ¡ĞšĞ Ğ«Ğ¢Ğ«Ğ• ĞšĞĞ Ğ¢Ğ«</div>
        {feed.length>0?feed:<div className="mono" style={{fontSize:10,color:'var(--tx3)',textAlign:'center',padding:'16px 0'}}>ĞŸĞ¾ĞºĞ° Ğ½Ğ¸Ñ‡ĞµĞ³Ğ¾ Ğ½Ğµ Ñ€Ğ°ÑĞºÑ€Ñ‹Ñ‚Ğ¾</div>}
      </div>
      <div className="fixbot">
        {/* Secret card quick-activate banner */}
        {mySecretCard&&!mySecretUsed&&!me?.isEliminated&&(
          <div onClick={()=>setSub('cards')} style={{
            display:'flex',alignItems:'center',gap:10,padding:'10px 14px',
            background:`linear-gradient(135deg,${mySecretCard.color}22,${mySecretCard.color}0a)`,
            border:`1px solid ${mySecretCard.color}44`,borderRadius:'var(--rad-sm)',cursor:'pointer',marginBottom:4,
          }}>
            <span style={{fontSize:20}}>{mySecretCard.icon}</span>
            <div style={{flex:1}}>
              <div style={{fontSize:11,fontWeight:700,color:mySecretCard.color}}>ğŸƒ {mySecretCard.title}</div>
              <div style={{fontSize:10,color:'rgba(255,255,255,.5)',marginTop:1}}>Ğ¡ĞµĞºÑ€ĞµÑ‚Ğ½Ğ°Ñ ĞºĞ°Ñ€Ñ‚Ğ° Ğ½Ğµ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ° â€” Ğ½Ğ°Ğ¶Ğ¼Ğ¸ Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚ÑŒ</div>
            </div>
            <span style={{fontSize:16,color:mySecretCard.color}}>â€º</span>
          </div>
        )}
        <div className="brow">
          <Btn ch="ğŸƒ ĞšĞĞ Ğ¢Ğ«" onClick={()=>setSub('cards')} cls="btn-g" sm/>
          <Btn ch={me?.isEliminated?'ğŸ’€ Ğ’Ğ«Ğ‘Ğ«Ğ›Ğ˜':revLeft<=0?`âœ… (${maxRev}/${maxRev})`:revLeft<maxRev?`â†— Ğ•Ğ©Ğ (${revLeft})`:'â†— Ğ ĞĞ¡ĞšĞ Ğ«Ğ¢Ğ¬'}
            onClick={()=>setSub('pick')} cls="btn-c" sm disabled={!me||me.isEliminated||revLeft<=0}/>
        </div>
        {(game.roles||game.radio||game.bunkerMap||game.voteHistory)&&(
          <div className="brow" style={{flexWrap:'wrap',gap:6}}>
            {game.roles&&me&&!me.isEliminated&&<Btn ch="ğŸ­ Ğ ĞĞ›Ğ¬" onClick={()=>setSub('role')} cls="btn-g" sm/>}
            {game.radio&&me&&!me.isEliminated&&<Btn ch="ğŸ“¡ Ğ ĞĞ”Ğ˜Ğ" onClick={()=>setSub('radio')} cls="btn-g" sm/>}
            {game.bunkerMap&&<Btn ch="ğŸ—ºï¸ Ğ‘Ğ£ĞĞšĞ•Ğ " onClick={()=>setSub('map')} cls="btn-g" sm/>}
            {game.voteHistory&&game.voteLog&&Object.keys(game.voteLog).length>0&&<Btn ch="ğŸ“Š Ğ˜Ğ¡Ğ¢ĞĞ Ğ˜Ğ¯" onClick={()=>setSub('voteHistory')} cls="btn-g" sm/>}
          </div>
        )}
        {isCreator&&<Btn ch="ğŸ—³ ĞĞĞ§ĞĞ¢Ğ¬ Ğ“ĞĞ›ĞĞ¡ĞĞ’ĞĞĞ˜Ğ•" onClick={startVote} cls="btn-d" sm/>}
      </div>
    </div>
  );
}

/* Game Chat as an inner component (avoids setState during render) */
function GameChatInner({gameId,user,onClose}){
  const[msgs,setMsgs]=useState([]);
  useEffect(()=>{const u=DB.watchGameChat(gameId,m=>setMsgs(m));return u;},[gameId]);
  const send=async(t)=>{await DB.sendGameMsg(gameId,user.username,user.displayName||user.username,t);};
  return<ChatView msgs={msgs} me={user} onSend={send} title="ğŸ’¬ ĞĞ‘Ğ©Ğ˜Ğ™ Ğ§ĞĞ¢" onClose={onClose} extraPadBot={0}/>;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   FRIENDS SCREEN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function FriendsScreen({user,onBack,toast,gameInvites,onAcceptInvite}){
  const[tab,setTab]=useState('friends');
  const[friends,setFr]=useState({});
  const[reqs,setReqs]=useState({});
  const[allUsers,setAU]=useState({});
  const[q,setQ]=useState('');
  const[searching,setSrch]=useState(false);
  const[results,setRes]=useState([]);
  const[chatFr,setChatFr]=useState(null);
  const[chatMsgs,setChatMsgs]=useState([]);

  useEffect(()=>{
    const u1=DB.watchFriends(user.username,f=>setFr(f));
    const u2=DB.watchFriendReqs(user.username,r=>setReqs(r));
    return()=>{u1();u2();};
  },[]);

  useEffect(()=>{
    const ids=[...new Set([...Object.keys(friends),...Object.keys(reqs)])];
    if(!ids.length)return;
    DB.getAllUsers().then(u=>setAU(u));
  },[JSON.stringify([...Object.keys(friends),...Object.keys(reqs)].sort())]);

  useEffect(()=>{
    if(!chatFr){setChatMsgs([]);return;}
    const u=DB.watchPrivChat(user.username,chatFr,m=>setChatMsgs(m));
    DB.markRead(user.username,chatFr,user.username);
    return u;
  },[chatFr]);

  const search=async()=>{
    const qq=q.trim().toLowerCase();if(!qq)return;
    setSrch(true);
    const all=await DB.getAllUsers();setAU(all);
    setRes(Object.values(all).filter(u=>u.username!==user.username&&(u.username.includes(qq)||(u.displayName||'').toLowerCase().includes(qq))).slice(0,10));
    setSrch(false);
  };
  const addFriend=async(tid)=>{
    const r=await DB.sendFriendReq(user.username,tid);
    if(r.e==='already_friends')return toast('Ğ£Ğ¶Ğµ Ğ² Ğ´Ñ€ÑƒĞ·ÑŒÑÑ…','err');
    if(r.e==='already_sent')return toast('Ğ—Ğ°Ğ¿Ñ€Ğ¾Ñ ÑƒĞ¶Ğµ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½','err');
    if(r.e==='not_found')return toast('ĞĞµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½','err');
    if(r.e==='self')return toast('ĞĞµĞ»ÑŒĞ·Ñ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ ÑĞµĞ±Ñ','err');
    if(r.ok==='auto')toast('âœ… Ğ¢ĞµĞ¿ĞµÑ€ÑŒ Ğ²Ñ‹ Ğ´Ñ€ÑƒĞ·ÑŒÑ!','ok');
    else toast('âœ… Ğ—Ğ°Ğ¿Ñ€Ğ¾Ñ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½!','ok');
    setRes(p=>p.map(u=>u.username===tid?{...u,_req:true}:u));
  };
  const accept=async(fid)=>{await DB.acceptFriend(user.username,fid);toast('âœ… Ğ¢ĞµĞ¿ĞµÑ€ÑŒ Ğ²Ñ‹ Ğ´Ñ€ÑƒĞ·ÑŒÑ!','ok');};
  const reject=async(fid)=>{await DB.rejectFriend(user.username,fid);};
  const remove=async(fid)=>{if(!confirm('Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ Ğ¸Ğ· Ğ´Ñ€ÑƒĞ·ĞµĞ¹?'))return;await DB.removeFriend(user.username,fid);toast('Ğ£Ğ´Ğ°Ğ»ĞµĞ½Ğ¾','ok');};
  const acceptInv=async(iid,inv)=>{await DB.removeGameInvite(user.username,iid);onAcceptInvite(inv.gameId);};
  const declineInv=async(iid)=>{await DB.removeGameInvite(user.username,iid);};
  const sendMsg=async(t)=>{if(!chatFr)return;await DB.sendPrivMsg(user.username,chatFr,user.username,user.displayName||user.username,t);DB.markRead(user.username,chatFr,user.username);};

  const rqCnt=Object.keys(reqs).length;
  const ivCnt=Object.keys(gameInvites||{}).length;

  if(chatFr){
    const fu=allUsers[chatFr];
    return(
      <div className="sc">
        <ChatView msgs={chatMsgs} me={user} onSend={sendMsg}
          title={`ğŸ’¬ ${fu?.displayName||fu?.username||chatFr}`}
          onClose={()=>setChatFr(null)}
          extraPadBot={72}
          extra={<button onClick={()=>remove(chatFr)} style={{background:'rgba(255,69,58,0.1)',border:'1px solid rgba(255,69,58,0.3)',color:'var(--r)',fontFamily:"'Inter',sans-serif",fontSize:11,fontWeight:600,padding:'5px 10px',borderRadius:'6px',cursor:'pointer'}}>Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ</button>}
        />
      </div>
    );
  }

  return(
    <div className="sc">
      <HZ/>
      <div className="tb">
        <BackBtn onClick={onBack}/>
        <div className="tb-title">Ğ”Ğ Ğ£Ğ—Ğ¬Ğ¯</div>
        <div className="mono" style={{fontSize:10,color:'var(--tx3)',letterSpacing:2}}>{Object.keys(friends).length}</div>
      </div>
      <div className="scr" style={{paddingTop:8}}>
        <div className="tabs">
          <button className={`tab${tab==='friends'?' on':''}`} onClick={()=>setTab('friends')}>Ğ”Ğ Ğ£Ğ—Ğ¬Ğ¯</button>
          <button className={`tab${tab==='reqs'?' on':''}`} onClick={()=>setTab('reqs')} style={{position:'relative'}}>Ğ—ĞĞŸĞ ĞĞ¡Ğ«{rqCnt>0&&<span className="tab-badge">{rqCnt}</span>}</button>
          <button className={`tab${tab==='invs'?' on':''}`} onClick={()=>setTab('invs')} style={{position:'relative'}}>Ğ˜Ğ“Ğ Ğ«{ivCnt>0&&<span className="tab-badge">{ivCnt}</span>}</button>
          <button className={`tab${tab==='search'?' on':''}`} onClick={()=>setTab('search')}>ĞŸĞĞ˜Ğ¡Ğš</button>
        </div>

        {tab==='friends'&&(Object.keys(friends).length===0
          ?<div className="mono" style={{textAlign:'center',color:'var(--tx3)',fontSize:10,letterSpacing:2,padding:36}}>ĞĞ•Ğ¢ Ğ”Ğ Ğ£Ğ—Ğ•Ğ™<br/><br/><span style={{fontSize:9}}>Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ Ğ¿Ğ¾Ğ¸ÑĞº</span></div>
          :Object.keys(friends).map(fid=>{const fu=allUsers[fid];if(!fu)return null;return(
            <div key={fid} className="fi hot" onClick={()=>setChatFr(fid)}>
              <div style={{flex:1}}>
                <div style={{fontSize:14,fontWeight:600}}>{fu.displayName||fu.username}</div>
                <div style={{display:'flex',alignItems:'center',gap:6,marginTop:3}}>
                  <div className="mono" style={{fontSize:8,color:'var(--tx3)'}}>@{fu.username}</div>
                  <RChip user={fu}/>
                </div>
              </div>
              <div className="mono" style={{fontSize:12,color:'var(--c)'}}>ğŸ’¬</div>
            </div>
          );})
        )}

        {tab==='reqs'&&(Object.keys(reqs).length===0
          ?<div className="mono" style={{textAlign:'center',color:'var(--tx3)',fontSize:10,letterSpacing:2,padding:36}}>ĞĞ•Ğ¢ Ğ—ĞĞŸĞ ĞĞ¡ĞĞ’</div>
          :Object.entries(reqs).map(([fid])=>{const fu=allUsers[fid];return(
            <div key={fid} className="fi">
              <div style={{flex:1}}>
                <div style={{fontSize:14,fontWeight:600}}>{fu?.displayName||fu?.username||fid}</div>
                <div className="mono" style={{fontSize:8,color:'var(--tx3)',marginTop:2}}>@{fid} Â· Ñ…Ğ¾Ñ‡ĞµÑ‚ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ</div>
              </div>
              <div style={{display:'flex',gap:6}}>
                <button onClick={()=>accept(fid)} style={{background:'var(--gt)',border:'1px solid var(--gb)',color:'var(--g)',fontFamily:"'Inter',sans-serif",fontSize:9,padding:'5px 10px',cursor:'pointer',letterSpacing:1}}>âœ“</button>
                <button onClick={()=>reject(fid)} style={{background:'var(--rt)',border:'1px solid var(--rb)',color:'var(--r)',fontFamily:"'Inter',sans-serif",fontSize:9,padding:'5px 10px',cursor:'pointer'}}>âœ•</button>
              </div>
            </div>
          );})
        )}

        {tab==='invs'&&(Object.keys(gameInvites||{}).length===0
          ?<div className="mono" style={{textAlign:'center',color:'var(--tx3)',fontSize:10,letterSpacing:2,padding:36}}>ĞĞ•Ğ¢ ĞŸĞ Ğ˜Ğ“Ğ›ĞĞ¨Ğ•ĞĞ˜Ğ™</div>
          :Object.entries(gameInvites||{}).map(([iid,inv])=>(
            <div key={iid} className="fi">
              <div style={{flex:1}}>
                <div style={{fontSize:14,fontWeight:600}}>ĞŸÑ€Ğ¸Ğ³Ğ»Ğ°ÑˆĞµĞ½Ğ¸Ğµ Ğ² Ğ¸Ğ³Ñ€Ñƒ</div>
                <div className="mono" style={{fontSize:8,color:'var(--tx3)',marginTop:2}}>Ğ¾Ñ‚ {inv.fromName||inv.from} Â· {inv.gameId}</div>
              </div>
              <div style={{display:'flex',gap:6}}>
                <button onClick={()=>acceptInv(iid,inv)} style={{background:'var(--at)',border:'1px solid var(--ab)',color:'var(--a)',fontFamily:"'Inter',sans-serif",fontSize:9,padding:'5px 10px',cursor:'pointer',letterSpacing:1}}>âš¡ Ğ’ĞĞ™Ğ¢Ğ˜</button>
                <button onClick={()=>declineInv(iid)} style={{background:'var(--rt)',border:'1px solid var(--rb)',color:'var(--r)',fontFamily:"'Inter',sans-serif",fontSize:9,padding:'5px 10px',cursor:'pointer'}}>âœ•</button>
              </div>
            </div>
          ))
        )}

        {tab==='search'&&(
          <div>
            <div style={{display:'flex',gap:8,marginBottom:12}}>
              <input className="inp" style={{marginBottom:0,flex:1}} value={q} onChange={e=>setQ(e.target.value)} onKeyDown={e=>e.key==='Enter'&&search()} placeholder="Ğ˜Ğ¼Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñâ€¦" maxLength={20}/>
              <button onClick={search} style={{background:'var(--a)',color:'#000',border:'none',padding:'0 16px',fontFamily:"'Inter',sans-serif",fontSize:15,letterSpacing:2,cursor:'pointer',flexShrink:0}}>{searching?'â€¦':'ĞĞĞ™Ğ¢Ğ˜'}</button>
            </div>
            {results.map(u=>{
              const isFr=!!friends[u.username];
              return(
                <div key={u.username} className="fi">
                  <div style={{flex:1}}>
                    <div style={{fontSize:14,fontWeight:600}}>{u.displayName||u.username}</div>
                    <div style={{display:'flex',alignItems:'center',gap:6,marginTop:3}}>
                      <div className="mono" style={{fontSize:8,color:'var(--tx3)'}}>@{u.username}</div>
                      <RChip user={u}/>
                    </div>
                  </div>
                  {isFr?<span className="bdg bdg-g">Ğ”Ğ Ğ£Ğ“</span>
                   :u._req?<span className="bdg bdg-a">ĞĞ¢ĞŸĞ ĞĞ’Ğ›Ğ•ĞĞ</span>
                   :<button onClick={()=>addFriend(u.username)} style={{background:'var(--at)',border:'1px solid var(--ab)',color:'var(--a)',fontFamily:"'Inter',sans-serif",fontSize:9,padding:'5px 10px',cursor:'pointer',letterSpacing:1}}>+ Ğ”ĞĞ‘ĞĞ’Ğ˜Ğ¢Ğ¬</button>}
                </div>
              );
            })}
            {q&&!searching&&results.length===0&&<div className="mono" style={{textAlign:'center',color:'var(--tx3)',fontSize:10,letterSpacing:2,padding:24}}>ĞĞ• ĞĞĞ™Ğ”Ğ•ĞĞ</div>}
          </div>
        )}
      </div>
    </div>
  );
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ROOT APP  â€”  SINGLE FIXED CONTAINER ARCHITECTURE
   NavBar is position:fixed at bottom (z:8000)
   Screen components never use position:fixed themselves
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function App(){
  const[user,setUser]=useState(null);
  const[screen,setScreen]=useState('auth');
  const[gameId,setGid]=useState(null);
  const[toast,showToast]=useToast();
  const[reqCnt,setReqCnt]=useState(0);
  const[invites,setInvites]=useState({});
  const prevInvIds=useRef(new Set());

  const notif=reqCnt+Object.keys(invites).length;

  // Refresh user
  useEffect(()=>{
    if(!user)return;
    const t=setInterval(async()=>{const f=await DB.getUser(user.username);if(f)setUser(f);},10000);
    return()=>clearInterval(t);
  },[user?.username]);

  // Watch notifications
  useEffect(()=>{
    if(!user)return;
    const u1=DB.watchFriendReqs(user.username,r=>setReqCnt(Object.keys(r).length));
    const u2=DB.watchGameInvites(user.username,inv=>{
      const ids=Object.keys(inv);
      ids.forEach(id=>{if(!prevInvIds.current.has(id)&&inv[id])showToast(`âš¡ ĞŸÑ€Ğ¸Ğ³Ğ»Ğ°ÑˆĞµĞ½Ğ¸Ğµ Ğ¾Ñ‚ ${inv[id].fromName}!`,'ok');});
      prevInvIds.current=new Set(ids);
      setInvites(inv);
    });
    return()=>{u1();u2();};
  },[user?.username]);

  // Re-join active game
  useEffect(()=>{
    if(screen!=='home'||!user)return;
    (async()=>{
      try{
        const gs=await DB.getAllGames();
        const my=Object.values(gs||{}).find(g=>g&&g.players&&g.players[user.username]&&g.phase!=='finished');
        if(my){setGid(my.id);setScreen(my.phase==='lobby'?'lobby':'game');}
      }catch(e){console.error('rejoin error',e);}
    })();
  },[screen,user?.username]);

  const nav=s=>setScreen(s);

  const handleAcceptInvite=async(gid)=>{
    const g=await DB.getGame(gid);
    if(!g)return showToast('Ğ˜Ğ³Ñ€Ğ° Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½Ğ°','err');
    if(g.phase!=='lobby')return showToast('Ğ˜Ğ³Ñ€Ğ° Ğ½Ğµ Ğ² Ğ»Ğ¾Ğ±Ğ±Ğ¸','err');
    if(!g.players?.[user.username]){
      if(Object.keys(g.players||{}).length>=16)return showToast('ĞšĞ¾Ğ¼Ğ½Ğ°Ñ‚Ğ° Ğ·Ğ°Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ°','err');
      await DB.updateGame(gid,{[`players/${user.username}`]:{userId:user.username,username:user.username,name:user.displayName||user.username,cards:null,revealed:[],isEliminated:false}});
    }
    setGid(gid);nav('lobby');
  };

  const NAV_SCREENS=['home','friends','leaderboard','profile'];
  const showNav=!!user&&NAV_SCREENS.includes(screen);

  /* NavBar component (inline so it has access to state) */
  const NavBar=()=>(
    <div id="nav-bar">
      {[
        ['home',Ico.home,'Ğ“Ğ›ĞĞ’ĞĞĞ¯'],
        ['friends',Ico.users,'Ğ”Ğ Ğ£Ğ—Ğ¬Ğ¯'],
        ['leaderboard',Ico.trophy,'Ğ Ğ•Ğ™Ğ¢Ğ˜ĞĞ“'],
        ['profile',Ico.user,'ĞŸĞ ĞĞ¤Ğ˜Ğ›Ğ¬'],
      ].map(([s,icon,label])=>(
        <button key={s} className={`nb${screen===s?' on':''}`} onClick={()=>nav(s)}>
          {s==='friends'&&notif>0&&<span className="nb-badge">{notif>9?'9+':notif}</span>}
          {icon}
          <span>{label}</span>
        </button>
      ))}
      <button className="nb" onClick={()=>{setUser(null);setGid(null);nav('auth');}}>
        {Ico.exit}<span>Ğ’Ğ«Ğ¥ĞĞ”</span>
      </button>
    </div>
  );

  return(
    <>
      <Toast t={toast}/>

      {/* â”€â”€ Single screen area â”€â”€ */}
      <div id="screen-area">
        {screen==='auth'&&<AuthScreen onLogin={u=>{setUser(u);nav('home');}} toast={showToast}/>}

        {screen==='home'&&user&&<HomeScreen user={user} nav={nav}/>}

        {screen==='friends'&&user&&<FriendsScreen user={user} onBack={()=>nav('home')} toast={showToast} gameInvites={invites} onAcceptInvite={handleAcceptInvite}/>}

        {screen==='profile'&&user&&<ProfileScreen user={user} onBack={()=>nav('home')} toast={showToast} onUpdate={u=>setUser(u)}/>}

        {screen==='leaderboard'&&user&&<LeaderboardScreen me={user} onBack={()=>nav('home')}/>}

        {screen==='admin'&&user?.isAdmin&&<AdminScreen me={user} onBack={()=>nav('home')} toast={showToast}/>}

        {screen==='createGame'&&user&&<CreateGameScreen user={user} onBack={()=>nav('home')} onCreated={id=>{setGid(id);nav('lobby');}} toast={showToast}/>}

        {screen==='joinGame'&&user&&<JoinGameScreen user={user} onBack={()=>nav('home')} onJoined={id=>{setGid(id);nav('lobby');}} toast={showToast}/>}
        {screen==='matchmaking'&&user&&<MatchmakingScreen user={user} onBack={()=>nav('home')} onJoined={id=>{setGid(id);nav('lobby');}} toast={showToast}/>}

        {screen==='lobby'&&user&&gameId&&<LobbyScreen gameId={gameId} user={user} onBack={()=>{setGid(null);nav('home');}} onStarted={()=>nav('game')} toast={showToast}/>}

        {screen==='game'&&user&&gameId&&<GameWrapper gameId={gameId} user={user} onExit={()=>{setGid(null);nav('home');}} toast={showToast}/>}
      </div>

      {/* â”€â”€ NavBar: always fixed at bottom, independent of screen content â”€â”€ */}
      {showNav&&<NavBar/>}
    </>
  );
}

ReactDOM.createRoot(document.getElementById('screen-area')).render(<App/>);

// â•â• BUNKER GATE â€” ĞºĞ¸Ğ½ĞµĞ¼Ğ°Ñ‚Ğ¾Ğ³Ñ€Ğ°Ñ„Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ğ°Ğ½Ğ¸Ğ¼Ğ°Ñ†Ğ¸Ñ (Ğ²Ñ‹Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ÑÑ Ğ¿Ğ¾ÑĞ»Ğµ Ğ»Ğ¾Ğ³Ğ¸Ğ½Ğ°) â•â•
window.triggerGate = function(){
  const gate = document.getElementById('bunker-gate');
  const statusTxt = document.getElementById('gate-status-txt');
  if(!gate) return;

  // ĞŸĞ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµĞ¼ Ğ²Ğ¾Ñ€Ğ¾Ñ‚Ğ°
  gate.classList.remove('hidden');
  gate.classList.remove('opening');
  gate.classList.remove('flashing');
  gate.style.opacity = '1';
  gate.style.transition = '';
  const arc = gate.querySelector('.gate-lock-arc');
  if(arc){ arc.style.transform=''; arc.style.opacity=''; }

  const setStatus = (txt) => { if(statusTxt) statusTxt.textContent = txt; };

  setStatus('Ğ¡Ğ˜Ğ¡Ğ¢Ğ•ĞœĞ Ğ‘Ğ•Ğ—ĞĞŸĞĞ¡ĞĞĞ¡Ğ¢Ğ˜ ĞĞšĞ¢Ğ˜Ğ’ĞĞ');
  setTimeout(()=>{ setStatus('Ğ˜Ğ”Ğ•ĞĞ¢Ğ˜Ğ¤Ğ˜ĞšĞĞ¦Ğ˜Ğ¯... â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 80%'); }, 600);
  setTimeout(()=>{ setStatus('Ğ”ĞĞ¡Ğ¢Ğ£ĞŸ Ğ ĞĞ—Ğ Ğ•Ğ¨ĞĞ â€” ĞĞ¢ĞšĞ Ğ«Ğ’ĞĞ® Ğ’ĞĞ ĞĞ¢Ğ'); }, 1400);
  setTimeout(()=>{
    if(arc){ arc.style.transform='translateY(4px)'; arc.style.opacity='0.4'; }
  }, 1700);
  setTimeout(()=>{
    gate.classList.add('flashing');
    setTimeout(()=>gate.classList.remove('flashing'), 180);
  }, 1900);
  setTimeout(()=>{
    gate.classList.add('opening');
    setStatus('');
  }, 2000);
  setTimeout(()=>{
    gate.style.transition = 'opacity .5s ease';
    gate.style.opacity = '0';
    setTimeout(()=>{ gate.classList.add('hidden'); gate.style.opacity=''; }, 520);
  }, 3200);
};
</script>
</body>
</html>